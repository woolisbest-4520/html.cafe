<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>HTML.cafe - a realtime HTML editor and host</title>
        <meta name="description" content="Edit HTML in realtime, save your page and access it from anywhere!">
        <script defer data-domain="html.cafe" src="https://milkymouse.com/js/script.js"></script>
        <link rel="shortcut icon" href="favicon.ico">
        <style>
            * {
                box-sizing: border-box;
            }

            html {
                height: 100%;
                width: 100%;
                font-family: monospace;
            }

            body {
                height: 100%;
                width: 100%;
                padding: 0;
                margin: 0;
                overflow: hidden;
                padding-bottom: 0 !important;
            }

            body.huge {
                padding-bottom: 105px;
            }

            body.big {
                padding-bottom: 60px;
            }

            body.small {
                padding-bottom: 60px;
            }

            textarea {
                padding: 10px;
                resize: none;
                width: 100%;
                height: 40%;
                margin: 0;
                border: 0;
                background: #fefefe;
                overflow: auto;
            }

            textarea:focus {
                outline: none;
            }

            .padded {
                padding-top: 22px;
            }

            iframe {
                margin: 0;
                border: 0;
                height: 60%;
                overflow: hidden;
                box-sizing: border-box ;
                width: 100%;
                padding-top: 5px;
            }

            #main {
                height: calc(100% - 38px);
                position: relative;
            }

            #menu {
                border-top : 1px solid #808080;
                border-bottom: 1px solid #808080;
                padding: 2px 2px;
                white-space: nowrap;
                overflow: hidden;
                background: #f8f8f8;
                height: 38px;
            }

            #menu a {
                text-decoration: none;
                color: #000000;
                user-select: none;
                cursor: pointer;
                display: inline-block;
            }

            #menu a.control:hover {
                background: #ddd;
            }

            #menu a.control:active {
                background: #ccc;
            }

            #menu a.control {
                background: #cee7ed;
                padding: 3px 6px;
                margin-right: 12px;
                text-align: center;
                min-width: 40px;
                padding: 2px 8px;
            }

            #menu a.disabled {
                background: #eee !important;
                cursor: default;
            }

            #logo {
                font-size: 22px;
                position: relative;
                top: 2px;
                padding: 2px 0;
                margin: 0 20px 0 8px;
            }

            a#livelink {
                color: rgb(0,0,238);
                display: none;
            }

            #footer {
                position: absolute;
                bottom: 0;
                right: 0;
                background: #f3f3f3;
                padding: 4px 8px;
                font-size: 12px;
            }

            #footer b {
                margin: 0 5px;
                color: #999;
            }

            #editinfo {
                display: none;
                position: absolute;
                top: 40px;
                height: 18px;
                opacity: 0.8;
                background: #ffcdcd;
                padding: 1px 3px;
                padding-right: 25px;
                overflow: hidden;
                font-size: 13px;
                z-index: 10;
                font-weight: bold;
            }

            #editinfo span {
            }

            #hidemsg {
                text-decoration: none;
                display: inline-block;
                padding: 2px;
                font-size: 24px;
                position: absolute;
                right: 2px;
                top: -8px;
                color: #000;
            }

            #hidemsg:hover {
                color: #333;
            }

            .wrap {
                text-align: center;
                margin: 0;
                cursor: ns-resize;
            }

            .links {
                position: relative;
            }

            hr {
                height: 0;
                overflow: hidden;
                background: #fff;
                position: absolute;
                top: 12px;
                width: 100%;
                margin: 0;
                border: none;
                border-bottom: thick double #999;
            }

            .links:after {
                content: "\00A7";
                display: inline-block;
                position: relative;
                top: -1px;
                font-size: 24px;
                border-radius: 50%;
                background: white;
                font-weight: bold;
            }

            #datalabel {
                position: relative;
                right: 0;
                bottom: 0;
                display: block;
            }

            #datalabel:after {
                content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAQElEQVR42qXKwQkAIAxDUUdxtO6/RBQkQZvSi8I/pL4BoGw/XPkh4XigPmsUgh0626AjRsgxHTkUThsG2T/sIlzdTsp52kSS1wAAAABJRU5ErkJggg==);
                ; position: absolute;
                top: 20px;
                right: 20px;
                font-size: 14px;
                padding: 0 4px;
                background: #f3f3f3;
                font-weight: bold;
                border: 2px solid #999;
                opacity: 0.7;
            }

            #datalabel:hover:after {
                background: #eee;
                cursor: pointer;
                opacity: 1;
            }

            #mode {
                border-radius: 3px;
                padding: 2px 4px;
                background: #def2de;
                color: #333;
                position: absolute;
                top: 16px;
                right: 28px;
                font-size: 11px;
                z-index: 3;
                cursor: default;
                display: block;
            }

            #jsonholder {
                display: none;
                width: 0;
                height: 0;
            }

            .CodeMirror-hscrollbar {
                overflow-x: hidden !important;
            }

            .adthrive-sticky.adthrive-footer {
                position: static !important;
            }

            .adthrive-footer-message {
                display: none !important;
            }

            #mainad {
                position: relative;
                overflow: hidden;
            }

            #mainad.huge {
                max-height: 90px;
            }

            #mainad.big {
                max-height: 60px;
            }

            #mainad.small {
                max-height: 60px;
                text-align: center;
            }

            #media-width {
                position: absolute;
                z-index: -9999;
                width: 0;
                height: 0;
                display: none;
                visibility: hidden;
                min-width: 999999px;
            }

            @media (min-width: 320px) {
                #media-width {
                    min-width:320px;
                }
            }

            @media (min-width: 468px) {
                #media-width {
                    min-width:468px;
                }
            }

            @media (min-width: 728px) {
                #media-width {
                    min-width:728px;
                }
            }

            @media (min-width: 900px) {
                #media-width {
                    min-width:900px;
                }
            }

            @media (min-width: 970px) {
                #media-width {
                    min-width:970px;
                }
            }

            @media screen and (max-width: 480px) {
                #datalabel:after {
                    right:7px;
                }
            }
        </style>
        <style>
            .CodeMirror {
                font-family: monospace;
                height: 300px;
                color: #000;
                direction: ltr
            }

            .CodeMirror-lines {
                padding: 4px 0
            }

            .CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {
                padding: 0 4px
            }

            .CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler {
                background-color: transparent
            }

            .CodeMirror-gutters {
                border-right: 1px solid #ddd;
                background-color: #f7f7f7;
                white-space: nowrap
            }

            .CodeMirror-linenumber {
                padding: 0 3px 0 5px;
                min-width: 20px;
                text-align: right;
                color: #999;
                white-space: nowrap
            }

            .CodeMirror-guttermarker {
                color: #000
            }

            .CodeMirror-guttermarker-subtle {
                color: #999
            }

            .CodeMirror-cursor {
                border-left: 1px solid #000;
                border-right: none;
                width: 0
            }

            .CodeMirror div.CodeMirror-secondarycursor {
                border-left: 1px solid silver
            }

            .cm-fat-cursor .CodeMirror-cursor {
                width: auto;
                border: 0!important;
                background: #7e7
            }

            .cm-fat-cursor div.CodeMirror-cursors {
                z-index: 1
            }

            .cm-fat-cursor-mark {
                background-color: rgba(20,255,20,.5);
                -webkit-animation: blink 1.06s steps(1) infinite;
                -moz-animation: blink 1.06s steps(1) infinite;
                animation: blink 1.06s steps(1) infinite
            }

            .cm-animate-fat-cursor {
                width: auto;
                border: 0;
                -webkit-animation: blink 1.06s steps(1) infinite;
                -moz-animation: blink 1.06s steps(1) infinite;
                animation: blink 1.06s steps(1) infinite;
                background-color: #7e7
            }

            @-moz-keyframes blink {
                50% {
                    background-color: transparent
                }
            }

            @-webkit-keyframes blink {
                50% {
                    background-color: transparent
                }
            }

            @keyframes blink {
                50% {
                    background-color: transparent
                }
            }

            .cm-tab {
                display: inline-block;
                text-decoration: inherit
            }

            .CodeMirror-rulers {
                position: absolute;
                left: 0;
                right: 0;
                top: -50px;
                bottom: 0;
                overflow: hidden
            }

            .CodeMirror-ruler {
                border-left: 1px solid #ccc;
                top: 0;
                bottom: 0;
                position: absolute
            }

            .cm-s-default .cm-header {
                color: #00f
            }

            .cm-s-default .cm-quote {
                color: #090
            }

            .cm-negative {
                color: #d44
            }

            .cm-positive {
                color: #292
            }

            .cm-header,.cm-strong {
                font-weight: 700
            }

            .cm-em {
                font-style: italic
            }

            .cm-link {
                text-decoration: underline
            }

            .cm-strikethrough {
                text-decoration: line-through
            }

            .cm-s-default .cm-keyword {
                color: #708
            }

            .cm-s-default .cm-atom {
                color: #219
            }

            .cm-s-default .cm-number {
                color: #164
            }

            .cm-s-default .cm-def {
                color: #00f
            }

            .cm-s-default .cm-variable-2 {
                color: #05a
            }

            .cm-s-default .cm-type,.cm-s-default .cm-variable-3 {
                color: #085
            }

            .cm-s-default .cm-comment {
                color: #a50
            }

            .cm-s-default .cm-string {
                color: #a11
            }

            .cm-s-default .cm-string-2 {
                color: #f50
            }

            .cm-s-default .cm-meta {
                color: #555
            }

            .cm-s-default .cm-qualifier {
                color: #555
            }

            .cm-s-default .cm-builtin {
                color: #30a
            }

            .cm-s-default .cm-bracket {
                color: #997
            }

            .cm-s-default .cm-tag {
                color: #170
            }

            .cm-s-default .cm-attribute {
                color: #00c
            }

            .cm-s-default .cm-hr {
                color: #999
            }

            .cm-s-default .cm-link {
                color: #00c
            }

            .cm-s-default .cm-error {
                color: red
            }

            .cm-invalidchar {
                color: red
            }

            .CodeMirror-composing {
                border-bottom: 2px solid
            }

            div.CodeMirror span.CodeMirror-matchingbracket {
                color: #0b0
            }

            div.CodeMirror span.CodeMirror-nonmatchingbracket {
                color: #a22
            }

            .CodeMirror-matchingtag {
                background: rgba(255,150,0,.15)
            }

            .CodeMirror-activeline-background {
                background: #e8f2ff
            }

            .CodeMirror {
                position: relative;
                overflow: hidden;
                background: #fff
            }

            .CodeMirror-scroll {
                overflow: scroll!important;
                margin-bottom: -50px;
                margin-right: -50px;
                padding-bottom: 50px;
                height: 100%;
                outline: 0;
                position: relative
            }

            .CodeMirror-sizer {
                position: relative;
                border-right: 50px solid transparent
            }

            .CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar {
                position: absolute;
                z-index: 6;
                display: none;
                outline: 0
            }

            .CodeMirror-vscrollbar {
                right: 0;
                top: 0;
                overflow-x: hidden;
                overflow-y: scroll
            }

            .CodeMirror-hscrollbar {
                bottom: 0;
                left: 0;
                overflow-y: hidden;
                overflow-x: scroll
            }

            .CodeMirror-scrollbar-filler {
                right: 0;
                bottom: 0
            }

            .CodeMirror-gutter-filler {
                left: 0;
                bottom: 0
            }

            .CodeMirror-gutters {
                position: absolute;
                left: 0;
                top: 0;
                min-height: 100%;
                z-index: 3
            }

            .CodeMirror-gutter {
                white-space: normal;
                height: 100%;
                display: inline-block;
                vertical-align: top;
                margin-bottom: -50px
            }

            .CodeMirror-gutter-wrapper {
                position: absolute;
                z-index: 4;
                background: 0 0!important;
                border: none!important
            }

            .CodeMirror-gutter-background {
                position: absolute;
                top: 0;
                bottom: 0;
                z-index: 4
            }

            .CodeMirror-gutter-elt {
                position: absolute;
                cursor: default;
                z-index: 4
            }

            .CodeMirror-gutter-wrapper ::selection {
                background-color: transparent
            }

            .CodeMirror-gutter-wrapper ::-moz-selection {
                background-color: transparent
            }

            .CodeMirror-lines {
                cursor: text;
                min-height: 1px
            }

            .CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {
                -moz-border-radius: 0;
                -webkit-border-radius: 0;
                border-radius: 0;
                border-width: 0;
                background: 0 0;
                font-family: inherit;
                font-size: inherit;
                margin: 0;
                white-space: pre;
                word-wrap: normal;
                line-height: inherit;
                color: inherit;
                z-index: 2;
                position: relative;
                overflow: visible;
                -webkit-tap-highlight-color: transparent;
                -webkit-font-variant-ligatures: contextual;
                font-variant-ligatures: contextual
            }

            .CodeMirror-wrap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like {
                word-wrap: break-word;
                white-space: pre-wrap;
                word-break: normal
            }

            .CodeMirror-linebackground {
                position: absolute;
                left: 0;
                right: 0;
                top: 0;
                bottom: 0;
                z-index: 0
            }

            .CodeMirror-linewidget {
                position: relative;
                z-index: 2;
                padding: .1px
            }

            .CodeMirror-rtl pre {
                direction: rtl
            }

            .CodeMirror-code {
                outline: 0
            }

            .CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber,.CodeMirror-scroll,.CodeMirror-sizer {
                -moz-box-sizing: content-box;
                box-sizing: content-box
            }

            .CodeMirror-measure {
                position: absolute;
                width: 100%;
                height: 0;
                overflow: hidden;
                visibility: hidden
            }

            .CodeMirror-cursor {
                position: absolute;
                pointer-events: none
            }

            .CodeMirror-measure pre {
                position: static
            }

            div.CodeMirror-cursors {
                visibility: hidden;
                position: relative;
                z-index: 3
            }

            div.CodeMirror-dragcursors {
                visibility: visible
            }

            .CodeMirror-focused div.CodeMirror-cursors {
                visibility: visible
            }

            .CodeMirror-selected {
                background: #d9d9d9
            }

            .CodeMirror-focused .CodeMirror-selected {
                background: #d7d4f0
            }

            .CodeMirror-crosshair {
                cursor: crosshair
            }

            .CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection {
                background: #d7d4f0
            }

            .CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection {
                background: #d7d4f0
            }

            .cm-searching {
                background-color: #ffa;
                background-color: rgba(255,255,0,.4)
            }

            .cm-force-border {
                padding-right: .1px
            }

            @media print {
                .CodeMirror div.CodeMirror-cursors {
                    visibility: hidden
                }
            }

            .cm-tab-wrap-hack:after {
                content: ''
            }

            span.CodeMirror-selectedtext {
                background: 0 0
            }

            .CodeMirror-matchingbracket {
                outline: 1px solid grey;
                color: #000!important
            }
        </style>
        <script>
            function getStyle(el, cssprop) {

                if (!el)
                    return false;

                if (el.currentStyle)
                    //IE
                    return el.currentStyle[cssprop]
                else if (document.defaultView && document.defaultView.getComputedStyle)
                    //Firefox
                    return document.defaultView.getComputedStyle(el, "")[cssprop]
                else
                    //try and get inline style
                    return el.style[cssprop]
            }
        </script>
    </head>
    <body id="body">
        <div id="media-width"></div>
        <script>
            var mediaWidth = parseInt(getStyle(document.getElementById('media-width'), 'minWidth'));
        </script>
        <div id="menu" class="menu">
            <a id="logo" href="/" title="html.cafe">
                <span style="font-weight:bold;font-size:19px;">HTML</span>
                <span style="font-weight:bold;color:#4e1aff;font-size:20px;">.</span>
                <span style="font-weight:bold;color:#666;font-size:17px;">cafe</span>
            </a>
            <a class="control" href="/new" title="start a new edit" onClick="newEdit();return false;">new</a>
            <a class="control" style="width:50px;" id="savelink" title="save and get a permanent link" href="javascript:void(0);" onClick="save()">save</a>
            <a class="control" id="livelink" title="open live site" target="_BLANK">live &#8599;</a>
        </div>
        <div id="main">
            <textarea id="data" autocapitalize="off" spellcheck="false"></textarea>
            <label title="Open in separate window" id="datalabel" for="data" onClick="fullScreen();return false;"></label>
            <div id="editinfo">
                <span>This is your private edit page. Save this url!</span>
                <a id="hidemsg" title="close" href="javascript:void(0)" onClick="hideEditMsg();">&times;</a>
            </div>
            <div id="gutter" class="wrap">
                <div class="links">
                    <hr/>
                </div>
            </div>
            <div id="jsonholder"></div>
            <iframe title="HTML output" id="output" name="output"></iframe>
            <a id="mode" title="don't like html? enter json instead." class="scroll">html</a>
            <div id="footer">
                <a id="gallery" href="/gallery" title="gallery"/>gallery</a>
                <b>|</b>
                <a id="terms" target="_BLANK" href="/terms.html" title="terms"/>terms</a>
            </div>
        </div>
        <div id="mainad"></div>
        <script>
            /*! Split.js - v1.6.0 */
            !function(e, t) {
                "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = e || self).Split = t()
            }(this, (function() {
                "use strict";
                var e = "undefined" != typeof window ? window : null
                  , t = null === e
                  , n = t ? void 0 : e.document
                  , i = function() {
                    return !1
                }
                  , r = t ? "calc" : ["", "-webkit-", "-moz-", "-o-"].filter((function(e) {
                    var t = n.createElement("div");
                    return t.style.cssText = "width:" + e + "calc(9px)",
                    !!t.style.length
                }
                )).shift() + "calc"
                  , s = function(e) {
                    return "string" == typeof e || e instanceof String
                }
                  , o = function(e) {
                    if (s(e)) {
                        var t = n.querySelector(e);
                        if (!t)
                            throw new Error("Selector " + e + " did not match a DOM element");
                        return t
                    }
                    return e
                }
                  , a = function(e, t, n) {
                    var i = e[t];
                    return void 0 !== i ? i : n
                }
                  , u = function(e, t, n, i) {
                    if (t) {
                        if ("end" === i)
                            return 0;
                        if ("center" === i)
                            return e / 2
                    } else if (n) {
                        if ("start" === i)
                            return 0;
                        if ("center" === i)
                            return e / 2
                    }
                    return e
                }
                  , l = function(e, t) {
                    var i = n.createElement("div");
                    return i.className = "gutter gutter-" + t,
                    i
                }
                  , c = function(e, t, n) {
                    var i = {};
                    return s(t) ? i[e] = t : i[e] = r + "(" + t + "% - " + n + "px)",
                    i
                }
                  , h = function(e, t) {
                    var n;
                    return (n = {})[e] = t + "px",
                    n
                };
                return function(r, s) {
                    if (void 0 === s && (s = {}),
                    t)
                        return {};
                    var d, f, v, m, g, p, y = r;
                    Array.from && (y = Array.from(y));
                    var z = o(y[0]).parentNode
                      , b = getComputedStyle ? getComputedStyle(z) : null
                      , E = b ? b.flexDirection : null
                      , S = a(s, "sizes") || y.map((function() {
                        return 100 / y.length
                    }
                    ))
                      , L = a(s, "minSize", 100)
                      , _ = Array.isArray(L) ? L : y.map((function() {
                        return L
                    }
                    ))
                      , w = a(s, "expandToMin", !1)
                      , k = a(s, "gutterSize", 10)
                      , x = a(s, "gutterAlign", "center")
                      , C = a(s, "snapOffset", 30)
                      , M = a(s, "dragInterval", 1)
                      , U = a(s, "direction", "horizontal")
                      , O = a(s, "cursor", "horizontal" === U ? "col-resize" : "row-resize")
                      , D = a(s, "gutter", l)
                      , A = a(s, "elementStyle", c)
                      , B = a(s, "gutterStyle", h);
                    function j(e, t, n, i) {
                        var r = A(d, t, n, i);
                        Object.keys(r).forEach((function(t) {
                            e.style[t] = r[t]
                        }
                        ))
                    }
                    function F() {
                        return p.map((function(e) {
                            return e.size
                        }
                        ))
                    }
                    function R(e) {
                        return "touches"in e ? e.touches[0][f] : e[f]
                    }
                    function T(e) {
                        var t = p[this.a]
                          , n = p[this.b]
                          , i = t.size + n.size;
                        t.size = e / this.size * i,
                        n.size = i - e / this.size * i,
                        j(t.element, t.size, this._b, t.i),
                        j(n.element, n.size, this._c, n.i)
                    }
                    function N(e) {
                        var t, n = p[this.a], r = p[this.b];
                        this.dragging && (t = R(e) - this.start + (this._b - this.dragOffset),
                        M > 1 && (t = Math.round(t / M) * M),
                        t <= n.minSize + C + this._b ? t = n.minSize + this._b : t >= this.size - (r.minSize + C + this._c) && (t = this.size - (r.minSize + this._c)),
                        T.call(this, t),
                        a(s, "onDrag", i)())
                    }
                    function q() {
                        var e = p[this.a].element
                          , t = p[this.b].element
                          , n = e.getBoundingClientRect()
                          , i = t.getBoundingClientRect();
                        this.size = n[d] + i[d] + this._b + this._c,
                        this.start = n[v],
                        this.end = n[m]
                    }
                    function H(e) {
                        var t = function(e) {
                            if (!getComputedStyle)
                                return null;
                            var t = getComputedStyle(e);
                            if (!t)
                                return null;
                            var n = e[g];
                            return 0 === n ? null : n -= "horizontal" === U ? parseFloat(t.paddingLeft) + parseFloat(t.paddingRight) : parseFloat(t.paddingTop) + parseFloat(t.paddingBottom)
                        }(z);
                        if (null === t)
                            return e;
                        if (_.reduce((function(e, t) {
                            return e + t
                        }
                        ), 0) > t)
                            return e;
                        var n = 0
                          , i = []
                          , r = e.map((function(r, s) {
                            var o = t * r / 100
                              , a = u(k, 0 === s, s === e.length - 1, x)
                              , l = _[s] + a;
                            return o < l ? (n += l - o,
                            i.push(0),
                            l) : (i.push(o - l),
                            o)
                        }
                        ));
                        return 0 === n ? e : r.map((function(e, r) {
                            var s = e;
                            if (n > 0 && i[r] - n > 0) {
                                var o = Math.min(n, i[r] - n);
                                n -= o,
                                s = e - o
                            }
                            return s / t * 100
                        }
                        ))
                    }
                    function I() {
                        var t = p[this.a].element
                          , r = p[this.b].element;
                        this.dragging && a(s, "onDragEnd", i)(F()),
                        this.dragging = !1,
                        e.removeEventListener("mouseup", this.stop),
                        e.removeEventListener("touchend", this.stop),
                        e.removeEventListener("touchcancel", this.stop),
                        e.removeEventListener("mousemove", this.move),
                        e.removeEventListener("touchmove", this.move),
                        this.stop = null,
                        this.move = null,
                        t.removeEventListener("selectstart", i),
                        t.removeEventListener("dragstart", i),
                        r.removeEventListener("selectstart", i),
                        r.removeEventListener("dragstart", i),
                        t.style.userSelect = "",
                        t.style.webkitUserSelect = "",
                        t.style.MozUserSelect = "",
                        t.style.pointerEvents = "",
                        r.style.userSelect = "",
                        r.style.webkitUserSelect = "",
                        r.style.MozUserSelect = "",
                        r.style.pointerEvents = "",
                        this.gutter.style.cursor = "",
                        this.parent.style.cursor = "",
                        n.body.style.cursor = ""
                    }
                    function W(t) {
                        if (!("button"in t) || 0 === t.button) {
                            var r = p[this.a].element
                              , o = p[this.b].element;
                            this.dragging || a(s, "onDragStart", i)(F()),
                            t.preventDefault(),
                            this.dragging = !0,
                            this.move = N.bind(this),
                            this.stop = I.bind(this),
                            e.addEventListener("mouseup", this.stop),
                            e.addEventListener("touchend", this.stop),
                            e.addEventListener("touchcancel", this.stop),
                            e.addEventListener("mousemove", this.move),
                            e.addEventListener("touchmove", this.move),
                            r.addEventListener("selectstart", i),
                            r.addEventListener("dragstart", i),
                            o.addEventListener("selectstart", i),
                            o.addEventListener("dragstart", i),
                            r.style.userSelect = "none",
                            r.style.webkitUserSelect = "none",
                            r.style.MozUserSelect = "none",
                            r.style.pointerEvents = "none",
                            o.style.userSelect = "none",
                            o.style.webkitUserSelect = "none",
                            o.style.MozUserSelect = "none",
                            o.style.pointerEvents = "none",
                            this.gutter.style.cursor = O,
                            this.parent.style.cursor = O,
                            n.body.style.cursor = O,
                            q.call(this),
                            this.dragOffset = R(t) - this.end
                        }
                    }
                    "horizontal" === U ? (d = "width",
                    f = "clientX",
                    v = "left",
                    m = "right",
                    g = "clientWidth") : "vertical" === U && (d = "height",
                    f = "clientY",
                    v = "top",
                    m = "bottom",
                    g = "clientHeight"),
                    S = H(S);
                    var X = [];
                    function Y(e) {
                        var t = e.i === X.length
                          , n = t ? X[e.i - 1] : X[e.i];
                        q.call(n);
                        var i = t ? n.size - e.minSize - n._c : e.minSize + n._b;
                        T.call(n, i)
                    }
                    return (p = y.map((function(e, t) {
                        var n, i = {
                            element: o(e),
                            size: S[t],
                            minSize: _[t],
                            i: t
                        };
                        if (t > 0 && ((n = {
                            a: t - 1,
                            b: t,
                            dragging: !1,
                            direction: U,
                            parent: z
                        })._b = u(k, t - 1 == 0, !1, x),
                        n._c = u(k, !1, t === y.length - 1, x),
                        "row-reverse" === E || "column-reverse" === E)) {
                            var r = n.a;
                            n.a = n.b,
                            n.b = r
                        }
                        if (t > 0) {
                            var s = D(t, U, i.element);
                            !function(e, t, n) {
                                var i = B(d, t, n);
                                Object.keys(i).forEach((function(t) {
                                    e.style[t] = i[t]
                                }
                                ))
                            }(s, k, t),
                            n._a = W.bind(n),
                            s.addEventListener("mousedown", n._a),
                            s.addEventListener("touchstart", n._a),
                            z.insertBefore(s, i.element),
                            n.gutter = s
                        }
                        return j(i.element, i.size, u(k, 0 === t, t === y.length - 1, x), t),
                        t > 0 && X.push(n),
                        i
                    }
                    ))).forEach((function(e) {
                        var t = e.element.getBoundingClientRect()[d];
                        t < e.minSize && (w ? Y(e) : e.minSize = t)
                    }
                    )),
                    {
                        setSizes: function(e) {
                            var t = H(e);
                            t.forEach((function(e, n) {
                                if (n > 0) {
                                    var i = X[n - 1]
                                      , r = p[i.a]
                                      , s = p[i.b];
                                    r.size = t[n - 1],
                                    s.size = e,
                                    j(r.element, r.size, i._b, r.i),
                                    j(s.element, s.size, i._c, s.i)
                                }
                            }
                            ))
                        },
                        getSizes: F,
                        collapse: function(e) {
                            Y(p[e])
                        },
                        destroy: function(e, t) {
                            X.forEach((function(n) {
                                if (!0 !== t ? n.parent.removeChild(n.gutter) : (n.gutter.removeEventListener("mousedown", n._a),
                                n.gutter.removeEventListener("touchstart", n._a)),
                                !0 !== e) {
                                    var i = A(d, n.a.size, n._b);
                                    Object.keys(i).forEach((function(e) {
                                        p[n.a].element.style[e] = "",
                                        p[n.b].element.style[e] = ""
                                    }
                                    ))
                                }
                            }
                            ))
                        },
                        parent: z,
                        pairs: X
                    }
                }
            }
            ));
        </script>
        <script>
            /* codemirror */
            var $jscomp = $jscomp || {};
            $jscomp.scope = {};
            $jscomp.findInternal = function(v, G, D) {
                v instanceof String && (v = String(v));
                for (var p = v.length, E = 0; E < p; E++) {
                    var x = v[E];
                    if (G.call(D, x, E, v))
                        return {
                            i: E,
                            v: x
                        }
                }
                return {
                    i: -1,
                    v: void 0
                }
            }
            ;
            $jscomp.ASSUME_ES5 = !1;
            $jscomp.ASSUME_NO_NATIVE_MAP = !1;
            $jscomp.ASSUME_NO_NATIVE_SET = !1;
            $jscomp.SIMPLE_FROUND_POLYFILL = !1;
            $jscomp.defineProperty = $jscomp.ASSUME_ES5 || "function" == typeof Object.defineProperties ? Object.defineProperty : function(v, G, D) {
                v != Array.prototype && v != Object.prototype && (v[G] = D.value)
            }
            ;
            $jscomp.getGlobal = function(v) {
                v = ["object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global, v];
                for (var G = 0; G < v.length; ++G) {
                    var D = v[G];
                    if (D && D.Math == Math)
                        return D
                }
                return globalThis
            }
            ;
            $jscomp.global = $jscomp.getGlobal(this);
            $jscomp.polyfill = function(v, G, D, p) {
                if (G) {
                    D = $jscomp.global;
                    v = v.split(".");
                    for (p = 0; p < v.length - 1; p++) {
                        var E = v[p];
                        E in D || (D[E] = {});
                        D = D[E]
                    }
                    v = v[v.length - 1];
                    p = D[v];
                    G = G(p);
                    G != p && null != G && $jscomp.defineProperty(D, v, {
                        configurable: !0,
                        writable: !0,
                        value: G
                    })
                }
            }
            ;
            $jscomp.polyfill("Array.prototype.find", function(v) {
                return v ? v : function(v, D) {
                    return $jscomp.findInternal(this, v, D).v
                }
            }, "es6", "es3");
            (function(v, G) {
                "object" === typeof exports && "undefined" !== typeof module ? module.exports = G() : "function" === typeof define && define.amd ? define(G) : (v = v || self,
                v.CodeMirror = G())
            }
            )(this, function() {
                function v(a) {
                    return new RegExp("(^|\\s)" + a + "(?:$|\\s)\\s*")
                }
                function G(a) {
                    for (var b = a.childNodes.length; 0 < b; --b)
                        a.removeChild(a.firstChild);
                    return a
                }
                function D(a, b) {
                    return G(a).appendChild(b)
                }
                function p(a, b, c, d) {
                    a = document.createElement(a);
                    c && (a.className = c);
                    d && (a.style.cssText = d);
                    if ("string" == typeof b)
                        a.appendChild(document.createTextNode(b));
                    else if (b)
                        for (c = 0; c < b.length; ++c)
                            a.appendChild(b[c]);
                    return a
                }
                function E(a, b, c, d) {
                    a = p(a, b, c, d);
                    a.setAttribute("role", "presentation");
                    return a
                }
                function x(a, b) {
                    3 == b.nodeType && (b = b.parentNode);
                    if (a.contains)
                        return a.contains(b);
                    do
                        if (11 == b.nodeType && (b = b.host),
                        b == a)
                            return !0;
                    while (b = b.parentNode)
                }
                function ha() {
                    try {
                        var a = document.activeElement
                    } catch (b) {
                        a = document.body || null
                    }
                    for (; a && a.shadowRoot && a.shadowRoot.activeElement; )
                        a = a.shadowRoot.activeElement;
                    return a
                }
                function L(a, b) {
                    var c = a.className;
                    v(b).test(c) || (a.className += (c ? " " : "") + b)
                }
                function ra(a, b) {
                    a = a.split(" ");
                    for (var c = 0; c < a.length; c++)
                        a[c] && !v(a[c]).test(b) && (b += " " + a[c]);
                    return b
                }
                function w(a) {
                    var b = Array.prototype.slice.call(arguments, 1);
                    return function() {
                        return a.apply(null, b)
                    }
                }
                function C(a, b, c) {
                    b || (b = {});
                    for (var d in a)
                        !a.hasOwnProperty(d) || !1 === c && b.hasOwnProperty(d) || (b[d] = a[d]);
                    return b
                }
                function F(a, b, c, d, e) {
                    null == b && (b = a.search(/[^\s\u00a0]/),
                    -1 == b && (b = a.length));
                    d = d || 0;
                    for (e = e || 0; ; ) {
                        var f = a.indexOf("\t", d);
                        if (0 > f || f >= b)
                            return e + (b - d);
                        e += f - d;
                        e += c - e % c;
                        d = f + 1
                    }
                }
                function O(a, b) {
                    for (var c = 0; c < a.length; ++c)
                        if (a[c] == b)
                            return c;
                    return -1
                }
                function $a(a, b, c) {
                    for (var d = 0, e = 0; ; ) {
                        var f = a.indexOf("\t", d);
                        -1 == f && (f = a.length);
                        var g = f - d;
                        if (f == a.length || e + g >= b)
                            return d + Math.min(g, b - e);
                        e += f - d;
                        e += c - e % c;
                        d = f + 1;
                        if (e >= b)
                            return d
                    }
                }
                function Qc(a) {
                    for (; gc.length <= a; )
                        gc.push(y(gc) + " ");
                    return gc[a]
                }
                function y(a) {
                    return a[a.length - 1]
                }
                function hc(a, b) {
                    for (var c = [], d = 0; d < a.length; d++)
                        c[d] = b(a[d], d);
                    return c
                }
                function eg(a, b, c) {
                    for (var d = 0, e = c(b); d < a.length && c(a[d]) <= e; )
                        d++;
                    a.splice(d, 0, b)
                }
                function Wd() {}
                function Xd(a, b) {
                    Object.create ? a = Object.create(a) : (Wd.prototype = a,
                    a = new Wd);
                    b && C(b, a);
                    return a
                }
                function Rc(a) {
                    return /\w/.test(a) || "\u0080" < a && (a.toUpperCase() != a.toLowerCase() || fg.test(a))
                }
                function ya(a, b) {
                    return b ? -1 < b.source.indexOf("\\w") && Rc(a) ? !0 : b.test(a) : Rc(a)
                }
                function Yd(a) {
                    for (var b in a)
                        if (a.hasOwnProperty(b) && a[b])
                            return !1;
                    return !0
                }
                function Sc(a) {
                    return 768 <= a.charCodeAt(0) && gg.test(a)
                }
                function Zd(a, b, c) {
                    for (; (0 > c ? 0 < b : b < a.length) && Sc(a.charAt(b)); )
                        b += c;
                    return b
                }
                function ub(a, b, c) {
                    for (var d = b > c ? -1 : 1; ; ) {
                        if (b == c)
                            return b;
                        var e = (b + c) / 2;
                        e = 0 > d ? Math.ceil(e) : Math.floor(e);
                        if (e == b)
                            return a(e) ? b : c;
                        a(e) ? c = e : b = e + d
                    }
                }
                function hg(a, b, c, d) {
                    if (!a)
                        return d(b, c, "ltr", 0);
                    for (var e = !1, f = 0; f < a.length; ++f) {
                        var g = a[f];
                        if (g.from < c && g.to > b || b == c && g.to == b)
                            d(Math.max(g.from, b), Math.min(g.to, c), 1 == g.level ? "rtl" : "ltr", f),
                            e = !0
                    }
                    e || d(b, c, "ltr")
                }
                function vb(a, b, c) {
                    var d;
                    wb = null;
                    for (var e = 0; e < a.length; ++e) {
                        var f = a[e];
                        if (f.from < b && f.to > b)
                            return e;
                        f.to == b && (f.from != f.to && "before" == c ? d = e : wb = e);
                        f.from == b && (f.from != f.to && "before" != c ? d = e : wb = e)
                    }
                    return null != d ? d : wb
                }
                function za(a, b) {
                    var c = a.order;
                    null == c && (c = a.order = ig(a.text, b));
                    return c
                }
                function ia(a, b, c) {
                    if (a.removeEventListener)
                        a.removeEventListener(b, c, !1);
                    else if (a.detachEvent)
                        a.detachEvent("on" + b, c);
                    else {
                        var d = (a = a._handlers) && a[b];
                        d && (c = O(d, c),
                        -1 < c && (a[b] = d.slice(0, c).concat(d.slice(c + 1))))
                    }
                }
                function R(a, b) {
                    var c = a._handlers && a._handlers[b] || ic;
                    if (c.length)
                        for (var d = Array.prototype.slice.call(arguments, 2), e = 0; e < c.length; ++e)
                            c[e].apply(null, d)
                }
                function T(a, b, c) {
                    "string" == typeof b && (b = {
                        type: b,
                        preventDefault: function() {
                            this.defaultPrevented = !0
                        }
                    });
                    R(a, c || b.type, a, b);
                    return Tc(b) || b.codemirrorIgnore
                }
                function $d(a) {
                    var b = a._handlers && a._handlers.cursorActivity;
                    if (b) {
                        a = a.curOp.cursorActivityHandlers || (a.curOp.cursorActivityHandlers = []);
                        for (var c = 0; c < b.length; ++c)
                            -1 == O(a, b[c]) && a.push(b[c])
                    }
                }
                function la(a, b) {
                    return 0 < (a._handlers && a._handlers[b] || ic).length
                }
                function ab(a) {
                    a.prototype.on = function(a, c) {
                        z(this, a, c)
                    }
                    ;
                    a.prototype.off = function(a, c) {
                        ia(this, a, c)
                    }
                }
                function aa(a) {
                    a.preventDefault ? a.preventDefault() : a.returnValue = !1
                }
                function ae(a) {
                    a.stopPropagation ? a.stopPropagation() : a.cancelBubble = !0
                }
                function Tc(a) {
                    return null != a.defaultPrevented ? a.defaultPrevented : 0 == a.returnValue
                }
                function xb(a) {
                    aa(a);
                    ae(a)
                }
                function be(a) {
                    var b = a.which;
                    null == b && (a.button & 1 ? b = 1 : a.button & 2 ? b = 3 : a.button & 4 && (b = 2));
                    ma && a.ctrlKey && 1 == b && (b = 3);
                    return b
                }
                function jg(a) {
                    if (null == Uc) {
                        var b = p("span", "\u200b");
                        D(a, p("span", [b, document.createTextNode("x")]));
                        0 != a.firstChild.offsetHeight && (Uc = 1 >= b.offsetWidth && 2 < b.offsetHeight && !(H && 8 > M))
                    }
                    a = Uc ? p("span", "\u200b") : p("span", "\u00a0", null, "display: inline-block; width: 1px; margin-right: -1px");
                    a.setAttribute("cm-text", "");
                    return a
                }
                function kg(a, b) {
                    2 < arguments.length && (b.dependencies = Array.prototype.slice.call(arguments, 2));
                    Vc[a] = b
                }
                function jc(a) {
                    if ("string" == typeof a && bb.hasOwnProperty(a))
                        a = bb[a];
                    else if (a && "string" == typeof a.name && bb.hasOwnProperty(a.name)) {
                        var b = bb[a.name];
                        "string" == typeof b && (b = {
                            name: b
                        });
                        a = Xd(b, a);
                        a.name = b.name
                    } else {
                        if ("string" == typeof a && /^[\w\-]+\/[\w\-]+\+xml$/.test(a))
                            return jc("application/xml");
                        if ("string" == typeof a && /^[\w\-]+\/[\w\-]+\+json$/.test(a))
                            return jc("application/json")
                    }
                    return "string" == typeof a ? {
                        name: a
                    } : a || {
                        name: "null"
                    }
                }
                function Wc(a, b) {
                    b = jc(b);
                    var c = Vc[b.name];
                    if (!c)
                        return Wc(a, "text/plain");
                    a = c(a, b);
                    if (cb.hasOwnProperty(b.name)) {
                        c = cb[b.name];
                        for (var d in c)
                            c.hasOwnProperty(d) && (a.hasOwnProperty(d) && (a["_" + d] = a[d]),
                            a[d] = c[d])
                    }
                    a.name = b.name;
                    b.helperType && (a.helperType = b.helperType);
                    if (b.modeProps)
                        for (var e in b.modeProps)
                            a[e] = b.modeProps[e];
                    return a
                }
                function lg(a, b) {
                    a = cb.hasOwnProperty(a) ? cb[a] : cb[a] = {};
                    C(b, a)
                }
                function Ma(a, b) {
                    if (!0 === b)
                        return b;
                    if (a.copyState)
                        return a.copyState(b);
                    a = {};
                    for (var c in b) {
                        var d = b[c];
                        d instanceof Array && (d = d.concat([]));
                        a[c] = d
                    }
                    return a
                }
                function Xc(a, b) {
                    for (var c; a.innerMode; ) {
                        c = a.innerMode(b);
                        if (!c || c.mode == a)
                            break;
                        b = c.state;
                        a = c.mode
                    }
                    return c || {
                        mode: a,
                        state: b
                    }
                }
                function ce(a, b, c) {
                    return a.startState ? a.startState(b, c) : !0
                }
                function u(a, b) {
                    b -= a.first;
                    if (0 > b || b >= a.size)
                        throw Error("There is no line " + (b + a.first) + " in the document.");
                    for (; !a.lines; )
                        for (var c = 0; ; ++c) {
                            var d = a.children[c]
                              , e = d.chunkSize();
                            if (b < e) {
                                a = d;
                                break
                            }
                            b -= e
                        }
                    return a.lines[b]
                }
                function Na(a, b, c) {
                    var d = []
                      , e = b.line;
                    a.iter(b.line, c.line + 1, function(a) {
                        a = a.text;
                        e == c.line && (a = a.slice(0, c.ch));
                        e == b.line && (a = a.slice(b.ch));
                        d.push(a);
                        ++e
                    });
                    return d
                }
                function Yc(a, b, c) {
                    var d = [];
                    a.iter(b, c, function(a) {
                        d.push(a.text)
                    });
                    return d
                }
                function sa(a, b) {
                    if (b -= a.height)
                        for (; a; a = a.parent)
                            a.height += b
                }
                function J(a) {
                    if (null == a.parent)
                        return null;
                    var b = a.parent;
                    a = O(b.lines, a);
                    for (var c = b.parent; c; b = c,
                    c = c.parent)
                        for (var d = 0; c.children[d] != b; ++d)
                            a += c.children[d].chunkSize();
                    return a + b.first
                }
                function Oa(a, b) {
                    var c = a.first;
                    a: do {
                        for (var d = 0; d < a.children.length; ++d) {
                            var e = a.children[d]
                              , f = e.height;
                            if (b < f) {
                                a = e;
                                continue a
                            }
                            b -= f;
                            c += e.chunkSize()
                        }
                        return c
                    } while (!a.lines);
                    for (d = 0; d < a.lines.length; ++d) {
                        e = a.lines[d].height;
                        if (b < e)
                            break;
                        b -= e
                    }
                    return c + d
                }
                function yb(a, b) {
                    return b >= a.first && b < a.first + a.size
                }
                function Zc(a, b) {
                    return String(a.lineNumberFormatter(b + a.firstLineNumber))
                }
                function r(a, b, c) {
                    void 0 === c && (c = null);
                    if (!(this instanceof r))
                        return new r(a,b,c);
                    this.line = a;
                    this.ch = b;
                    this.sticky = c
                }
                function A(a, b) {
                    return a.line - b.line || a.ch - b.ch
                }
                function $c(a, b) {
                    return a.sticky == b.sticky && 0 == A(a, b)
                }
                function ad(a) {
                    return r(a.line, a.ch)
                }
                function kc(a, b) {
                    return 0 > A(a, b) ? b : a
                }
                function lc(a, b) {
                    return 0 > A(a, b) ? a : b
                }
                function B(a, b) {
                    if (b.line < a.first)
                        return r(a.first, 0);
                    var c = a.first + a.size - 1;
                    if (b.line > c)
                        return r(c, u(a, c).text.length);
                    a = u(a, b.line).text.length;
                    c = b.ch;
                    b = null == c || c > a ? r(b.line, a) : 0 > c ? r(b.line, 0) : b;
                    return b
                }
                function de(a, b) {
                    for (var c = [], d = 0; d < b.length; d++)
                        c[d] = B(a, b[d]);
                    return c
                }
                function ee(a, b, c, d) {
                    var e = [a.state.modeGen]
                      , f = {};
                    fe(a, b.text, a.doc.mode, c, function(a, b) {
                        return e.push(a, b)
                    }, f, d);
                    var g = c.state;
                    d = function(d) {
                        c.baseTokens = e;
                        var h = a.state.overlays[d]
                          , k = 1
                          , q = 0;
                        c.state = !0;
                        fe(a, b.text, h.mode, c, function(a, b) {
                            for (var d = k; q < a; ) {
                                var c = e[k];
                                c > a && e.splice(k, 1, a, e[k + 1], c);
                                k += 2;
                                q = Math.min(a, c)
                            }
                            if (b)
                                if (h.opaque)
                                    e.splice(d, k - d, a, "overlay " + b),
                                    k = d + 2;
                                else
                                    for (; d < k; d += 2)
                                        a = e[d + 1],
                                        e[d + 1] = (a ? a + " " : "") + "overlay " + b
                        }, f);
                        c.state = g;
                        c.baseTokens = null;
                        c.baseTokenPos = 1
                    }
                    ;
                    for (var h = 0; h < a.state.overlays.length; ++h)
                        d(h);
                    return {
                        styles: e,
                        classes: f.bgClass || f.textClass ? f : null
                    }
                }
                function ge(a, b, c) {
                    if (!b.styles || b.styles[0] != a.state.modeGen) {
                        var d = zb(a, J(b))
                          , e = b.text.length > a.options.maxHighlightLength && Ma(a.doc.mode, d.state)
                          , f = ee(a, b, d);
                        e && (d.state = e);
                        b.stateAfter = d.save(!e);
                        b.styles = f.styles;
                        f.classes ? b.styleClasses = f.classes : b.styleClasses && (b.styleClasses = null);
                        c === a.doc.highlightFrontier && (a.doc.modeFrontier = Math.max(a.doc.modeFrontier, ++a.doc.highlightFrontier))
                    }
                    return b.styles
                }
                function zb(a, b, c) {
                    var d = a.doc
                      , e = a.display;
                    if (!d.mode.startState)
                        return new ta(d,!0,b);
                    var f = mg(a, b, c)
                      , g = f > d.first && u(d, f - 1).stateAfter
                      , h = g ? ta.fromSaved(d, g, f) : new ta(d,ce(d.mode),f);
                    d.iter(f, b, function(d) {
                        bd(a, d.text, h);
                        var c = h.line;
                        d.stateAfter = c == b - 1 || 0 == c % 5 || c >= e.viewFrom && c < e.viewTo ? h.save() : null;
                        h.nextLine()
                    });
                    c && (d.modeFrontier = h.line);
                    return h
                }
                function bd(a, b, c, d) {
                    var e = a.doc.mode;
                    a = new S(b,a.options.tabSize,c);
                    a.start = a.pos = d || 0;
                    for ("" == b && he(e, c.state); !a.eol(); )
                        cd(e, a, c.state),
                        a.start = a.pos
                }
                function he(a, b) {
                    if (a.blankLine)
                        return a.blankLine(b);
                    if (a.innerMode && (a = Xc(a, b),
                    a.mode.blankLine))
                        return a.mode.blankLine(a.state)
                }
                function cd(a, b, c, d) {
                    for (var e = 0; 10 > e; e++) {
                        d && (d[0] = Xc(a, c).mode);
                        var f = a.token(b, c);
                        if (b.pos > b.start)
                            return f
                    }
                    throw Error("Mode " + a.name + " failed to advance stream.");
                }
                function ie(a, b, c, d) {
                    var e = a.doc
                      , f = e.mode;
                    b = B(e, b);
                    var g = u(e, b.line);
                    c = zb(a, b.line, c);
                    a = new S(g.text,a.options.tabSize,c);
                    var h;
                    for (d && (h = []); (d || a.pos < b.ch) && !a.eol(); ) {
                        a.start = a.pos;
                        var k = cd(f, a, c.state);
                        d && h.push(new je(a,k,Ma(e.mode, c.state)))
                    }
                    return d ? h : new je(a,k,c.state)
                }
                function ke(a, b) {
                    if (a)
                        for (; ; ) {
                            var c = a.match(/(?:^|\s+)line-(background-)?(\S+)/);
                            if (!c)
                                break;
                            a = a.slice(0, c.index) + a.slice(c.index + c[0].length);
                            var d = c[1] ? "bgClass" : "textClass";
                            null == b[d] ? b[d] = c[2] : (new RegExp("(?:^|\\s)" + c[2] + "(?:$|\\s)")).test(b[d]) || (b[d] += " " + c[2])
                        }
                    return a
                }
                function fe(a, b, c, d, e, f, g) {
                    var h = c.flattenSpans;
                    null == h && (h = a.options.flattenSpans);
                    var k = 0
                      , l = null
                      , m = new S(b,a.options.tabSize,d)
                      , q = a.options.addModeClass && [null];
                    for ("" == b && ke(he(c, d.state), f); !m.eol(); ) {
                        if (m.pos > a.options.maxHighlightLength) {
                            h = !1;
                            g && bd(a, b, d, m.pos);
                            m.pos = b.length;
                            var n = null
                        } else
                            n = ke(cd(c, m, d.state, q), f);
                        if (q) {
                            var t = q[0].name;
                            t && (n = "m-" + (n ? t + " " + n : t))
                        }
                        if (!h || l != n) {
                            for (; k < m.start; )
                                k = Math.min(m.start, k + 5E3),
                                e(k, l);
                            l = n
                        }
                        m.start = m.pos
                    }
                    for (; k < m.pos; )
                        a = Math.min(m.pos, k + 5E3),
                        e(a, l),
                        k = a
                }
                function mg(a, b, c) {
                    for (var d, e, f = a.doc, g = c ? -1 : b - (a.doc.mode.innerMode ? 1E3 : 100); b > g; --b) {
                        if (b <= f.first)
                            return f.first;
                        var h = u(f, b - 1)
                          , k = h.stateAfter;
                        if (k && (!c || b + (k instanceof mc ? k.lookAhead : 0) <= f.modeFrontier))
                            return b;
                        h = F(h.text, null, a.options.tabSize);
                        if (null == e || d > h)
                            e = b - 1,
                            d = h
                    }
                    return e
                }
                function ng(a, b) {
                    a.modeFrontier = Math.min(a.modeFrontier, b);
                    if (!(a.highlightFrontier < b - 10)) {
                        for (var c = a.first, d = b - 1; d > c; d--) {
                            var e = u(a, d).stateAfter;
                            if (e && (!(e instanceof mc) || d + e.lookAhead < b)) {
                                c = d + 1;
                                break
                            }
                        }
                        a.highlightFrontier = Math.min(a.highlightFrontier, c)
                    }
                }
                function nc(a, b, c) {
                    this.marker = a;
                    this.from = b;
                    this.to = c
                }
                function Ab(a, b) {
                    if (a)
                        for (var c = 0; c < a.length; ++c) {
                            var d = a[c];
                            if (d.marker == b)
                                return d
                        }
                }
                function dd(a, b) {
                    if (b.full)
                        return null;
                    var c = yb(a, b.from.line) && u(a, b.from.line).markedSpans
                      , d = yb(a, b.to.line) && u(a, b.to.line).markedSpans;
                    if (!c && !d)
                        return null;
                    a = b.from.ch;
                    var e = b.to.ch, f = 0 == A(b.from, b.to), g;
                    if (c)
                        for (var h = 0; h < c.length; ++h) {
                            var k = c[h]
                              , l = k.marker;
                            if (null == k.from || (l.inclusiveLeft ? k.from <= a : k.from < a) || !(k.from != a || "bookmark" != l.type || f && k.marker.insertLeft)) {
                                var m = null == k.to || (l.inclusiveRight ? k.to >= a : k.to > a);
                                (g || (g = [])).push(new nc(l,k.from,m ? null : k.to))
                            }
                        }
                    c = g;
                    var q;
                    if (d)
                        for (g = 0; g < d.length; ++g)
                            if (h = d[g],
                            k = h.marker,
                            null == h.to || (k.inclusiveRight ? h.to >= e : h.to > e) || h.from == e && "bookmark" == k.type && (!f || h.marker.insertLeft))
                                l = null == h.from || (k.inclusiveLeft ? h.from <= e : h.from < e),
                                (q || (q = [])).push(new nc(k,l ? null : h.from - e,null == h.to ? null : h.to - e));
                    d = 1 == b.text.length;
                    e = y(b.text).length + (d ? a : 0);
                    if (c)
                        for (f = 0; f < c.length; ++f)
                            if (g = c[f],
                            null == g.to)
                                (h = Ab(q, g.marker),
                                h) ? d && (g.to = null == h.to ? null : h.to + e) : g.to = a;
                    if (q)
                        for (a = 0; a < q.length; ++a)
                            f = q[a],
                            null != f.to && (f.to += e),
                            null == f.from ? Ab(c, f.marker) || (f.from = e,
                            d && (c || (c = [])).push(f)) : (f.from += e,
                            d && (c || (c = [])).push(f));
                    c && (c = le(c));
                    q && q != c && (q = le(q));
                    a = [c];
                    if (!d) {
                        b = b.text.length - 2;
                        var n;
                        if (0 < b && c)
                            for (d = 0; d < c.length; ++d)
                                null == c[d].to && (n || (n = [])).push(new nc(c[d].marker,null,null));
                        for (c = 0; c < b; ++c)
                            a.push(n);
                        a.push(q)
                    }
                    return a
                }
                function le(a) {
                    for (var b = 0; b < a.length; ++b) {
                        var c = a[b];
                        null != c.from && c.from == c.to && !1 !== c.marker.clearWhenEmpty && a.splice(b--, 1)
                    }
                    return a.length ? a : null
                }
                function og(a, b, c) {
                    var d = null;
                    a.iter(b.line, c.line + 1, function(a) {
                        if (a.markedSpans)
                            for (var b = 0; b < a.markedSpans.length; ++b) {
                                var c = a.markedSpans[b].marker;
                                !c.readOnly || d && -1 != O(d, c) || (d || (d = [])).push(c)
                            }
                    });
                    if (!d)
                        return null;
                    a = [{
                        from: b,
                        to: c
                    }];
                    for (b = 0; b < d.length; ++b) {
                        c = d[b];
                        for (var e = c.find(0), f = 0; f < a.length; ++f) {
                            var g = a[f];
                            if (!(0 > A(g.to, e.from) || 0 < A(g.from, e.to))) {
                                var h = [f, 1]
                                  , k = A(g.from, e.from)
                                  , l = A(g.to, e.to);
                                (0 > k || !c.inclusiveLeft && !k) && h.push({
                                    from: g.from,
                                    to: e.from
                                });
                                (0 < l || !c.inclusiveRight && !l) && h.push({
                                    from: e.to,
                                    to: g.to
                                });
                                a.splice.apply(a, h);
                                f += h.length - 3
                            }
                        }
                    }
                    return a
                }
                function me(a) {
                    var b = a.markedSpans;
                    if (b) {
                        for (var c = 0; c < b.length; ++c)
                            b[c].marker.detachLine(a);
                        a.markedSpans = null
                    }
                }
                function ne(a, b) {
                    if (b) {
                        for (var c = 0; c < b.length; ++c)
                            b[c].marker.attachLine(a);
                        a.markedSpans = b
                    }
                }
                function ed(a, b) {
                    var c = a.lines.length - b.lines.length;
                    if (0 != c)
                        return c;
                    c = a.find();
                    var d = b.find()
                      , e = A(c.from, d.from) || (a.inclusiveLeft ? -1 : 0) - (b.inclusiveLeft ? -1 : 0);
                    return e ? -e : (c = A(c.to, d.to) || (a.inclusiveRight ? 1 : 0) - (b.inclusiveRight ? 1 : 0)) ? c : b.id - a.id
                }
                function db(a, b) {
                    a = Aa && a.markedSpans;
                    if (a)
                        for (var c, d = 0; d < a.length; ++d)
                            if (c = a[d],
                            c.marker.collapsed && null == (b ? c.from : c.to) && (!e || 0 > ed(e, c.marker)))
                                var e = c.marker;
                    return e
                }
                function oe(a, b, c, d, e) {
                    a = u(a, b);
                    if (a = Aa && a.markedSpans)
                        for (b = 0; b < a.length; ++b) {
                            var f = a[b];
                            if (f.marker.collapsed) {
                                var g = f.marker.find(0)
                                  , h = A(g.from, c) || (f.marker.inclusiveLeft ? -1 : 0) - (e.inclusiveLeft ? -1 : 0)
                                  , k = A(g.to, d) || (f.marker.inclusiveRight ? 1 : 0) - (e.inclusiveRight ? 1 : 0);
                                if (!(0 <= h && 0 >= k || 0 >= h && 0 <= k) && (0 >= h && (f.marker.inclusiveRight && e.inclusiveLeft ? 0 <= A(g.to, c) : 0 < A(g.to, c)) || 0 <= h && (f.marker.inclusiveRight && e.inclusiveLeft ? 0 >= A(g.from, d) : 0 > A(g.from, d))))
                                    return !0
                            }
                        }
                }
                function ua(a) {
                    for (var b; b = db(a, !0); )
                        a = b.find(-1, !0).line;
                    return a
                }
                function fd(a, b) {
                    a = u(a, b);
                    var c = ua(a);
                    return a == c ? b : J(c)
                }
                function pe(a, b) {
                    if (b > a.lastLine())
                        return b;
                    var c = u(a, b);
                    if (!Ea(a, c))
                        return b;
                    for (; a = db(c, !1); )
                        c = a.find(1, !0).line;
                    return J(c) + 1
                }
                function Ea(a, b) {
                    var c = Aa && b.markedSpans;
                    if (c)
                        for (var d, e = 0; e < c.length; ++e)
                            if (d = c[e],
                            d.marker.collapsed && (null == d.from || !d.marker.widgetNode && 0 == d.from && d.marker.inclusiveLeft && gd(a, b, d)))
                                return !0
                }
                function gd(a, b, c) {
                    if (null == c.to)
                        return b = c.marker.find(1, !0),
                        gd(a, b.line, Ab(b.line.markedSpans, c.marker));
                    if (c.marker.inclusiveRight && c.to == b.text.length)
                        return !0;
                    for (var d, e = 0; e < b.markedSpans.length; ++e)
                        if (d = b.markedSpans[e],
                        d.marker.collapsed && !d.marker.widgetNode && d.from == c.to && (null == d.to || d.to != c.from) && (d.marker.inclusiveLeft || c.marker.inclusiveRight) && gd(a, b, d))
                            return !0
                }
                function va(a) {
                    a = ua(a);
                    for (var b = 0, c = a.parent, d = 0; d < c.lines.length; ++d) {
                        var e = c.lines[d];
                        if (e == a)
                            break;
                        else
                            b += e.height
                    }
                    for (a = c.parent; a; c = a,
                    a = c.parent)
                        for (d = 0; d < a.children.length && (e = a.children[d],
                        e != c); ++d)
                            b += e.height;
                    return b
                }
                function oc(a) {
                    if (0 == a.height)
                        return 0;
                    for (var b = a.text.length, c, d = a; c = db(d, !0); )
                        c = c.find(0, !0),
                        d = c.from.line,
                        b += c.from.ch - c.to.ch;
                    for (d = a; c = db(d, !1); )
                        a = c.find(0, !0),
                        b -= d.text.length - a.from.ch,
                        d = a.to.line,
                        b += d.text.length - a.to.ch;
                    return b
                }
                function hd(a) {
                    var b = a.display;
                    a = a.doc;
                    b.maxLine = u(a, a.first);
                    b.maxLineLength = oc(b.maxLine);
                    b.maxLineChanged = !0;
                    a.iter(function(a) {
                        var d = oc(a);
                        d > b.maxLineLength && (b.maxLineLength = d,
                        b.maxLine = a)
                    })
                }
                function qe(a, b) {
                    if (!a || /^\s*$/.test(a))
                        return null;
                    b = b.addModeClass ? pg : qg;
                    return b[a] || (b[a] = a.replace(/\S+/g, "cm-$&"))
                }
                function re(a, b) {
                    var c = E("span", null, null, Y ? "padding-right: .1px" : null);
                    c = {
                        pre: E("pre", [c], "CodeMirror-line"),
                        content: c,
                        col: 0,
                        pos: 0,
                        cm: a,
                        trailingSpace: !1,
                        splitSpaces: a.getOption("lineWrapping")
                    };
                    b.measure = {};
                    for (var d = 0; d <= (b.rest ? b.rest.length : 0); d++) {
                        var e = d ? b.rest[d - 1] : b.line
                          , f = void 0;
                        c.pos = 0;
                        c.addToken = rg;
                        var g = a.display.measure;
                        if (null != id)
                            g = id;
                        else {
                            var h = D(g, document.createTextNode("A\u062eA"))
                              , k = Bb(h, 0, 1).getBoundingClientRect();
                            h = Bb(h, 1, 2).getBoundingClientRect();
                            G(g);
                            g = k && k.left != k.right ? id = 3 > h.right - k.right : !1
                        }
                        g && (f = za(e, a.doc.direction)) && (c.addToken = sg(c.addToken, f));
                        c.map = [];
                        var l = b != a.display.externalMeasured && J(e);
                        a: {
                            var m = h = k = g = void 0
                              , q = void 0
                              , n = void 0
                              , t = void 0;
                            f = c;
                            l = ge(a, e, l);
                            var P = e.markedSpans
                              , r = e.text
                              , p = 0;
                            if (P)
                                for (var w = r.length, u = 0, v = 1, F = "", z = 0; ; ) {
                                    if (z == u) {
                                        q = m = h = n = "";
                                        k = g = null;
                                        z = Infinity;
                                        for (var x = [], A = void 0, B = 0; B < P.length; ++B) {
                                            var y = P[B]
                                              , C = y.marker;
                                            if ("bookmark" == C.type && y.from == u && C.widgetNode)
                                                x.push(C);
                                            else if (y.from <= u && (null == y.to || y.to > u || C.collapsed && y.to == u && y.from == u)) {
                                                null != y.to && y.to != u && z > y.to && (z = y.to,
                                                m = "");
                                                C.className && (q += " " + C.className);
                                                C.css && (n = (n ? n + ";" : "") + C.css);
                                                C.startStyle && y.from == u && (h += " " + C.startStyle);
                                                C.endStyle && y.to == z && (A || (A = [])).push(C.endStyle, y.to);
                                                C.title && ((g || (g = {})).title = C.title);
                                                if (C.attributes)
                                                    for (var L in C.attributes)
                                                        (g || (g = {}))[L] = C.attributes[L];
                                                C.collapsed && (!k || 0 > ed(k.marker, C)) && (k = y)
                                            } else
                                                y.from > u && z > y.from && (z = y.from)
                                        }
                                        if (A)
                                            for (B = 0; B < A.length; B += 2)
                                                A[B + 1] == z && (m += " " + A[B]);
                                        if (!k || k.from == u)
                                            for (A = 0; A < x.length; ++A)
                                                se(f, 0, x[A]);
                                        if (k && (k.from || 0) == u) {
                                            se(f, (null == k.to ? w + 1 : k.to) - u, k.marker, null == k.from);
                                            if (null == k.to)
                                                break a;
                                            k.to == u && (k = !1)
                                        }
                                    }
                                    if (u >= w)
                                        break;
                                    for (x = Math.min(w, z); ; ) {
                                        if (F) {
                                            A = u + F.length;
                                            k || (B = A > x ? F.slice(0, x - u) : F,
                                            f.addToken(f, B, t ? t + q : q, h, u + B.length == z ? m : "", n, g));
                                            if (A >= x) {
                                                F = F.slice(x - u);
                                                u = x;
                                                break
                                            }
                                            u = A;
                                            h = ""
                                        }
                                        F = r.slice(p, p = l[v++]);
                                        t = qe(l[v++], f.cm.options)
                                    }
                                }
                            else
                                for (g = 1; g < l.length; g += 2)
                                    f.addToken(f, r.slice(p, p = l[g]), qe(l[g + 1], f.cm.options))
                        }
                        e.styleClasses && (e.styleClasses.bgClass && (c.bgClass = ra(e.styleClasses.bgClass, c.bgClass || "")),
                        e.styleClasses.textClass && (c.textClass = ra(e.styleClasses.textClass, c.textClass || "")));
                        0 == c.map.length && c.map.push(0, 0, c.content.appendChild(jg(a.display.measure)));
                        0 == d ? (b.measure.map = c.map,
                        b.measure.cache = {}) : ((b.measure.maps || (b.measure.maps = [])).push(c.map),
                        (b.measure.caches || (b.measure.caches = [])).push({}))
                    }
                    Y && (L = c.content.lastChild,
                    /\bcm-tab\b/.test(L.className) || L.querySelector && L.querySelector(".cm-tab")) && (c.content.className = "cm-tab-wrap-hack");
                    R(a, "renderLine", a, b.line, c.pre);
                    c.pre.className && (c.textClass = ra(c.pre.className, c.textClass || ""));
                    return c
                }
                function tg(a) {
                    var b = p("span", "\u2022", "cm-invalidchar");
                    b.title = "\\u" + a.charCodeAt(0).toString(16);
                    b.setAttribute("aria-label", b.title);
                    return b
                }
                function rg(a, b, c, d, e, f, g) {
                    if (b) {
                        if (a.splitSpaces) {
                            var h = a.trailingSpace;
                            if (1 < b.length && !/  /.test(b))
                                h = b;
                            else {
                                for (var k = "", l = 0; l < b.length; l++) {
                                    var m = b.charAt(l);
                                    " " != m || !h || l != b.length - 1 && 32 != b.charCodeAt(l + 1) || (m = "\u00a0");
                                    k += m;
                                    h = " " == m
                                }
                                h = k
                            }
                        } else
                            h = b;
                        k = h;
                        l = a.cm.state.specialChars;
                        m = !1;
                        if (l.test(b)) {
                            h = document.createDocumentFragment();
                            for (var q = 0; ; ) {
                                l.lastIndex = q;
                                var n = l.exec(b)
                                  , t = n ? n.index - q : b.length - q;
                                if (t) {
                                    var P = document.createTextNode(k.slice(q, q + t));
                                    H && 9 > M ? h.appendChild(p("span", [P])) : h.appendChild(P);
                                    a.map.push(a.pos, a.pos + t, P);
                                    a.col += t;
                                    a.pos += t
                                }
                                if (!n)
                                    break;
                                q += t + 1;
                                "\t" == n[0] ? (n = a.cm.options.tabSize,
                                n -= a.col % n,
                                t = h.appendChild(p("span", Qc(n), "cm-tab")),
                                t.setAttribute("role", "presentation"),
                                t.setAttribute("cm-text", "\t"),
                                a.col += n) : ("\r" == n[0] || "\n" == n[0] ? (t = h.appendChild(p("span", "\r" == n[0] ? "\u240d" : "\u2424", "cm-invalidchar")),
                                t.setAttribute("cm-text", n[0])) : (t = a.cm.options.specialCharPlaceholder(n[0]),
                                t.setAttribute("cm-text", n[0]),
                                H && 9 > M ? h.appendChild(p("span", [t])) : h.appendChild(t)),
                                a.col += 1);
                                a.map.push(a.pos, a.pos + 1, t);
                                a.pos++
                            }
                        } else
                            a.col += b.length,
                            h = document.createTextNode(k),
                            a.map.push(a.pos, a.pos + b.length, h),
                            H && 9 > M && (m = !0),
                            a.pos += b.length;
                        a.trailingSpace = 32 == k.charCodeAt(b.length - 1);
                        if (c || d || e || m || f || g) {
                            b = c || "";
                            d && (b += d);
                            e && (b += e);
                            d = p("span", [h], b, f);
                            if (g)
                                for (var r in g)
                                    g.hasOwnProperty(r) && "style" != r && "class" != r && d.setAttribute(r, g[r]);
                            return a.content.appendChild(d)
                        }
                        a.content.appendChild(h)
                    }
                }
                function sg(a, b) {
                    return function(c, d, e, f, g, h, k) {
                        e = e ? e + " cm-force-border" : "cm-force-border";
                        for (var l = c.pos, m = l + d.length; ; ) {
                            for (var q = void 0, n = 0; n < b.length && !(q = b[n],
                            q.to > l && q.from <= l); n++)
                                ;
                            if (q.to >= m)
                                return a(c, d, e, f, g, h, k);
                            a(c, d.slice(0, q.to - l), e, f, null, h, k);
                            f = null;
                            d = d.slice(q.to - l);
                            l = q.to
                        }
                    }
                }
                function se(a, b, c, d) {
                    var e = !d && c.widgetNode;
                    e && a.map.push(a.pos, a.pos + b, e);
                    !d && a.cm.display.input.needsContentAttribute && (e || (e = a.content.appendChild(document.createElement("span"))),
                    e.setAttribute("cm-marker", c.id));
                    e && (a.cm.display.input.setUneditable(e),
                    a.content.appendChild(e));
                    a.pos += b;
                    a.trailingSpace = !1
                }
                function te(a, b, c) {
                    for (var d = this.line = b, e; d = db(d, !1); )
                        d = d.find(1, !0).line,
                        (e || (e = [])).push(d);
                    this.size = (this.rest = e) ? J(y(this.rest)) - c + 1 : 1;
                    this.node = this.text = null;
                    this.hidden = Ea(a, b)
                }
                function pc(a, b, c) {
                    var d = [], e;
                    for (e = b; e < c; )
                        b = new te(a.doc,u(a.doc, e),e),
                        e += b.size,
                        d.push(b);
                    return d
                }
                function ug(a, b) {
                    if (a = a.ownsGroup)
                        try {
                            var c = a.delayedCallbacks
                              , d = 0;
                            do {
                                for (; d < c.length; d++)
                                    c[d].call(null);
                                for (var e = 0; e < a.ops.length; e++) {
                                    var f = a.ops[e];
                                    if (f.cursorActivityHandlers)
                                        for (; f.cursorActivityCalled < f.cursorActivityHandlers.length; )
                                            f.cursorActivityHandlers[f.cursorActivityCalled++].call(null, f.cm)
                                }
                            } while (d < c.length)
                        } finally {
                            eb = null,
                            b(a)
                        }
                }
                function W(a, b) {
                    var c = a._handlers && a._handlers[b] || ic;
                    if (c.length) {
                        var d = Array.prototype.slice.call(arguments, 2);
                        if (eb)
                            var e = eb.delayedCallbacks;
                        else
                            Cb ? e = Cb : (e = Cb = [],
                            setTimeout(vg, 0));
                        for (var f = function(a) {
                            e.push(function() {
                                return c[a].apply(null, d)
                            })
                        }, g = 0; g < c.length; ++g)
                            f(g)
                    }
                }
                function vg() {
                    var a = Cb;
                    Cb = null;
                    for (var b = 0; b < a.length; ++b)
                        a[b]()
                }
                function ue(a, b, c, d) {
                    for (var e = 0; e < b.changes.length; e++) {
                        var f = b.changes[e];
                        if ("text" == f) {
                            f = a;
                            var g = b
                              , h = g.text.className
                              , k = ve(f, g);
                            g.text == g.node && (g.node = k.pre);
                            g.text.parentNode.replaceChild(k.pre, g.text);
                            g.text = k.pre;
                            k.bgClass != g.bgClass || k.textClass != g.textClass ? (g.bgClass = k.bgClass,
                            g.textClass = k.textClass,
                            jd(f, g)) : h && (g.text.className = h)
                        } else if ("gutter" == f)
                            we(a, b, c, d);
                        else if ("class" == f)
                            jd(a, b);
                        else if ("widget" == f) {
                            f = a;
                            g = b;
                            h = d;
                            g.alignable && (g.alignable = null);
                            k = v("CodeMirror-linewidget");
                            for (var l = g.node.firstChild, m; l; l = m)
                                m = l.nextSibling,
                                k.test(l.className) && g.node.removeChild(l);
                            xe(f, g, h)
                        }
                    }
                    b.changes = null
                }
                function Db(a) {
                    a.node == a.text && (a.node = p("div", null, null, "position: relative"),
                    a.text.parentNode && a.text.parentNode.replaceChild(a.node, a.text),
                    a.node.appendChild(a.text),
                    H && 8 > M && (a.node.style.zIndex = 2));
                    return a.node
                }
                function ve(a, b) {
                    var c = a.display.externalMeasured;
                    return c && c.line == b.line ? (a.display.externalMeasured = null,
                    b.measure = c.measure,
                    c.built) : re(a, b)
                }
                function jd(a, b) {
                    var c = b.bgClass ? b.bgClass + " " + (b.line.bgClass || "") : b.line.bgClass;
                    c && (c += " CodeMirror-linebackground");
                    if (b.background)
                        c ? b.background.className = c : (b.background.parentNode.removeChild(b.background),
                        b.background = null);
                    else if (c) {
                        var d = Db(b);
                        b.background = d.insertBefore(p("div", null, c), d.firstChild);
                        a.display.input.setUneditable(b.background)
                    }
                    b.line.wrapClass ? Db(b).className = b.line.wrapClass : b.node != b.text && (b.node.className = "");
                    b.text.className = (b.textClass ? b.textClass + " " + (b.line.textClass || "") : b.line.textClass) || ""
                }
                function we(a, b, c, d) {
                    b.gutter && (b.node.removeChild(b.gutter),
                    b.gutter = null);
                    b.gutterBackground && (b.node.removeChild(b.gutterBackground),
                    b.gutterBackground = null);
                    if (b.line.gutterClass) {
                        var e = Db(b);
                        b.gutterBackground = p("div", null, "CodeMirror-gutter-background " + b.line.gutterClass, "left: " + (a.options.fixedGutter ? d.fixedPos : -d.gutterTotalWidth) + "px; width: " + d.gutterTotalWidth + "px");
                        a.display.input.setUneditable(b.gutterBackground);
                        e.insertBefore(b.gutterBackground, b.text)
                    }
                    e = b.line.gutterMarkers;
                    if (a.options.lineNumbers || e) {
                        var f = Db(b)
                          , g = b.gutter = p("div", null, "CodeMirror-gutter-wrapper", "left: " + (a.options.fixedGutter ? d.fixedPos : -d.gutterTotalWidth) + "px");
                        a.display.input.setUneditable(g);
                        f.insertBefore(g, b.text);
                        b.line.gutterClass && (g.className += " " + b.line.gutterClass);
                        !a.options.lineNumbers || e && e["CodeMirror-linenumbers"] || (b.lineNumber = g.appendChild(p("div", Zc(a.options, c), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + d.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + a.display.lineNumInnerWidth + "px")));
                        if (e)
                            for (b = 0; b < a.display.gutterSpecs.length; ++b)
                                c = a.display.gutterSpecs[b].className,
                                (f = e.hasOwnProperty(c) && e[c]) && g.appendChild(p("div", [f], "CodeMirror-gutter-elt", "left: " + d.gutterLeft[c] + "px; width: " + d.gutterWidth[c] + "px"))
                    }
                }
                function wg(a, b, c, d) {
                    var e = ve(a, b);
                    b.text = b.node = e.pre;
                    e.bgClass && (b.bgClass = e.bgClass);
                    e.textClass && (b.textClass = e.textClass);
                    jd(a, b);
                    we(a, b, c, d);
                    xe(a, b, d);
                    return b.node
                }
                function xe(a, b, c) {
                    ye(a, b.line, b, c, !0);
                    if (b.rest)
                        for (var d = 0; d < b.rest.length; d++)
                            ye(a, b.rest[d], b, c, !1)
                }
                function ye(a, b, c, d, e) {
                    if (b.widgets) {
                        var f = Db(c)
                          , g = 0;
                        for (b = b.widgets; g < b.length; ++g) {
                            var h = b[g]
                              , k = p("div", [h.node], "CodeMirror-linewidget" + (h.className ? " " + h.className : ""));
                            h.handleMouseEvents || k.setAttribute("cm-ignore-events", "true");
                            var l = h
                              , m = k
                              , q = d;
                            if (l.noHScroll) {
                                (c.alignable || (c.alignable = [])).push(m);
                                var n = q.wrapperWidth;
                                m.style.left = q.fixedPos + "px";
                                l.coverGutter || (n -= q.gutterTotalWidth,
                                m.style.paddingLeft = q.gutterTotalWidth + "px");
                                m.style.width = n + "px"
                            }
                            l.coverGutter && (m.style.zIndex = 5,
                            m.style.position = "relative",
                            l.noHScroll || (m.style.marginLeft = -q.gutterTotalWidth + "px"));
                            a.display.input.setUneditable(k);
                            e && h.above ? f.insertBefore(k, c.gutter || c.text) : f.appendChild(k);
                            W(h, "redraw")
                        }
                    }
                }
                function Eb(a) {
                    if (null != a.height)
                        return a.height;
                    var b = a.doc.cm;
                    if (!b)
                        return 0;
                    if (!x(document.body, a.node)) {
                        var c = "position: relative;";
                        a.coverGutter && (c += "margin-left: -" + b.display.gutters.offsetWidth + "px;");
                        a.noHScroll && (c += "width: " + b.display.wrapper.clientWidth + "px;");
                        D(b.display.measure, p("div", [a.node], null, c))
                    }
                    return a.height = a.node.parentNode.offsetHeight
                }
                function Ba(a, b) {
                    for (b = b.target || b.srcElement; b != a.wrapper; b = b.parentNode)
                        if (!b || 1 == b.nodeType && "true" == b.getAttribute("cm-ignore-events") || b.parentNode == a.sizer && b != a.mover)
                            return !0
                }
                function kd(a) {
                    return a.mover.offsetHeight - a.lineSpace.offsetHeight
                }
                function ze(a) {
                    if (a.cachedPaddingH)
                        return a.cachedPaddingH;
                    var b = D(a.measure, p("pre", "x", "CodeMirror-line-like"));
                    b = window.getComputedStyle ? window.getComputedStyle(b) : b.currentStyle;
                    b = {
                        left: parseInt(b.paddingLeft),
                        right: parseInt(b.paddingRight)
                    };
                    isNaN(b.left) || isNaN(b.right) || (a.cachedPaddingH = b);
                    return b
                }
                function wa(a) {
                    return 50 - a.display.nativeBarWidth
                }
                function Pa(a) {
                    return a.display.scroller.clientWidth - wa(a) - a.display.barWidth
                }
                function ld(a) {
                    return a.display.scroller.clientHeight - wa(a) - a.display.barHeight
                }
                function Ae(a, b, c) {
                    if (a.line == b)
                        return {
                            map: a.measure.map,
                            cache: a.measure.cache
                        };
                    for (var d = 0; d < a.rest.length; d++)
                        if (a.rest[d] == b)
                            return {
                                map: a.measure.maps[d],
                                cache: a.measure.caches[d]
                            };
                    for (b = 0; b < a.rest.length; b++)
                        if (J(a.rest[b]) > c)
                            return {
                                map: a.measure.maps[b],
                                cache: a.measure.caches[b],
                                before: !0
                            }
                }
                function md(a, b) {
                    if (b >= a.display.viewFrom && b < a.display.viewTo)
                        return a.display.view[Qa(a, b)];
                    if ((a = a.display.externalMeasured) && b >= a.lineN && b < a.lineN + a.size)
                        return a
                }
                function Ra(a, b) {
                    var c = J(b)
                      , d = md(a, c);
                    d && !d.text ? d = null : d && d.changes && (ue(a, d, c, nd(a)),
                    a.curOp.forceUpdate = !0);
                    if (!d) {
                        var e = ua(b);
                        d = J(e);
                        e = a.display.externalMeasured = new te(a.doc,e,d);
                        e.lineN = d;
                        d = e.built = re(a, e);
                        e.text = d.pre;
                        D(a.display.lineMeasure, d.pre);
                        d = e
                    }
                    a = Ae(d, b, c);
                    return {
                        line: b,
                        view: d,
                        rect: null,
                        map: a.map,
                        cache: a.cache,
                        before: a.before,
                        hasHeights: !1
                    }
                }
                function na(a, b, c, d, e) {
                    b.before && (c = -1);
                    var f = c + (d || "");
                    if (b.cache.hasOwnProperty(f))
                        a = b.cache[f];
                    else {
                        b.rect || (b.rect = b.view.text.getBoundingClientRect());
                        if (!b.hasHeights) {
                            var g = b.view
                              , h = b.rect
                              , k = a.options.lineWrapping
                              , l = k && Pa(a);
                            if (!g.measure.heights || k && g.measure.width != l) {
                                var m = g.measure.heights = [];
                                if (k)
                                    for (g.measure.width = l,
                                    g = g.text.firstChild.getClientRects(),
                                    k = 0; k < g.length - 1; k++) {
                                        l = g[k];
                                        var q = g[k + 1];
                                        2 < Math.abs(l.bottom - q.bottom) && m.push((l.bottom + q.top) / 2 - h.top)
                                    }
                                m.push(h.bottom - h.top)
                            }
                            b.hasHeights = !0
                        }
                        m = d;
                        g = Be(b.map, c, m);
                        d = g.node;
                        h = g.start;
                        k = g.end;
                        c = g.collapse;
                        if (3 == d.nodeType) {
                            for (var n = 0; 4 > n; n++) {
                                for (; h && Sc(b.line.text.charAt(g.coverStart + h)); )
                                    --h;
                                for (; g.coverStart + k < g.coverEnd && Sc(b.line.text.charAt(g.coverStart + k)); )
                                    ++k;
                                if (H && 9 > M && 0 == h && k == g.coverEnd - g.coverStart)
                                    var t = d.parentNode.getBoundingClientRect();
                                else {
                                    t = Bb(d, h, k).getClientRects();
                                    k = Ce;
                                    if ("left" == m)
                                        for (l = 0; l < t.length && (k = t[l]).left == k.right; l++)
                                            ;
                                    else
                                        for (l = t.length - 1; 0 <= l && (k = t[l]).left == k.right; l--)
                                            ;
                                    t = k
                                }
                                if (t.left || t.right || 0 == h)
                                    break;
                                k = h;
                                --h;
                                c = "right"
                            }
                            H && 11 > M && ((n = !window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI) || (null != od ? n = od : (m = D(a.display.measure, p("span", "x")),
                            n = m.getBoundingClientRect(),
                            m = Bb(m, 0, 1).getBoundingClientRect(),
                            n = od = 1 < Math.abs(n.left - m.left)),
                            n = !n),
                            n || (n = screen.logicalXDPI / screen.deviceXDPI,
                            m = screen.logicalYDPI / screen.deviceYDPI,
                            t = {
                                left: t.left * n,
                                right: t.right * n,
                                top: t.top * m,
                                bottom: t.bottom * m
                            }))
                        } else
                            0 < h && (c = m = "right"),
                            t = a.options.lineWrapping && 1 < (n = d.getClientRects()).length ? n["right" == m ? n.length - 1 : 0] : d.getBoundingClientRect();
                        !(H && 9 > M) || h || t && (t.left || t.right) || (t = (t = d.parentNode.getClientRects()[0]) ? {
                            left: t.left,
                            right: t.left + fb(a.display),
                            top: t.top,
                            bottom: t.bottom
                        } : Ce);
                        d = t.top - b.rect.top;
                        h = t.bottom - b.rect.top;
                        n = (d + h) / 2;
                        m = b.view.measure.heights;
                        for (g = 0; g < m.length - 1 && !(n < m[g]); g++)
                            ;
                        c = {
                            left: ("right" == c ? t.right : t.left) - b.rect.left,
                            right: ("left" == c ? t.left : t.right) - b.rect.left,
                            top: g ? m[g - 1] : 0,
                            bottom: m[g]
                        };
                        t.left || t.right || (c.bogus = !0);
                        a.options.singleCursorHeightPerLine || (c.rtop = d,
                        c.rbottom = h);
                        a = c;
                        a.bogus || (b.cache[f] = a)
                    }
                    return {
                        left: a.left,
                        right: a.right,
                        top: e ? a.rtop : a.top,
                        bottom: e ? a.rbottom : a.bottom
                    }
                }
                function Be(a, b, c) {
                    for (var d, e, f, g, h, k, l = 0; l < a.length; l += 3) {
                        h = a[l];
                        k = a[l + 1];
                        if (b < h)
                            e = 0,
                            f = 1,
                            g = "left";
                        else if (b < k)
                            e = b - h,
                            f = e + 1;
                        else if (l == a.length - 3 || b == k && a[l + 3] > b)
                            f = k - h,
                            e = f - 1,
                            b >= k && (g = "right");
                        if (null != e) {
                            d = a[l + 2];
                            h == k && c == (d.insertLeft ? "left" : "right") && (g = c);
                            if ("left" == c && 0 == e)
                                for (; l && a[l - 2] == a[l - 3] && a[l - 1].insertLeft; )
                                    d = a[(l -= 3) + 2],
                                    g = "left";
                            if ("right" == c && e == k - h)
                                for (; l < a.length - 3 && a[l + 3] == a[l + 4] && !a[l + 5].insertLeft; )
                                    d = a[(l += 3) + 2],
                                    g = "right";
                            break
                        }
                    }
                    return {
                        node: d,
                        start: e,
                        end: f,
                        collapse: g,
                        coverStart: h,
                        coverEnd: k
                    }
                }
                function De(a) {
                    if (a.measure && (a.measure.cache = {},
                    a.measure.heights = null,
                    a.rest))
                        for (var b = 0; b < a.rest.length; b++)
                            a.measure.caches[b] = {}
                }
                function Ee(a) {
                    a.display.externalMeasure = null;
                    G(a.display.lineMeasure);
                    for (var b = 0; b < a.display.view.length; b++)
                        De(a.display.view[b])
                }
                function Fb(a) {
                    Ee(a);
                    a.display.cachedCharWidth = a.display.cachedTextHeight = a.display.cachedPaddingH = null;
                    a.options.lineWrapping || (a.display.maxLineChanged = !0);
                    a.display.lineNumChars = null
                }
                function Fe() {
                    return qc && rc ? -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) : window.pageXOffset || (document.documentElement || document.body).scrollLeft
                }
                function Ge() {
                    return qc && rc ? -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) : window.pageYOffset || (document.documentElement || document.body).scrollTop
                }
                function pd(a) {
                    var b = 0;
                    if (a.widgets)
                        for (var c = 0; c < a.widgets.length; ++c)
                            a.widgets[c].above && (b += Eb(a.widgets[c]));
                    return b
                }
                function sc(a, b, c, d, e) {
                    e || (e = pd(b),
                    c.top += e,
                    c.bottom += e);
                    if ("line" == d)
                        return c;
                    d || (d = "local");
                    b = va(b);
                    b = "local" == d ? b + a.display.lineSpace.offsetTop : b - a.display.viewOffset;
                    if ("page" == d || "window" == d)
                        a = a.display.lineSpace.getBoundingClientRect(),
                        b += a.top + ("window" == d ? 0 : Ge()),
                        d = a.left + ("window" == d ? 0 : Fe()),
                        c.left += d,
                        c.right += d;
                    c.top += b;
                    c.bottom += b;
                    return c
                }
                function He(a, b, c) {
                    if ("div" == c)
                        return b;
                    var d = b.left;
                    b = b.top;
                    "page" == c ? (d -= Fe(),
                    b -= Ge()) : "local" != c && c || (c = a.display.sizer.getBoundingClientRect(),
                    d += c.left,
                    b += c.top);
                    a = a.display.lineSpace.getBoundingClientRect();
                    return {
                        left: d - a.left,
                        top: b - a.top
                    }
                }
                function qd(a, b, c, d, e) {
                    d || (d = u(a.doc, b.line));
                    var f = d;
                    b = b.ch;
                    d = na(a, Ra(a, d), b, e);
                    return sc(a, f, d, c)
                }
                function oa(a, b, c, d, e, f) {
                    function g(b, g) {
                        b = na(a, e, b, g ? "right" : "left", f);
                        g ? b.left = b.right : b.right = b.left;
                        return sc(a, d, b, c)
                    }
                    function h(a, b, d) {
                        return g(d ? a - 1 : a, 1 == k[b].level != d)
                    }
                    d = d || u(a.doc, b.line);
                    e || (e = Ra(a, d));
                    var k = za(d, a.doc.direction)
                      , l = b.ch;
                    b = b.sticky;
                    l >= d.text.length ? (l = d.text.length,
                    b = "before") : 0 >= l && (l = 0,
                    b = "after");
                    if (!k)
                        return g("before" == b ? l - 1 : l, "before" == b);
                    var m = vb(k, l, b)
                      , q = wb;
                    m = h(l, m, "before" == b);
                    null != q && (m.other = h(l, q, "before" != b));
                    return m
                }
                function Ie(a, b) {
                    var c = 0;
                    b = B(a.doc, b);
                    a.options.lineWrapping || (c = fb(a.display) * b.ch);
                    b = u(a.doc, b.line);
                    a = va(b) + a.display.lineSpace.offsetTop;
                    return {
                        left: c,
                        right: c,
                        top: a,
                        bottom: a + b.height
                    }
                }
                function rd(a, b, c, d, e) {
                    a = r(a, b, c);
                    a.xRel = e;
                    d && (a.outside = d);
                    return a
                }
                function sd(a, b, c) {
                    var d = a.doc;
                    c += a.display.viewOffset;
                    if (0 > c)
                        return rd(d.first, 0, null, -1, -1);
                    var e = Oa(d, c)
                      , f = d.first + d.size - 1;
                    if (e > f)
                        return rd(d.first + d.size - 1, u(d, f).text.length, null, 1, 1);
                    0 > b && (b = 0);
                    for (var g = u(d, e); ; ) {
                        f = xg(a, g, e, b, c);
                        var h = void 0;
                        var k = f.ch + (0 < f.xRel || 0 < f.outside ? 1 : 0);
                        if (g = Aa && g.markedSpans)
                            for (var l = 0; l < g.length; ++l) {
                                var m = g[l];
                                m.marker.collapsed && (null == m.from || m.from < k) && (null == m.to || m.to > k) && (!h || 0 > ed(h, m.marker)) && (h = m.marker)
                            }
                        if (!h)
                            return f;
                        f = h.find(1);
                        if (f.line == e)
                            return f;
                        g = u(d, e = f.line)
                    }
                }
                function Je(a, b, c, d) {
                    d -= pd(b);
                    b = b.text.length;
                    var e = ub(function(b) {
                        return na(a, c, b - 1).bottom <= d
                    }, b, 0);
                    b = ub(function(b) {
                        return na(a, c, b).top > d
                    }, e, b);
                    return {
                        begin: e,
                        end: b
                    }
                }
                function Ke(a, b, c, d) {
                    c || (c = Ra(a, b));
                    d = sc(a, b, na(a, c, d), "line").top;
                    return Je(a, b, c, d)
                }
                function td(a, b, c, d) {
                    return a.bottom <= c ? !1 : a.top > c ? !0 : (d ? a.left : a.right) > b
                }
                function xg(a, b, c, d, e) {
                    e -= va(b);
                    var f = Ra(a, b)
                      , g = pd(b)
                      , h = 0
                      , k = b.text.length
                      , l = !0
                      , m = za(b, a.doc.direction);
                    m && (m = (a.options.lineWrapping ? yg : zg)(a, b, c, f, m, d, e),
                    h = (l = 1 != m.level) ? m.from : m.to - 1,
                    k = l ? m.to : m.from - 1);
                    var q = null
                      , n = null;
                    m = ub(function(b) {
                        var c = na(a, f, b);
                        c.top += g;
                        c.bottom += g;
                        if (!td(c, d, e, !1))
                            return !1;
                        c.top <= e && c.left <= d && (q = b,
                        n = c);
                        return !0
                    }, h, k);
                    var t = !1;
                    n ? (h = d - n.left < n.right - d,
                    l = h == l,
                    m = q + (l ? 0 : 1),
                    l = l ? "after" : "before",
                    h = h ? n.left : n.right) : (l || m != k && m != h || m++,
                    l = 0 == m ? "after" : m == b.text.length ? "before" : na(a, f, m - (l ? 1 : 0)).bottom + g <= e == l ? "after" : "before",
                    t = oa(a, r(c, m, l), "line", b, f),
                    h = t.left,
                    t = e < t.top ? -1 : e >= t.bottom ? 1 : 0);
                    m = Zd(b.text, m, 1);
                    return rd(c, m, l, t, d - h)
                }
                function zg(a, b, c, d, e, f, g) {
                    var h = ub(function(h) {
                        h = e[h];
                        var k = 1 != h.level;
                        return td(oa(a, r(c, k ? h.to : h.from, k ? "before" : "after"), "line", b, d), f, g, !0)
                    }, 0, e.length - 1)
                      , k = e[h];
                    if (0 < h) {
                        var l = 1 != k.level;
                        l = oa(a, r(c, l ? k.from : k.to, l ? "after" : "before"), "line", b, d);
                        td(l, f, g, !0) && l.top > g && (k = e[h - 1])
                    }
                    return k
                }
                function yg(a, b, c, d, e, f, g) {
                    g = Je(a, b, d, g);
                    c = g.begin;
                    g = g.end;
                    /\s/.test(b.text.charAt(g - 1)) && g--;
                    for (var h = b = null, k = 0; k < e.length; k++) {
                        var l = e[k];
                        if (!(l.from >= g || l.to <= c)) {
                            var m = na(a, d, 1 != l.level ? Math.min(g, l.to) - 1 : Math.max(c, l.from)).right;
                            m = m < f ? f - m + 1E9 : m - f;
                            if (!b || h > m)
                                b = l,
                                h = m
                        }
                    }
                    b || (b = e[e.length - 1]);
                    b.from < c && (b = {
                        from: c,
                        to: b.to,
                        level: b.level
                    });
                    b.to > g && (b = {
                        from: b.from,
                        to: g,
                        level: b.level
                    });
                    return b
                }
                function gb(a) {
                    if (null != a.cachedTextHeight)
                        return a.cachedTextHeight;
                    if (null == Sa) {
                        Sa = p("pre", null, "CodeMirror-line-like");
                        for (var b = 0; 49 > b; ++b)
                            Sa.appendChild(document.createTextNode("x")),
                            Sa.appendChild(p("br"));
                        Sa.appendChild(document.createTextNode("x"))
                    }
                    D(a.measure, Sa);
                    b = Sa.offsetHeight / 50;
                    3 < b && (a.cachedTextHeight = b);
                    G(a.measure);
                    return b || 1
                }
                function fb(a) {
                    if (null != a.cachedCharWidth)
                        return a.cachedCharWidth;
                    var b = p("span", "xxxxxxxxxx")
                      , c = p("pre", [b], "CodeMirror-line-like");
                    D(a.measure, c);
                    b = b.getBoundingClientRect();
                    b = (b.right - b.left) / 10;
                    2 < b && (a.cachedCharWidth = b);
                    return b || 10
                }
                function nd(a) {
                    for (var b = a.display, c = {}, d = {}, e = b.gutters.clientLeft, f = b.gutters.firstChild, g = 0; f; f = f.nextSibling,
                    ++g) {
                        var h = a.display.gutterSpecs[g].className;
                        c[h] = f.offsetLeft + f.clientLeft + e;
                        d[h] = f.clientWidth
                    }
                    return {
                        fixedPos: ud(b),
                        gutterTotalWidth: b.gutters.offsetWidth,
                        gutterLeft: c,
                        gutterWidth: d,
                        wrapperWidth: b.wrapper.clientWidth
                    }
                }
                function ud(a) {
                    return a.scroller.getBoundingClientRect().left - a.sizer.getBoundingClientRect().left
                }
                function Le(a) {
                    var b = gb(a.display)
                      , c = a.options.lineWrapping
                      , d = c && Math.max(5, a.display.scroller.clientWidth / fb(a.display) - 3);
                    return function(e) {
                        if (Ea(a.doc, e))
                            return 0;
                        var f = 0;
                        if (e.widgets)
                            for (var g = 0; g < e.widgets.length; g++)
                                e.widgets[g].height && (f += e.widgets[g].height);
                        return c ? f + (Math.ceil(e.text.length / d) || 1) * b : f + b
                    }
                }
                function vd(a) {
                    var b = a.doc
                      , c = Le(a);
                    b.iter(function(a) {
                        var b = c(a);
                        b != a.height && sa(a, b)
                    })
                }
                function Ta(a, b, c, d) {
                    var e = a.display;
                    if (!c && "true" == (b.target || b.srcElement).getAttribute("cm-not-content"))
                        return null;
                    c = e.lineSpace.getBoundingClientRect();
                    try {
                        var f = b.clientX - c.left;
                        var g = b.clientY - c.top
                    } catch (k) {
                        return null
                    }
                    b = sd(a, f, g);
                    var h;
                    d && 0 < b.xRel && (h = u(a.doc, b.line).text).length == b.ch && (d = F(h, h.length, a.options.tabSize) - h.length,
                    b = r(b.line, Math.max(0, Math.round((f - ze(a.display).left) / fb(a.display)) - d)));
                    return b
                }
                function Qa(a, b) {
                    if (b >= a.display.viewTo)
                        return null;
                    b -= a.display.viewFrom;
                    if (0 > b)
                        return null;
                    a = a.display.view;
                    for (var c = 0; c < a.length; c++)
                        if (b -= a[c].size,
                        0 > b)
                            return c
                }
                function ba(a, b, c, d) {
                    null == b && (b = a.doc.first);
                    null == c && (c = a.doc.first + a.doc.size);
                    d || (d = 0);
                    var e = a.display;
                    d && c < e.viewTo && (null == e.updateLineNumbers || e.updateLineNumbers > b) && (e.updateLineNumbers = b);
                    a.curOp.viewChanged = !0;
                    if (b >= e.viewTo)
                        Aa && fd(a.doc, b) < e.viewTo && Fa(a);
                    else if (c <= e.viewFrom)
                        Aa && pe(a.doc, c + d) > e.viewFrom ? Fa(a) : (e.viewFrom += d,
                        e.viewTo += d);
                    else if (b <= e.viewFrom && c >= e.viewTo)
                        Fa(a);
                    else if (b <= e.viewFrom) {
                        var f = tc(a, c, c + d, 1);
                        f ? (e.view = e.view.slice(f.index),
                        e.viewFrom = f.lineN,
                        e.viewTo += d) : Fa(a)
                    } else if (c >= e.viewTo)
                        (f = tc(a, b, b, -1)) ? (e.view = e.view.slice(0, f.index),
                        e.viewTo = f.lineN) : Fa(a);
                    else {
                        f = tc(a, b, b, -1);
                        var g = tc(a, c, c + d, 1);
                        f && g ? (e.view = e.view.slice(0, f.index).concat(pc(a, f.lineN, g.lineN)).concat(e.view.slice(g.index)),
                        e.viewTo += d) : Fa(a)
                    }
                    if (a = e.externalMeasured)
                        c < a.lineN ? a.lineN += d : b < a.lineN + a.size && (e.externalMeasured = null)
                }
                function Ga(a, b, c) {
                    a.curOp.viewChanged = !0;
                    var d = a.display
                      , e = a.display.externalMeasured;
                    e && b >= e.lineN && b < e.lineN + e.size && (d.externalMeasured = null);
                    b < d.viewFrom || b >= d.viewTo || (a = d.view[Qa(a, b)],
                    null != a.node && (a = a.changes || (a.changes = []),
                    -1 == O(a, c) && a.push(c)))
                }
                function Fa(a) {
                    a.display.viewFrom = a.display.viewTo = a.doc.first;
                    a.display.view = [];
                    a.display.viewOffset = 0
                }
                function tc(a, b, c, d) {
                    var e = Qa(a, b)
                      , f = a.display.view;
                    if (!Aa || c == a.doc.first + a.doc.size)
                        return {
                            index: e,
                            lineN: c
                        };
                    for (var g = a.display.viewFrom, h = 0; h < e; h++)
                        g += f[h].size;
                    if (g != b) {
                        if (0 < d) {
                            if (e == f.length - 1)
                                return null;
                            b = g + f[e].size - b;
                            e++
                        } else
                            b = g - b;
                        c += b
                    }
                    for (; fd(a.doc, c) != c; ) {
                        if (e == (0 > d ? 0 : f.length - 1))
                            return null;
                        c += d * f[e - (0 > d ? 1 : 0)].size;
                        e += d
                    }
                    return {
                        index: e,
                        lineN: c
                    }
                }
                function Me(a) {
                    a = a.display.view;
                    for (var b = 0, c = 0; c < a.length; c++) {
                        var d = a[c];
                        d.hidden || d.node && !d.changes || ++b
                    }
                    return b
                }
                function Gb(a) {
                    a.display.input.showSelection(a.display.input.prepareSelection())
                }
                function Ne(a, b) {
                    void 0 === b && (b = !0);
                    for (var c = a.doc, d = {}, e = d.cursors = document.createDocumentFragment(), f = d.selection = document.createDocumentFragment(), g = 0; g < c.sel.ranges.length; g++)
                        if (b || g != c.sel.primIndex) {
                            var h = c.sel.ranges[g];
                            if (!(h.from().line >= a.display.viewTo || h.to().line < a.display.viewFrom)) {
                                var k = h.empty();
                                (k || a.options.showCursorWhenSelecting) && Oe(a, h.head, e);
                                k || Ag(a, h, f)
                            }
                        }
                    return d
                }
                function Oe(a, b, c) {
                    b = oa(a, b, "div", null, null, !a.options.singleCursorHeightPerLine);
                    var d = c.appendChild(p("div", "\u00a0", "CodeMirror-cursor"));
                    d.style.left = b.left + "px";
                    d.style.top = b.top + "px";
                    d.style.height = Math.max(0, b.bottom - b.top) * a.options.cursorHeight + "px";
                    b.other && (a = c.appendChild(p("div", "\u00a0", "CodeMirror-cursor CodeMirror-secondarycursor")),
                    a.style.display = "",
                    a.style.left = b.other.left + "px",
                    a.style.top = b.other.top + "px",
                    a.style.height = .85 * (b.other.bottom - b.other.top) + "px")
                }
                function uc(a, b) {
                    return a.top - b.top || a.left - b.left
                }
                function Ag(a, b, c) {
                    function d(a, b, d, c) {
                        0 > b && (b = 0);
                        b = Math.round(b);
                        c = Math.round(c);
                        h.appendChild(p("div", null, "CodeMirror-selected", "position: absolute; left: " + a + "px;\n                             top: " + b + "px; width: " + (null == d ? m - a : d) + "px;\n                             height: " + (c - b) + "px"))
                    }
                    function e(b, c, e) {
                        function f(d, c) {
                            return qd(a, r(b, d), "div", k, c)
                        }
                        function h(b, d, c) {
                            b = Ke(a, k, null, b);
                            d = "ltr" == d == ("after" == c) ? "left" : "right";
                            c = "after" == c ? b.begin : b.end - (/\s/.test(k.text.charAt(b.end - 1)) ? 2 : 1);
                            return f(c, d)[d]
                        }
                        var k = u(g, b), t = k.text.length, n, P, p = za(k, g.direction);
                        hg(p, c || 0, null == e ? t : e, function(a, b, g, k) {
                            var r = "ltr" == g
                              , u = f(a, r ? "left" : "right")
                              , w = f(b - 1, r ? "right" : "left")
                              , y = null == c && 0 == a
                              , z = null == e && b == t
                              , v = 0 == k;
                            k = !p || k == p.length - 1;
                            3 >= w.top - u.top ? (b = (q ? y : z) && v ? l : (r ? u : w).left,
                            d(b, u.top, ((q ? z : y) && k ? m : (r ? w : u).right) - b, u.bottom)) : (r ? (r = q && y && v ? l : u.left,
                            y = q ? m : h(a, g, "before"),
                            a = q ? l : h(b, g, "after"),
                            z = q && z && k ? m : w.right) : (r = q ? h(a, g, "before") : l,
                            y = !q && y && v ? m : u.right,
                            a = !q && z && k ? l : w.left,
                            z = q ? h(b, g, "after") : m),
                            d(r, u.top, y - r, u.bottom),
                            u.bottom < w.top && d(l, u.bottom, null, w.top),
                            d(a, w.top, z - a, w.bottom));
                            if (!n || 0 > uc(u, n))
                                n = u;
                            0 > uc(w, n) && (n = w);
                            if (!P || 0 > uc(u, P))
                                P = u;
                            0 > uc(w, P) && (P = w)
                        });
                        return {
                            start: n,
                            end: P
                        }
                    }
                    var f = a.display
                      , g = a.doc
                      , h = document.createDocumentFragment()
                      , k = ze(a.display)
                      , l = k.left
                      , m = Math.max(f.sizerWidth, Pa(a) - f.sizer.offsetLeft) - k.right
                      , q = "ltr" == g.direction;
                    f = b.from();
                    b = b.to();
                    if (f.line == b.line)
                        e(f.line, f.ch, b.ch);
                    else {
                        var n = u(g, f.line);
                        k = u(g, b.line);
                        k = ua(n) == ua(k);
                        f = e(f.line, f.ch, k ? n.text.length + 1 : null).end;
                        b = e(b.line, k ? 0 : null, b.ch).start;
                        k && (f.top < b.top - 2 ? (d(f.right, f.top, null, f.bottom),
                        d(l, b.top, b.left, b.bottom)) : d(f.right, f.top, b.left - f.right, f.bottom));
                        f.bottom < b.top && d(l, f.bottom, null, b.top)
                    }
                    c.appendChild(h)
                }
                function wd(a) {
                    if (a.state.focused) {
                        var b = a.display;
                        clearInterval(b.blinker);
                        var c = !0;
                        b.cursorDiv.style.visibility = "";
                        0 < a.options.cursorBlinkRate ? b.blinker = setInterval(function() {
                            a.hasFocus() || hb(a);
                            b.cursorDiv.style.visibility = (c = !c) ? "" : "hidden"
                        }, a.options.cursorBlinkRate) : 0 > a.options.cursorBlinkRate && (b.cursorDiv.style.visibility = "hidden")
                    }
                }
                function Pe(a) {
                    a.hasFocus() || (a.display.input.focus(),
                    a.state.focused || xd(a))
                }
                function yd(a) {
                    a.state.delayingBlurEvent = !0;
                    setTimeout(function() {
                        a.state.delayingBlurEvent && (a.state.delayingBlurEvent = !1,
                        a.state.focused && hb(a))
                    }, 100)
                }
                function xd(a, b) {
                    a.state.delayingBlurEvent && !a.state.draggingText && (a.state.delayingBlurEvent = !1);
                    "nocursor" != a.options.readOnly && (a.state.focused || (R(a, "focus", a, b),
                    a.state.focused = !0,
                    L(a.display.wrapper, "CodeMirror-focused"),
                    a.curOp || a.display.selForContextMenu == a.doc.sel || (a.display.input.reset(),
                    Y && setTimeout(function() {
                        return a.display.input.reset(!0)
                    }, 20)),
                    a.display.input.receivedFocus()),
                    wd(a))
                }
                function hb(a, b) {
                    a.state.delayingBlurEvent || (a.state.focused && (R(a, "blur", a, b),
                    a.state.focused = !1,
                    Ua(a.display.wrapper, "CodeMirror-focused")),
                    clearInterval(a.display.blinker),
                    setTimeout(function() {
                        a.state.focused || (a.display.shift = !1)
                    }, 150))
                }
                function vc(a) {
                    for (var b = a.display, c = b.lineDiv.offsetTop, d = 0; d < b.view.length; d++) {
                        var e = b.view[d]
                          , f = a.options.lineWrapping
                          , g = 0;
                        if (!e.hidden) {
                            if (H && 8 > M) {
                                f = e.node.offsetTop + e.node.offsetHeight;
                                var h = f - c;
                                c = f
                            } else {
                                var k = e.node.getBoundingClientRect();
                                h = k.bottom - k.top;
                                !f && e.text.firstChild && (g = e.text.firstChild.getBoundingClientRect().right - k.left - 1)
                            }
                            f = e.line.height - h;
                            if (.005 < f || -.005 > f)
                                if (sa(e.line, h),
                                Qe(e.line),
                                e.rest)
                                    for (h = 0; h < e.rest.length; h++)
                                        Qe(e.rest[h]);
                            g > a.display.sizerWidth && (g = Math.ceil(g / fb(a.display)),
                            g > a.display.maxLineLength && (a.display.maxLineLength = g,
                            a.display.maxLine = e.line,
                            a.display.maxLineChanged = !0))
                        }
                    }
                }
                function Qe(a) {
                    if (a.widgets)
                        for (var b = 0; b < a.widgets.length; ++b) {
                            var c = a.widgets[b]
                              , d = c.node.parentNode;
                            d && (c.height = d.offsetHeight)
                        }
                }
                function wc(a, b, c) {
                    var d = c && null != c.top ? Math.max(0, c.top) : a.scroller.scrollTop;
                    d = Math.floor(d - a.lineSpace.offsetTop);
                    var e = c && null != c.bottom ? c.bottom : d + a.wrapper.clientHeight;
                    d = Oa(b, d);
                    e = Oa(b, e);
                    if (c && c.ensure) {
                        var f = c.ensure.from.line;
                        c = c.ensure.to.line;
                        f < d ? (d = f,
                        e = Oa(b, va(u(b, f)) + a.wrapper.clientHeight)) : Math.min(c, b.lastLine()) >= e && (d = Oa(b, va(u(b, c)) - a.wrapper.clientHeight),
                        e = c)
                    }
                    return {
                        from: d,
                        to: Math.max(e, d + 1)
                    }
                }
                function zd(a, b) {
                    var c = a.display
                      , d = gb(a.display);
                    0 > b.top && (b.top = 0);
                    var e = a.curOp && null != a.curOp.scrollTop ? a.curOp.scrollTop : c.scroller.scrollTop
                      , f = ld(a)
                      , g = {};
                    b.bottom - b.top > f && (b.bottom = b.top + f);
                    var h = a.doc.height + kd(c)
                      , k = b.top < d;
                    d = b.bottom > h - d;
                    b.top < e ? g.scrollTop = k ? 0 : b.top : b.bottom > e + f && (f = Math.min(b.top, (d ? h : b.bottom) - f),
                    f != e && (g.scrollTop = f));
                    e = a.options.fixedGutter ? 0 : c.gutters.offsetWidth;
                    f = a.curOp && null != a.curOp.scrollLeft ? a.curOp.scrollLeft : c.scroller.scrollLeft - e;
                    a = Pa(a) - c.gutters.offsetWidth;
                    if (c = b.right - b.left > a)
                        b.right = b.left + a;
                    10 > b.left ? g.scrollLeft = 0 : b.left < f ? g.scrollLeft = Math.max(0, b.left + e - (c ? 0 : 10)) : b.right > a + f - 3 && (g.scrollLeft = b.right + (c ? 0 : 10) - a);
                    return g
                }
                function xc(a, b) {
                    null != b && (yc(a),
                    a.curOp.scrollTop = (null == a.curOp.scrollTop ? a.doc.scrollTop : a.curOp.scrollTop) + b)
                }
                function ib(a) {
                    yc(a);
                    var b = a.getCursor();
                    a.curOp.scrollToPos = {
                        from: b,
                        to: b,
                        margin: a.options.cursorScrollMargin
                    }
                }
                function Hb(a, b, c) {
                    null == b && null == c || yc(a);
                    null != b && (a.curOp.scrollLeft = b);
                    null != c && (a.curOp.scrollTop = c)
                }
                function yc(a) {
                    var b = a.curOp.scrollToPos;
                    if (b) {
                        a.curOp.scrollToPos = null;
                        var c = Ie(a, b.from)
                          , d = Ie(a, b.to);
                        Re(a, c, d, b.margin)
                    }
                }
                function Re(a, b, c, d) {
                    b = zd(a, {
                        left: Math.min(b.left, c.left),
                        top: Math.min(b.top, c.top) - d,
                        right: Math.max(b.right, c.right),
                        bottom: Math.max(b.bottom, c.bottom) + d
                    });
                    Hb(a, b.scrollLeft, b.scrollTop)
                }
                function Ib(a, b) {
                    2 > Math.abs(a.doc.scrollTop - b) || (Ca || Ad(a, {
                        top: b
                    }),
                    Se(a, b, !0),
                    Ca && Ad(a),
                    Jb(a, 100))
                }
                function Se(a, b, c) {
                    b = Math.max(0, Math.min(a.display.scroller.scrollHeight - a.display.scroller.clientHeight, b));
                    if (a.display.scroller.scrollTop != b || c)
                        a.doc.scrollTop = b,
                        a.display.scrollbars.setScrollTop(b),
                        a.display.scroller.scrollTop != b && (a.display.scroller.scrollTop = b)
                }
                function Va(a, b, c, d) {
                    b = Math.max(0, Math.min(b, a.display.scroller.scrollWidth - a.display.scroller.clientWidth));
                    (c ? b == a.doc.scrollLeft : 2 > Math.abs(a.doc.scrollLeft - b)) && !d || (a.doc.scrollLeft = b,
                    Te(a),
                    a.display.scroller.scrollLeft != b && (a.display.scroller.scrollLeft = b),
                    a.display.scrollbars.setScrollLeft(b))
                }
                function Kb(a) {
                    var b = a.display
                      , c = b.gutters.offsetWidth
                      , d = Math.round(a.doc.height + kd(a.display));
                    return {
                        clientHeight: b.scroller.clientHeight,
                        viewHeight: b.wrapper.clientHeight,
                        scrollWidth: b.scroller.scrollWidth,
                        clientWidth: b.scroller.clientWidth,
                        viewWidth: b.wrapper.clientWidth,
                        barLeft: a.options.fixedGutter ? c : 0,
                        docHeight: d,
                        scrollHeight: d + wa(a) + b.barHeight,
                        nativeBarWidth: b.nativeBarWidth,
                        gutterWidth: c
                    }
                }
                function jb(a, b) {
                    b || (b = Kb(a));
                    var c = a.display.barWidth
                      , d = a.display.barHeight;
                    Ue(a, b);
                    for (b = 0; 4 > b && c != a.display.barWidth || d != a.display.barHeight; b++)
                        c != a.display.barWidth && a.options.lineWrapping && vc(a),
                        Ue(a, Kb(a)),
                        c = a.display.barWidth,
                        d = a.display.barHeight
                }
                function Ue(a, b) {
                    var c = a.display
                      , d = c.scrollbars.update(b);
                    c.sizer.style.paddingRight = (c.barWidth = d.right) + "px";
                    c.sizer.style.paddingBottom = (c.barHeight = d.bottom) + "px";
                    c.heightForcer.style.borderBottom = d.bottom + "px solid transparent";
                    d.right && d.bottom ? (c.scrollbarFiller.style.display = "block",
                    c.scrollbarFiller.style.height = d.bottom + "px",
                    c.scrollbarFiller.style.width = d.right + "px") : c.scrollbarFiller.style.display = "";
                    d.bottom && a.options.coverGutterNextToScrollbar && a.options.fixedGutter ? (c.gutterFiller.style.display = "block",
                    c.gutterFiller.style.height = d.bottom + "px",
                    c.gutterFiller.style.width = b.gutterWidth + "px") : c.gutterFiller.style.display = ""
                }
                function Ve(a) {
                    a.display.scrollbars && (a.display.scrollbars.clear(),
                    a.display.scrollbars.addClass && Ua(a.display.wrapper, a.display.scrollbars.addClass));
                    a.display.scrollbars = new We[a.options.scrollbarStyle](function(b) {
                        a.display.wrapper.insertBefore(b, a.display.scrollbarFiller);
                        z(b, "mousedown", function() {
                            a.state.focused && setTimeout(function() {
                                return a.display.input.focus()
                            }, 0)
                        });
                        b.setAttribute("cm-not-content", "true")
                    }
                    ,function(b, c) {
                        "horizontal" == c ? Va(a, b) : Ib(a, b)
                    }
                    ,a);
                    a.display.scrollbars.addClass && L(a.display.wrapper, a.display.scrollbars.addClass)
                }
                function Wa(a) {
                    a.curOp = {
                        cm: a,
                        viewChanged: !1,
                        startHeight: a.doc.height,
                        forceUpdate: !1,
                        updateInput: 0,
                        typing: !1,
                        changeObjs: null,
                        cursorActivityHandlers: null,
                        cursorActivityCalled: 0,
                        selectionChanged: !1,
                        updateMaxLine: !1,
                        scrollLeft: null,
                        scrollTop: null,
                        scrollToPos: null,
                        focus: !1,
                        id: ++Bg
                    };
                    a = a.curOp;
                    eb ? eb.ops.push(a) : a.ownsGroup = eb = {
                        ops: [a],
                        delayedCallbacks: []
                    }
                }
                function Xa(a) {
                    (a = a.curOp) && ug(a, function(a) {
                        for (var b = 0; b < a.ops.length; b++)
                            a.ops[b].cm.curOp = null;
                        a = a.ops;
                        for (b = 0; b < a.length; b++) {
                            var d = a[b]
                              , e = d.cm
                              , f = e.display
                              , g = e.display;
                            !g.scrollbarsClipped && g.scroller.offsetWidth && (g.nativeBarWidth = g.scroller.offsetWidth - g.scroller.clientWidth,
                            g.heightForcer.style.height = wa(e) + "px",
                            g.sizer.style.marginBottom = -g.nativeBarWidth + "px",
                            g.sizer.style.borderRightWidth = wa(e) + "px",
                            g.scrollbarsClipped = !0);
                            d.updateMaxLine && hd(e);
                            d.mustUpdate = d.viewChanged || d.forceUpdate || null != d.scrollTop || d.scrollToPos && (d.scrollToPos.from.line < f.viewFrom || d.scrollToPos.to.line >= f.viewTo) || f.maxLineChanged && e.options.lineWrapping;
                            d.update = d.mustUpdate && new zc(e,d.mustUpdate && {
                                top: d.scrollTop,
                                ensure: d.scrollToPos
                            },d.forceUpdate)
                        }
                        for (b = 0; b < a.length; b++)
                            d = a[b],
                            d.updatedDisplay = d.mustUpdate && Bd(d.cm, d.update);
                        for (b = 0; b < a.length; b++)
                            if (d = a[b],
                            e = d.cm,
                            f = e.display,
                            d.updatedDisplay && vc(e),
                            d.barMeasure = Kb(e),
                            f.maxLineChanged && !e.options.lineWrapping && (g = f.maxLine.text.length,
                            g = na(e, Ra(e, f.maxLine), g, void 0),
                            d.adjustWidthTo = g.left + 3,
                            e.display.sizerWidth = d.adjustWidthTo,
                            d.barMeasure.scrollWidth = Math.max(f.scroller.clientWidth, f.sizer.offsetLeft + d.adjustWidthTo + wa(e) + e.display.barWidth),
                            d.maxScrollLeft = Math.max(0, f.sizer.offsetLeft + d.adjustWidthTo - Pa(e))),
                            d.updatedDisplay || d.selectionChanged)
                                d.preparedSelection = f.input.prepareSelection();
                        for (b = 0; b < a.length; b++)
                            d = a[b],
                            e = d.cm,
                            null != d.adjustWidthTo && (e.display.sizer.style.minWidth = d.adjustWidthTo + "px",
                            d.maxScrollLeft < e.doc.scrollLeft && Va(e, Math.min(e.display.scroller.scrollLeft, d.maxScrollLeft), !0),
                            e.display.maxLineChanged = !1),
                            f = d.focus && d.focus == ha(),
                            d.preparedSelection && e.display.input.showSelection(d.preparedSelection, f),
                            (d.updatedDisplay || d.startHeight != e.doc.height) && jb(e, d.barMeasure),
                            d.updatedDisplay && Cd(e, d.barMeasure),
                            d.selectionChanged && wd(e),
                            e.state.focused && d.updateInput && e.display.input.reset(d.typing),
                            f && Pe(d.cm);
                        for (b = 0; b < a.length; b++) {
                            var h = void 0;
                            d = a[b];
                            e = d.cm;
                            f = e.display;
                            g = e.doc;
                            d.updatedDisplay && Xe(e, d.update);
                            null == f.wheelStartX || null == d.scrollTop && null == d.scrollLeft && !d.scrollToPos || (f.wheelStartX = f.wheelStartY = null);
                            null != d.scrollTop && Se(e, d.scrollTop, d.forceScroll);
                            null != d.scrollLeft && Va(e, d.scrollLeft, !0, !0);
                            if (d.scrollToPos) {
                                var k = B(g, d.scrollToPos.from);
                                var l = B(g, d.scrollToPos.to);
                                var m = d.scrollToPos.margin;
                                null == m && (m = 0);
                                e.options.lineWrapping || k != l || (k = k.ch ? r(k.line, "before" == k.sticky ? k.ch - 1 : k.ch, "after") : k,
                                l = "before" == k.sticky ? r(k.line, k.ch + 1, "before") : k);
                                for (var q = 0; 5 > q; q++) {
                                    var n = !1;
                                    h = oa(e, k);
                                    var t = l && l != k ? oa(e, l) : h;
                                    h = {
                                        left: Math.min(h.left, t.left),
                                        top: Math.min(h.top, t.top) - m,
                                        right: Math.max(h.left, t.left),
                                        bottom: Math.max(h.bottom, t.bottom) + m
                                    };
                                    t = zd(e, h);
                                    var P = e.doc.scrollTop
                                      , u = e.doc.scrollLeft;
                                    null != t.scrollTop && (Ib(e, t.scrollTop),
                                    1 < Math.abs(e.doc.scrollTop - P) && (n = !0));
                                    null != t.scrollLeft && (Va(e, t.scrollLeft),
                                    1 < Math.abs(e.doc.scrollLeft - u) && (n = !0));
                                    if (!n)
                                        break
                                }
                                l = h;
                                T(e, "scrollCursorIntoView") || (m = e.display,
                                q = m.sizer.getBoundingClientRect(),
                                k = null,
                                0 > l.top + q.top ? k = !0 : l.bottom + q.top > (window.innerHeight || document.documentElement.clientHeight) && (k = !1),
                                null == k || Cg || (l = p("div", "\u200b", null, "position: absolute;\n                         top: " + (l.top - m.viewOffset - e.display.lineSpace.offsetTop) + "px;\n                         height: " + (l.bottom - l.top + wa(e) + m.barHeight) + "px;\n                         left: " + l.left + "px; width: " + Math.max(2, l.right - l.left) + "px;"),
                                e.display.lineSpace.appendChild(l),
                                l.scrollIntoView(k),
                                e.display.lineSpace.removeChild(l)))
                            }
                            l = d.maybeHiddenMarkers;
                            k = d.maybeUnhiddenMarkers;
                            if (l)
                                for (m = 0; m < l.length; ++m)
                                    l[m].lines.length || R(l[m], "hide");
                            if (k)
                                for (l = 0; l < k.length; ++l)
                                    k[l].lines.length && R(k[l], "unhide");
                            f.wrapper.offsetHeight && (g.scrollTop = e.display.scroller.scrollTop);
                            d.changeObjs && R(e, "changes", e, d.changeObjs);
                            d.update && d.update.finish()
                        }
                    })
                }
                function ea(a, b) {
                    if (a.curOp)
                        return b();
                    Wa(a);
                    try {
                        return b()
                    } finally {
                        Xa(a)
                    }
                }
                function U(a, b) {
                    return function() {
                        if (a.curOp)
                            return b.apply(a, arguments);
                        Wa(a);
                        try {
                            return b.apply(a, arguments)
                        } finally {
                            Xa(a)
                        }
                    }
                }
                function Z(a) {
                    return function() {
                        if (this.curOp)
                            return a.apply(this, arguments);
                        Wa(this);
                        try {
                            return a.apply(this, arguments)
                        } finally {
                            Xa(this)
                        }
                    }
                }
                function V(a) {
                    return function() {
                        var b = this.cm;
                        if (!b || b.curOp)
                            return a.apply(this, arguments);
                        Wa(b);
                        try {
                            return a.apply(this, arguments)
                        } finally {
                            Xa(b)
                        }
                    }
                }
                function Jb(a, b) {
                    a.doc.highlightFrontier < a.display.viewTo && a.state.highlight.set(b, w(Dg, a))
                }
                function Dg(a) {
                    var b = a.doc;
                    if (!(b.highlightFrontier >= a.display.viewTo)) {
                        var c = +new Date + a.options.workTime
                          , d = zb(a, b.highlightFrontier)
                          , e = [];
                        b.iter(d.line, Math.min(b.first + b.size, a.display.viewTo + 500), function(f) {
                            if (d.line >= a.display.viewFrom) {
                                var g = f.styles
                                  , h = f.text.length > a.options.maxHighlightLength ? Ma(b.mode, d.state) : null
                                  , k = ee(a, f, d, !0);
                                h && (d.state = h);
                                f.styles = k.styles;
                                h = f.styleClasses;
                                (k = k.classes) ? f.styleClasses = k : h && (f.styleClasses = null);
                                k = !g || g.length != f.styles.length || h != k && (!h || !k || h.bgClass != k.bgClass || h.textClass != k.textClass);
                                for (h = 0; !k && h < g.length; ++h)
                                    k = g[h] != f.styles[h];
                                k && e.push(d.line);
                                f.stateAfter = d.save()
                            } else
                                f.text.length <= a.options.maxHighlightLength && bd(a, f.text, d),
                                f.stateAfter = 0 == d.line % 5 ? d.save() : null;
                            d.nextLine();
                            if (+new Date > c)
                                return Jb(a, a.options.workDelay),
                                !0
                        });
                        b.highlightFrontier = d.line;
                        b.modeFrontier = Math.max(b.modeFrontier, d.line);
                        e.length && ea(a, function() {
                            for (var b = 0; b < e.length; b++)
                                Ga(a, e[b], "text")
                        })
                    }
                }
                function Bd(a, b) {
                    var c = a.display
                      , d = a.doc;
                    if (b.editorIsHidden)
                        return Fa(a),
                        !1;
                    if (!b.force && b.visible.from >= c.viewFrom && b.visible.to <= c.viewTo && (null == c.updateLineNumbers || c.updateLineNumbers >= c.viewTo) && c.renderedView == c.view && 0 == Me(a))
                        return !1;
                    Ye(a) && (Fa(a),
                    b.dims = nd(a));
                    var e = d.first + d.size
                      , f = Math.max(b.visible.from - a.options.viewportMargin, d.first)
                      , g = Math.min(e, b.visible.to + a.options.viewportMargin);
                    c.viewFrom < f && 20 > f - c.viewFrom && (f = Math.max(d.first, c.viewFrom));
                    c.viewTo > g && 20 > c.viewTo - g && (g = Math.min(e, c.viewTo));
                    Aa && (f = fd(a.doc, f),
                    g = pe(a.doc, g));
                    d = f != c.viewFrom || g != c.viewTo || c.lastWrapHeight != b.wrapperHeight || c.lastWrapWidth != b.wrapperWidth;
                    e = a.display;
                    0 == e.view.length || f >= e.viewTo || g <= e.viewFrom ? (e.view = pc(a, f, g),
                    e.viewFrom = f) : (e.viewFrom > f ? e.view = pc(a, f, e.viewFrom).concat(e.view) : e.viewFrom < f && (e.view = e.view.slice(Qa(a, f))),
                    e.viewFrom = f,
                    e.viewTo < g ? e.view = e.view.concat(pc(a, e.viewTo, g)) : e.viewTo > g && (e.view = e.view.slice(0, Qa(a, g))));
                    e.viewTo = g;
                    c.viewOffset = va(u(a.doc, c.viewFrom));
                    a.display.mover.style.top = c.viewOffset + "px";
                    g = Me(a);
                    if (!d && 0 == g && !b.force && c.renderedView == c.view && (null == c.updateLineNumbers || c.updateLineNumbers >= c.viewTo))
                        return !1;
                    a.hasFocus() ? f = null : (f = ha()) && x(a.display.lineDiv, f) ? (f = {
                        activeElt: f
                    },
                    window.getSelection && (e = window.getSelection(),
                    e.anchorNode && e.extend && x(a.display.lineDiv, e.anchorNode) && (f.anchorNode = e.anchorNode,
                    f.anchorOffset = e.anchorOffset,
                    f.focusNode = e.focusNode,
                    f.focusOffset = e.focusOffset))) : f = null;
                    4 < g && (c.lineDiv.style.display = "none");
                    Eg(a, c.updateLineNumbers, b.dims);
                    4 < g && (c.lineDiv.style.display = "");
                    c.renderedView = c.view;
                    (g = f) && g.activeElt && g.activeElt != ha() && (g.activeElt.focus(),
                    !/^(INPUT|TEXTAREA)$/.test(g.activeElt.nodeName) && g.anchorNode && x(document.body, g.anchorNode) && x(document.body, g.focusNode) && (f = window.getSelection(),
                    e = document.createRange(),
                    e.setEnd(g.anchorNode, g.anchorOffset),
                    e.collapse(!1),
                    f.removeAllRanges(),
                    f.addRange(e),
                    f.extend(g.focusNode, g.focusOffset)));
                    G(c.cursorDiv);
                    G(c.selectionDiv);
                    c.gutters.style.height = c.sizer.style.minHeight = 0;
                    d && (c.lastWrapHeight = b.wrapperHeight,
                    c.lastWrapWidth = b.wrapperWidth,
                    Jb(a, 400));
                    c.updateLineNumbers = null;
                    return !0
                }
                function Xe(a, b) {
                    for (var c = b.viewport, d = !0; ; d = !1) {
                        if (d && a.options.lineWrapping && b.oldDisplayWidth != Pa(a))
                            d && (b.visible = wc(a.display, a.doc, c));
                        else if (c && null != c.top && (c = {
                            top: Math.min(a.doc.height + kd(a.display) - ld(a), c.top)
                        }),
                        b.visible = wc(a.display, a.doc, c),
                        b.visible.from >= a.display.viewFrom && b.visible.to <= a.display.viewTo)
                            break;
                        if (!Bd(a, b))
                            break;
                        vc(a);
                        d = Kb(a);
                        Gb(a);
                        jb(a, d);
                        Cd(a, d);
                        b.force = !1
                    }
                    b.signal(a, "update", a);
                    if (a.display.viewFrom != a.display.reportedViewFrom || a.display.viewTo != a.display.reportedViewTo)
                        b.signal(a, "viewportChange", a, a.display.viewFrom, a.display.viewTo),
                        a.display.reportedViewFrom = a.display.viewFrom,
                        a.display.reportedViewTo = a.display.viewTo
                }
                function Ad(a, b) {
                    b = new zc(a,b);
                    if (Bd(a, b)) {
                        vc(a);
                        Xe(a, b);
                        var c = Kb(a);
                        Gb(a);
                        jb(a, c);
                        Cd(a, c);
                        b.finish()
                    }
                }
                function Eg(a, b, c) {
                    function d(b) {
                        var d = b.nextSibling;
                        Y && ma && a.display.currentWheelTarget == b ? b.style.display = "none" : b.parentNode.removeChild(b);
                        return d
                    }
                    var e = a.display
                      , f = a.options.lineNumbers
                      , g = e.lineDiv
                      , h = g.firstChild
                      , k = e.view;
                    e = e.viewFrom;
                    for (var l = 0; l < k.length; l++) {
                        var m = k[l];
                        if (!m.hidden)
                            if (m.node && m.node.parentNode == g) {
                                for (; h != m.node; )
                                    h = d(h);
                                h = f && null != b && b <= e && m.lineNumber;
                                m.changes && (-1 < O(m.changes, "gutter") && (h = !1),
                                ue(a, m, e, c));
                                h && (G(m.lineNumber),
                                m.lineNumber.appendChild(document.createTextNode(Zc(a.options, e))));
                                h = m.node.nextSibling
                            } else {
                                var q = wg(a, m, e, c);
                                g.insertBefore(q, h)
                            }
                        e += m.size
                    }
                    for (; h; )
                        h = d(h)
                }
                function Dd(a) {
                    a.sizer.style.marginLeft = a.gutters.offsetWidth + "px"
                }
                function Cd(a, b) {
                    a.display.sizer.style.minHeight = b.docHeight + "px";
                    a.display.heightForcer.style.top = b.docHeight + "px";
                    a.display.gutters.style.height = b.docHeight + a.display.barHeight + wa(a) + "px"
                }
                function Te(a) {
                    var b = a.display
                      , c = b.view;
                    if (b.alignWidgets || b.gutters.firstChild && a.options.fixedGutter) {
                        for (var d = ud(b) - b.scroller.scrollLeft + a.doc.scrollLeft, e = b.gutters.offsetWidth, f = d + "px", g = 0; g < c.length; g++)
                            if (!c[g].hidden) {
                                a.options.fixedGutter && (c[g].gutter && (c[g].gutter.style.left = f),
                                c[g].gutterBackground && (c[g].gutterBackground.style.left = f));
                                var h = c[g].alignable;
                                if (h)
                                    for (var k = 0; k < h.length; k++)
                                        h[k].style.left = f
                            }
                        a.options.fixedGutter && (b.gutters.style.left = d + e + "px")
                    }
                }
                function Ye(a) {
                    if (!a.options.lineNumbers)
                        return !1;
                    var b = a.doc;
                    b = Zc(a.options, b.first + b.size - 1);
                    var c = a.display;
                    if (b.length != c.lineNumChars) {
                        var d = c.measure.appendChild(p("div", [p("div", b)], "CodeMirror-linenumber CodeMirror-gutter-elt"))
                          , e = d.firstChild.offsetWidth;
                        d = d.offsetWidth - e;
                        c.lineGutter.style.width = "";
                        c.lineNumInnerWidth = Math.max(e, c.lineGutter.offsetWidth - d) + 1;
                        c.lineNumWidth = c.lineNumInnerWidth + d;
                        c.lineNumChars = c.lineNumInnerWidth ? b.length : -1;
                        c.lineGutter.style.width = c.lineNumWidth + "px";
                        Dd(a.display);
                        return !0
                    }
                    return !1
                }
                function Ed(a, b) {
                    for (var c = [], d = !1, e = 0; e < a.length; e++) {
                        var f = a[e]
                          , g = null;
                        "string" != typeof f && (g = f.style,
                        f = f.className);
                        if ("CodeMirror-linenumbers" == f)
                            if (b)
                                d = !0;
                            else
                                continue;
                        c.push({
                            className: f,
                            style: g
                        })
                    }
                    b && !d && c.push({
                        className: "CodeMirror-linenumbers",
                        style: null
                    });
                    return c
                }
                function Ze(a) {
                    var b = a.gutters
                      , c = a.gutterSpecs;
                    G(b);
                    a.lineGutter = null;
                    for (var d = 0; d < c.length; ++d) {
                        var e = c[d]
                          , f = e.className;
                        e = e.style;
                        var g = b.appendChild(p("div", null, "CodeMirror-gutter " + f));
                        e && (g.style.cssText = e);
                        "CodeMirror-linenumbers" == f && (a.lineGutter = g,
                        g.style.width = (a.lineNumWidth || 1) + "px")
                    }
                    b.style.display = c.length ? "" : "none";
                    Dd(a)
                }
                function Lb(a) {
                    Ze(a.display);
                    ba(a);
                    Te(a)
                }
                function Fg(a, b, c, d) {
                    this.input = c;
                    this.scrollbarFiller = p("div", null, "CodeMirror-scrollbar-filler");
                    this.scrollbarFiller.setAttribute("cm-not-content", "true");
                    this.gutterFiller = p("div", null, "CodeMirror-gutter-filler");
                    this.gutterFiller.setAttribute("cm-not-content", "true");
                    this.lineDiv = E("div", null, "CodeMirror-code");
                    this.selectionDiv = p("div", null, null, "position: relative; z-index: 1");
                    this.cursorDiv = p("div", null, "CodeMirror-cursors");
                    this.measure = p("div", null, "CodeMirror-measure");
                    this.lineMeasure = p("div", null, "CodeMirror-measure");
                    this.lineSpace = E("div", [this.measure, this.lineMeasure, this.selectionDiv, this.cursorDiv, this.lineDiv], null, "position: relative; outline: none");
                    var e = E("div", [this.lineSpace], "CodeMirror-lines");
                    this.mover = p("div", [e], null, "position: relative");
                    this.sizer = p("div", [this.mover], "CodeMirror-sizer");
                    this.sizerWidth = null;
                    this.heightForcer = p("div", null, null, "position: absolute; height: 50px; width: 1px;");
                    this.gutters = p("div", null, "CodeMirror-gutters");
                    this.lineGutter = null;
                    this.scroller = p("div", [this.sizer, this.heightForcer, this.gutters], "CodeMirror-scroll");
                    this.scroller.setAttribute("tabIndex", "-1");
                    this.wrapper = p("div", [this.scrollbarFiller, this.gutterFiller, this.scroller], "CodeMirror");
                    H && 8 > M && (this.gutters.style.zIndex = -1,
                    this.scroller.style.paddingRight = 0);
                    Y || Ca && Mb || (this.scroller.draggable = !0);
                    a && (a.appendChild ? a.appendChild(this.wrapper) : a(this.wrapper));
                    this.reportedViewFrom = this.reportedViewTo = this.viewFrom = this.viewTo = b.first;
                    this.view = [];
                    this.externalMeasured = this.renderedView = null;
                    this.lastWrapHeight = this.lastWrapWidth = this.viewOffset = 0;
                    this.updateLineNumbers = null;
                    this.nativeBarWidth = this.barHeight = this.barWidth = 0;
                    this.scrollbarsClipped = !1;
                    this.lineNumWidth = this.lineNumInnerWidth = this.lineNumChars = null;
                    this.alignWidgets = !1;
                    this.maxLine = this.cachedCharWidth = this.cachedTextHeight = this.cachedPaddingH = null;
                    this.maxLineLength = 0;
                    this.maxLineChanged = !1;
                    this.wheelDX = this.wheelDY = this.wheelStartX = this.wheelStartY = null;
                    this.shift = !1;
                    this.activeTouch = this.selForContextMenu = null;
                    this.gutterSpecs = Ed(d.gutters, d.lineNumbers);
                    Ze(this);
                    c.init(this)
                }
                function $e(a) {
                    var b = a.wheelDeltaX
                      , c = a.wheelDeltaY;
                    null == b && a.detail && a.axis == a.HORIZONTAL_AXIS && (b = a.detail);
                    null == c && a.detail && a.axis == a.VERTICAL_AXIS ? c = a.detail : null == c && (c = a.wheelDelta);
                    return {
                        x: b,
                        y: c
                    }
                }
                function Gg(a) {
                    a = $e(a);
                    a.x *= ja;
                    a.y *= ja;
                    return a
                }
                function af(a, b) {
                    var c = $e(b)
                      , d = c.x;
                    c = c.y;
                    var e = a.display
                      , f = e.scroller
                      , g = f.scrollWidth > f.clientWidth
                      , h = f.scrollHeight > f.clientHeight;
                    if (d && g || c && h) {
                        if (c && ma && Y) {
                            g = b.target;
                            var k = e.view;
                            a: for (; g != f; g = g.parentNode)
                                for (var l = 0; l < k.length; l++)
                                    if (k[l].node == g) {
                                        a.display.currentWheelTarget = g;
                                        break a
                                    }
                        }
                        !d || Ca || pa || null == ja ? (c && null != ja && (b = c * ja,
                        h = a.doc.scrollTop,
                        g = h + e.wrapper.clientHeight,
                        0 > b ? h = Math.max(0, h + b - 50) : g = Math.min(a.doc.height, g + b + 50),
                        Ad(a, {
                            top: h,
                            bottom: g
                        })),
                        20 > Ac && (null == e.wheelStartX ? (e.wheelStartX = f.scrollLeft,
                        e.wheelStartY = f.scrollTop,
                        e.wheelDX = d,
                        e.wheelDY = c,
                        setTimeout(function() {
                            if (null != e.wheelStartX) {
                                var a = f.scrollLeft - e.wheelStartX
                                  , b = f.scrollTop - e.wheelStartY;
                                a = b && e.wheelDY && b / e.wheelDY || a && e.wheelDX && a / e.wheelDX;
                                e.wheelStartX = e.wheelStartY = null;
                                a && (ja = (ja * Ac + a) / (Ac + 1),
                                ++Ac)
                            }
                        }, 200)) : (e.wheelDX += d,
                        e.wheelDY += c))) : (c && h && Ib(a, Math.max(0, f.scrollTop + c * ja)),
                        Va(a, Math.max(0, f.scrollLeft + d * ja)),
                        (!c || c && h) && aa(b),
                        e.wheelStartX = null)
                    }
                }
                function qa(a, b, c) {
                    a = a && a.options.selectionsMayTouch;
                    c = b[c];
                    b.sort(function(a, b) {
                        return A(a.from(), b.from())
                    });
                    c = O(b, c);
                    for (var d = 1; d < b.length; d++) {
                        var e = b[d]
                          , f = b[d - 1]
                          , g = A(f.to(), e.from());
                        if (a && !e.empty() ? 0 < g : 0 <= g) {
                            g = lc(f.from(), e.from());
                            var h = kc(f.to(), e.to());
                            e = f.empty() ? e.from() == e.head : f.from() == f.head;
                            d <= c && --c;
                            b.splice(--d, 2, new I(e ? h : g,e ? g : h))
                        }
                    }
                    return new ka(b,c)
                }
                function Da(a, b) {
                    return new ka([new I(a,b || a)],0)
                }
                function Ha(a) {
                    return a.text ? r(a.from.line + a.text.length - 1, y(a.text).length + (1 == a.text.length ? a.from.ch : 0)) : a.to
                }
                function bf(a, b) {
                    if (0 > A(a, b.from))
                        return a;
                    if (0 >= A(a, b.to))
                        return Ha(b);
                    var c = a.line + b.text.length - (b.to.line - b.from.line) - 1
                      , d = a.ch;
                    a.line == b.to.line && (d += Ha(b).ch - b.to.ch);
                    return r(c, d)
                }
                function Fd(a, b) {
                    for (var c = [], d = 0; d < a.sel.ranges.length; d++) {
                        var e = a.sel.ranges[d];
                        c.push(new I(bf(e.anchor, b),bf(e.head, b)))
                    }
                    return qa(a.cm, c, a.sel.primIndex)
                }
                function cf(a, b, c) {
                    return a.line == b.line ? r(c.line, a.ch - b.ch + c.ch) : r(c.line + (a.line - b.line), a.ch)
                }
                function Gd(a) {
                    a.doc.mode = Wc(a.options, a.doc.modeOption);
                    Nb(a)
                }
                function Nb(a) {
                    a.doc.iter(function(a) {
                        a.stateAfter && (a.stateAfter = null);
                        a.styles && (a.styles = null)
                    });
                    a.doc.modeFrontier = a.doc.highlightFrontier = a.doc.first;
                    Jb(a, 100);
                    a.state.modeGen++;
                    a.curOp && ba(a)
                }
                function df(a, b) {
                    return 0 == b.from.ch && 0 == b.to.ch && "" == y(b.text) && (!a.cm || a.cm.options.wholeLineUpdateBefore)
                }
                function Hd(a, b, c, d) {
                    function e(a, c, e) {
                        a.text = c;
                        a.stateAfter && (a.stateAfter = null);
                        a.styles && (a.styles = null);
                        null != a.order && (a.order = null);
                        me(a);
                        ne(a, e);
                        c = d ? d(a) : 1;
                        c != a.height && sa(a, c);
                        W(a, "change", a, b)
                    }
                    function f(a, b) {
                        for (var e = []; a < b; ++a)
                            e.push(new kb(k[a],c ? c[a] : null,d));
                        return e
                    }
                    var g = b.from
                      , h = b.to
                      , k = b.text
                      , l = u(a, g.line)
                      , m = u(a, h.line)
                      , q = y(k)
                      , n = c ? c[k.length - 1] : null
                      , t = h.line - g.line;
                    b.full ? (a.insert(0, f(0, k.length)),
                    a.remove(k.length, a.size - k.length)) : df(a, b) ? (h = f(0, k.length - 1),
                    e(m, m.text, n),
                    t && a.remove(g.line, t),
                    h.length && a.insert(g.line, h)) : l == m ? 1 == k.length ? e(l, l.text.slice(0, g.ch) + q + l.text.slice(h.ch), n) : (t = f(1, k.length - 1),
                    t.push(new kb(q + l.text.slice(h.ch),n,d)),
                    e(l, l.text.slice(0, g.ch) + k[0], c ? c[0] : null),
                    a.insert(g.line + 1, t)) : 1 == k.length ? (e(l, l.text.slice(0, g.ch) + k[0] + m.text.slice(h.ch), c ? c[0] : null),
                    a.remove(g.line + 1, t)) : (e(l, l.text.slice(0, g.ch) + k[0], c ? c[0] : null),
                    e(m, q + m.text.slice(h.ch), n),
                    n = f(1, k.length - 1),
                    1 < t && a.remove(g.line + 1, t - 1),
                    a.insert(g.line + 1, n));
                    W(a, "change", a, b)
                }
                function Ia(a, b, c) {
                    function d(a, f, g) {
                        if (a.linked)
                            for (var e = 0; e < a.linked.length; ++e) {
                                var k = a.linked[e];
                                if (k.doc != f) {
                                    var l = g && k.sharedHist;
                                    if (!c || l)
                                        b(k.doc, l),
                                        d(k.doc, a, l)
                                }
                            }
                    }
                    d(a, null, !0)
                }
                function ef(a, b) {
                    if (b.cm)
                        throw Error("This document is already in use.");
                    a.doc = b;
                    b.cm = a;
                    vd(a);
                    Gd(a);
                    ff(a);
                    a.options.lineWrapping || hd(a);
                    a.options.mode = b.modeOption;
                    ba(a)
                }
                function ff(a) {
                    ("rtl" == a.doc.direction ? L : Ua)(a.display.lineDiv, "CodeMirror-rtl")
                }
                function Hg(a) {
                    ea(a, function() {
                        ff(a);
                        ba(a)
                    })
                }
                function Bc(a) {
                    this.done = [];
                    this.undone = [];
                    this.undoDepth = Infinity;
                    this.lastModTime = this.lastSelTime = 0;
                    this.lastOrigin = this.lastSelOrigin = this.lastOp = this.lastSelOp = null;
                    this.generation = this.maxGeneration = a || 1
                }
                function Id(a, b) {
                    var c = {
                        from: ad(b.from),
                        to: Ha(b),
                        text: Na(a, b.from, b.to)
                    };
                    gf(a, c, b.from.line, b.to.line + 1);
                    Ia(a, function(a) {
                        return gf(a, c, b.from.line, b.to.line + 1)
                    }, !0);
                    return c
                }
                function hf(a) {
                    for (; a.length; )
                        if (y(a).ranges)
                            a.pop();
                        else
                            break
                }
                function jf(a, b, c, d) {
                    var e = a.history;
                    e.undone.length = 0;
                    var f = +new Date, g;
                    if (g = e.lastOp == d || e.lastOrigin == b.origin && b.origin && ("+" == b.origin.charAt(0) && e.lastModTime > f - (a.cm ? a.cm.options.historyEventDelay : 500) || "*" == b.origin.charAt(0))) {
                        if (e.lastOp == d) {
                            hf(e.done);
                            var h = y(e.done)
                        } else
                            e.done.length && !y(e.done).ranges ? h = y(e.done) : 1 < e.done.length && !e.done[e.done.length - 2].ranges ? (e.done.pop(),
                            h = y(e.done)) : h = void 0;
                        g = h
                    }
                    if (g) {
                        var k = y(h.changes);
                        0 == A(b.from, b.to) && 0 == A(b.from, k.to) ? k.to = Ha(b) : h.changes.push(Id(a, b))
                    } else
                        for ((h = y(e.done)) && h.ranges || Cc(a.sel, e.done),
                        h = {
                            changes: [Id(a, b)],
                            generation: e.generation
                        },
                        e.done.push(h); e.done.length > e.undoDepth; )
                            e.done.shift(),
                            e.done[0].ranges || e.done.shift();
                    e.done.push(c);
                    e.generation = ++e.maxGeneration;
                    e.lastModTime = e.lastSelTime = f;
                    e.lastOp = e.lastSelOp = d;
                    e.lastOrigin = e.lastSelOrigin = b.origin;
                    k || R(a, "historyAdded")
                }
                function Cc(a, b) {
                    var c = y(b);
                    c && c.ranges && c.equals(a) || b.push(a)
                }
                function gf(a, b, c, d) {
                    var e = b["spans_" + a.id]
                      , f = 0;
                    a.iter(Math.max(a.first, c), Math.min(a.first + a.size, d), function(d) {
                        d.markedSpans && ((e || (e = b["spans_" + a.id] = {}))[f] = d.markedSpans);
                        ++f
                    })
                }
                function Ig(a) {
                    if (!a)
                        return null;
                    for (var b, c = 0; c < a.length; ++c)
                        a[c].marker.explicitlyCleared ? b || (b = a.slice(0, c)) : b && b.push(a[c]);
                    return b ? b.length ? b : null : a
                }
                function kf(a, b) {
                    var c;
                    if (c = b["spans_" + a.id]) {
                        for (var d = [], e = 0; e < b.text.length; ++e)
                            d.push(Ig(c[e]));
                        c = d
                    } else
                        c = null;
                    a = dd(a, b);
                    if (!c)
                        return a;
                    if (!a)
                        return c;
                    for (b = 0; b < c.length; ++b)
                        if (d = c[b],
                        e = a[b],
                        d && e) {
                            var f = 0;
                            a: for (; f < e.length; ++f) {
                                for (var g = e[f], h = 0; h < d.length; ++h)
                                    if (d[h].marker == g.marker)
                                        continue a;
                                d.push(g)
                            }
                        } else
                            e && (c[b] = e);
                    return c
                }
                function lb(a, b, c) {
                    for (var d = [], e = 0; e < a.length; ++e) {
                        var f = a[e];
                        if (f.ranges)
                            d.push(c ? ka.prototype.deepCopy.call(f) : f);
                        else {
                            f = f.changes;
                            var g = [];
                            d.push({
                                changes: g
                            });
                            for (var h = 0; h < f.length; ++h) {
                                var k = f[h], l;
                                g.push({
                                    from: k.from,
                                    to: k.to,
                                    text: k.text
                                });
                                if (b)
                                    for (var m in k)
                                        (l = m.match(/^spans_(\d+)$/)) && -1 < O(b, Number(l[1])) && (y(g)[m] = k[m],
                                        delete k[m])
                            }
                        }
                    }
                    return d
                }
                function Jd(a, b, c, d) {
                    return d ? (a = a.anchor,
                    c && (d = 0 > A(b, a),
                    d != 0 > A(c, a) ? (a = b,
                    b = c) : d != 0 > A(b, c) && (b = c)),
                    new I(a,b)) : new I(c || b,b)
                }
                function Dc(a, b, c, d, e) {
                    null == e && (e = a.cm && (a.cm.display.shift || a.extend));
                    X(a, new ka([Jd(a.sel.primary(), b, c, e)],0), d)
                }
                function lf(a, b, c) {
                    for (var d = [], e = a.cm && (a.cm.display.shift || a.extend), f = 0; f < a.sel.ranges.length; f++)
                        d[f] = Jd(a.sel.ranges[f], b[f], null, e);
                    b = qa(a.cm, d, a.sel.primIndex);
                    X(a, b, c)
                }
                function Kd(a, b, c, d) {
                    var e = a.sel.ranges.slice(0);
                    e[b] = c;
                    X(a, qa(a.cm, e, a.sel.primIndex), d)
                }
                function Jg(a, b, c) {
                    c = {
                        ranges: b.ranges,
                        update: function(b) {
                            this.ranges = [];
                            for (var d = 0; d < b.length; d++)
                                this.ranges[d] = new I(B(a, b[d].anchor),B(a, b[d].head))
                        },
                        origin: c && c.origin
                    };
                    R(a, "beforeSelectionChange", a, c);
                    a.cm && R(a.cm, "beforeSelectionChange", a.cm, c);
                    return c.ranges != b.ranges ? qa(a.cm, c.ranges, c.ranges.length - 1) : b
                }
                function mf(a, b, c) {
                    var d = a.history.done
                      , e = y(d);
                    e && e.ranges ? (d[d.length - 1] = b,
                    Ec(a, b, c)) : X(a, b, c)
                }
                function X(a, b, c) {
                    Ec(a, b, c);
                    b = a.sel;
                    var d = a.cm ? a.cm.curOp.id : NaN, e = a.history, f = c && c.origin, g;
                    if (!(g = d == e.lastSelOp) && (g = f && e.lastSelOrigin == f) && !(g = e.lastModTime == e.lastSelTime && e.lastOrigin == f)) {
                        g = y(e.done);
                        var h = f.charAt(0);
                        g = "*" == h || "+" == h && g.ranges.length == b.ranges.length && g.somethingSelected() == b.somethingSelected() && new Date - a.history.lastSelTime <= (a.cm ? a.cm.options.historyEventDelay : 500)
                    }
                    g ? e.done[e.done.length - 1] = b : Cc(b, e.done);
                    e.lastSelTime = +new Date;
                    e.lastSelOrigin = f;
                    e.lastSelOp = d;
                    c && !1 !== c.clearRedo && hf(e.undone)
                }
                function Ec(a, b, c) {
                    if (la(a, "beforeSelectionChange") || a.cm && la(a.cm, "beforeSelectionChange"))
                        b = Jg(a, b, c);
                    var d = c && c.bias || (0 > A(b.primary().head, a.sel.primary().head) ? -1 : 1);
                    nf(a, of(a, b, d, !0));
                    c && !1 === c.scroll || !a.cm || "nocursor" == a.cm.getOption("readOnly") || ib(a.cm)
                }
                function nf(a, b) {
                    b.equals(a.sel) || (a.sel = b,
                    a.cm && (a.cm.curOp.updateInput = 1,
                    a.cm.curOp.selectionChanged = !0,
                    $d(a.cm)),
                    W(a, "cursorActivity", a))
                }
                function pf(a) {
                    nf(a, of(a, a.sel, null, !1))
                }
                function of(a, b, c, d) {
                    for (var e, f = 0; f < b.ranges.length; f++) {
                        var g = b.ranges[f]
                          , h = b.ranges.length == a.sel.ranges.length && a.sel.ranges[f]
                          , k = Fc(a, g.anchor, h && h.anchor, c, d);
                        h = Fc(a, g.head, h && h.head, c, d);
                        if (e || k != g.anchor || h != g.head)
                            e || (e = b.ranges.slice(0, f)),
                            e[f] = new I(k,h)
                    }
                    return e ? qa(a.cm, e, b.primIndex) : b
                }
                function mb(a, b, c, d, e) {
                    var f = u(a, b.line);
                    if (f.markedSpans)
                        for (var g = 0; g < f.markedSpans.length; ++g) {
                            var h = f.markedSpans[g]
                              , k = h.marker
                              , l = "selectLeft"in k ? !k.selectLeft : k.inclusiveLeft
                              , m = "selectRight"in k ? !k.selectRight : k.inclusiveRight;
                            if ((null == h.from || (l ? h.from <= b.ch : h.from < b.ch)) && (null == h.to || (m ? h.to >= b.ch : h.to > b.ch))) {
                                if (e && (R(k, "beforeCursorEnter"),
                                k.explicitlyCleared))
                                    if (f.markedSpans) {
                                        --g;
                                        continue
                                    } else
                                        break;
                                if (k.atomic) {
                                    if (c) {
                                        g = k.find(0 > d ? 1 : -1);
                                        h = void 0;
                                        if (0 > d ? m : l)
                                            g = qf(a, g, -d, g && g.line == b.line ? f : null);
                                        if (g && g.line == b.line && (h = A(g, c)) && (0 > d ? 0 > h : 0 < h))
                                            return mb(a, g, b, d, e)
                                    }
                                    c = k.find(0 > d ? -1 : 1);
                                    if (0 > d ? l : m)
                                        c = qf(a, c, d, c.line == b.line ? f : null);
                                    return c ? mb(a, c, b, d, e) : null
                                }
                            }
                        }
                    return b
                }
                function Fc(a, b, c, d, e) {
                    d = d || 1;
                    b = mb(a, b, c, d, e) || !e && mb(a, b, c, d, !0) || mb(a, b, c, -d, e) || !e && mb(a, b, c, -d, !0);
                    return b ? b : (a.cantEdit = !0,
                    r(a.first, 0))
                }
                function qf(a, b, c, d) {
                    return 0 > c && 0 == b.ch ? b.line > a.first ? B(a, r(b.line - 1)) : null : 0 < c && b.ch == (d || u(a, b.line)).text.length ? b.line < a.first + a.size - 1 ? r(b.line + 1, 0) : null : new r(b.line,b.ch + c)
                }
                function rf(a) {
                    a.setSelection(r(a.firstLine(), 0), r(a.lastLine()), xa)
                }
                function sf(a, b, c) {
                    var d = {
                        canceled: !1,
                        from: b.from,
                        to: b.to,
                        text: b.text,
                        origin: b.origin,
                        cancel: function() {
                            return d.canceled = !0
                        }
                    };
                    c && (d.update = function(b, c, g, h) {
                        b && (d.from = B(a, b));
                        c && (d.to = B(a, c));
                        g && (d.text = g);
                        void 0 !== h && (d.origin = h)
                    }
                    );
                    R(a, "beforeChange", a, d);
                    a.cm && R(a.cm, "beforeChange", a.cm, d);
                    return d.canceled ? (a.cm && (a.cm.curOp.updateInput = 2),
                    null) : {
                        from: d.from,
                        to: d.to,
                        text: d.text,
                        origin: d.origin
                    }
                }
                function nb(a, b, c) {
                    if (a.cm) {
                        if (!a.cm.curOp)
                            return U(a.cm, nb)(a, b, c);
                        if (a.cm.state.suppressEdits)
                            return
                    }
                    if (la(a, "beforeChange") || a.cm && la(a.cm, "beforeChange"))
                        if (b = sf(a, b, !0),
                        !b)
                            return;
                    if (c = tf && !c && og(a, b.from, b.to))
                        for (var d = c.length - 1; 0 <= d; --d)
                            uf(a, {
                                from: c[d].from,
                                to: c[d].to,
                                text: d ? [""] : b.text,
                                origin: b.origin
                            });
                    else
                        uf(a, b)
                }
                function uf(a, b) {
                    if (1 != b.text.length || "" != b.text[0] || 0 != A(b.from, b.to)) {
                        var c = Fd(a, b);
                        jf(a, b, c, a.cm ? a.cm.curOp.id : NaN);
                        Ob(a, b, c, dd(a, b));
                        var d = [];
                        Ia(a, function(a, c) {
                            c || -1 != O(d, a.history) || (vf(a.history, b),
                            d.push(a.history));
                            Ob(a, b, null, dd(a, b))
                        })
                    }
                }
                function Gc(a, b, c) {
                    var d = a.cm && a.cm.state.suppressEdits;
                    if (!d || c) {
                        for (var e = a.history, f, g = a.sel, h = "undo" == b ? e.done : e.undone, k = "undo" == b ? e.undone : e.done, l = 0; l < h.length && (f = h[l],
                        c ? !f.ranges || f.equals(a.sel) : f.ranges); l++)
                            ;
                        if (l != h.length) {
                            for (e.lastOrigin = e.lastSelOrigin = null; ; )
                                if (f = h.pop(),
                                f.ranges) {
                                    Cc(f, k);
                                    if (c && !f.equals(a.sel)) {
                                        X(a, f, {
                                            clearRedo: !1
                                        });
                                        return
                                    }
                                    g = f
                                } else {
                                    if (d) {
                                        h.push(f);
                                        return
                                    }
                                    break
                                }
                            var m = [];
                            Cc(g, k);
                            k.push({
                                changes: m,
                                generation: e.generation
                            });
                            e.generation = f.generation || ++e.maxGeneration;
                            var q = la(a, "beforeChange") || a.cm && la(a.cm, "beforeChange");
                            c = function(d) {
                                var c = f.changes[d];
                                c.origin = b;
                                if (q && !sf(a, c, !1))
                                    return h.length = 0,
                                    {};
                                m.push(Id(a, c));
                                var e = d ? Fd(a, c) : y(h);
                                Ob(a, c, e, kf(a, c));
                                !d && a.cm && a.cm.scrollIntoView({
                                    from: c.from,
                                    to: Ha(c)
                                });
                                var g = [];
                                Ia(a, function(a, b) {
                                    b || -1 != O(g, a.history) || (vf(a.history, c),
                                    g.push(a.history));
                                    Ob(a, c, null, kf(a, c))
                                })
                            }
                            ;
                            for (d = f.changes.length - 1; 0 <= d; --d)
                                if (e = c(d))
                                    return e.v
                        }
                    }
                }
                function wf(a, b) {
                    if (0 != b && (a.first += b,
                    a.sel = new ka(hc(a.sel.ranges, function(a) {
                        return new I(r(a.anchor.line + b, a.anchor.ch),r(a.head.line + b, a.head.ch))
                    }),a.sel.primIndex),
                    a.cm)) {
                        ba(a.cm, a.first, a.first - b, b);
                        for (var c = a.cm.display, d = c.viewFrom; d < c.viewTo; d++)
                            Ga(a.cm, d, "gutter")
                    }
                }
                function Ob(a, b, c, d) {
                    if (a.cm && !a.cm.curOp)
                        return U(a.cm, Ob)(a, b, c, d);
                    if (b.to.line < a.first)
                        wf(a, b.text.length - 1 - (b.to.line - b.from.line));
                    else if (!(b.from.line > a.lastLine())) {
                        if (b.from.line < a.first) {
                            var e = b.text.length - 1 - (a.first - b.from.line);
                            wf(a, e);
                            b = {
                                from: r(a.first, 0),
                                to: r(b.to.line + e, b.to.ch),
                                text: [y(b.text)],
                                origin: b.origin
                            }
                        }
                        e = a.lastLine();
                        b.to.line > e && (b = {
                            from: b.from,
                            to: r(e, u(a, e).text.length),
                            text: [b.text[0]],
                            origin: b.origin
                        });
                        b.removed = Na(a, b.from, b.to);
                        c || (c = Fd(a, b));
                        a.cm ? Kg(a.cm, b, d) : Hd(a, b, d);
                        Ec(a, c, xa);
                        a.cantEdit && Fc(a, r(a.firstLine(), 0)) && (a.cantEdit = !1)
                    }
                }
                function Kg(a, b, c) {
                    var d = a.doc
                      , e = a.display
                      , f = b.from
                      , g = b.to
                      , h = !1
                      , k = f.line;
                    a.options.lineWrapping || (k = J(ua(u(d, f.line))),
                    d.iter(k, g.line + 1, function(a) {
                        if (a == e.maxLine)
                            return h = !0
                    }));
                    -1 < d.sel.contains(b.from, b.to) && $d(a);
                    Hd(d, b, c, Le(a));
                    a.options.lineWrapping || (d.iter(k, f.line + b.text.length, function(a) {
                        var b = oc(a);
                        b > e.maxLineLength && (e.maxLine = a,
                        e.maxLineLength = b,
                        e.maxLineChanged = !0,
                        h = !1)
                    }),
                    h && (a.curOp.updateMaxLine = !0));
                    ng(d, f.line);
                    Jb(a, 400);
                    c = b.text.length - (g.line - f.line) - 1;
                    b.full ? ba(a) : f.line != g.line || 1 != b.text.length || df(a.doc, b) ? ba(a, f.line, g.line + 1, c) : Ga(a, f.line, "text");
                    c = la(a, "changes");
                    if ((d = la(a, "change")) || c)
                        b = {
                            from: f,
                            to: g,
                            text: b.text,
                            removed: b.removed,
                            origin: b.origin
                        },
                        d && W(a, "change", a, b),
                        c && (a.curOp.changeObjs || (a.curOp.changeObjs = [])).push(b);
                    a.display.selForContextMenu = null
                }
                function ob(a, b, c, d, e) {
                    d || (d = c);
                    0 > A(d, c) && (d = [d, c],
                    c = d[0],
                    d = d[1]);
                    "string" == typeof b && (b = a.splitLines(b));
                    nb(a, {
                        from: c,
                        to: d,
                        text: b,
                        origin: e
                    })
                }
                function xf(a, b, c, d) {
                    c < a.line ? a.line += d : b < a.line && (a.line = b,
                    a.ch = 0)
                }
                function yf(a, b, c, d) {
                    for (var e = 0; e < a.length; ++e) {
                        var f = a[e]
                          , g = !0;
                        if (f.ranges)
                            for (f.copied || (f = a[e] = f.deepCopy(),
                            f.copied = !0),
                            g = 0; g < f.ranges.length; g++)
                                xf(f.ranges[g].anchor, b, c, d),
                                xf(f.ranges[g].head, b, c, d);
                        else {
                            for (var h = 0; h < f.changes.length; ++h) {
                                var k = f.changes[h];
                                if (c < k.from.line)
                                    k.from = r(k.from.line + d, k.from.ch),
                                    k.to = r(k.to.line + d, k.to.ch);
                                else if (b <= k.to.line) {
                                    g = !1;
                                    break
                                }
                            }
                            g || (a.splice(0, e + 1),
                            e = 0)
                        }
                    }
                }
                function vf(a, b) {
                    var c = b.from.line
                      , d = b.to.line;
                    b = b.text.length - (d - c) - 1;
                    yf(a.done, c, d, b);
                    yf(a.undone, c, d, b)
                }
                function Pb(a, b, c, d) {
                    var e = b
                      , f = b;
                    "number" == typeof b ? f = u(a, Math.max(a.first, Math.min(b, a.first + a.size - 1))) : e = J(b);
                    if (null == e)
                        return null;
                    d(f, e) && a.cm && Ga(a.cm, e, c);
                    return f
                }
                function Qb(a) {
                    this.lines = a;
                    this.parent = null;
                    for (var b = 0, c = 0; c < a.length; ++c)
                        a[c].parent = this,
                        b += a[c].height;
                    this.height = b
                }
                function Rb(a) {
                    this.children = a;
                    for (var b = 0, c = 0, d = 0; d < a.length; ++d) {
                        var e = a[d];
                        b += e.chunkSize();
                        c += e.height;
                        e.parent = this
                    }
                    this.size = b;
                    this.height = c;
                    this.parent = null
                }
                function Lg(a, b, c, d) {
                    var e = new Sb(a,c,d)
                      , f = a.cm;
                    f && e.noHScroll && (f.display.alignWidgets = !0);
                    Pb(a, b, "widget", function(b) {
                        var d = b.widgets || (b.widgets = []);
                        null == e.insertAt ? d.push(e) : d.splice(Math.min(d.length, Math.max(0, e.insertAt)), 0, e);
                        e.line = b;
                        f && !Ea(a, b) && (d = va(b) < a.scrollTop,
                        sa(b, b.height + Eb(e)),
                        d && xc(f, e.height),
                        f.curOp.forceUpdate = !0);
                        return !0
                    });
                    f && W(f, "lineWidgetAdded", f, e, "number" == typeof b ? b : J(b));
                    return e
                }
                function pb(a, b, c, d, e) {
                    if (d && d.shared)
                        return Mg(a, b, c, d, e);
                    if (a.cm && !a.cm.curOp)
                        return U(a.cm, pb)(a, b, c, d, e);
                    var f = new Ja(a,e);
                    e = A(b, c);
                    d && C(d, f, !1);
                    if (0 < e || 0 == e && !1 !== f.clearWhenEmpty)
                        return f;
                    f.replacedWith && (f.collapsed = !0,
                    f.widgetNode = E("span", [f.replacedWith], "CodeMirror-widget"),
                    d.handleMouseEvents || f.widgetNode.setAttribute("cm-ignore-events", "true"),
                    d.insertLeft && (f.widgetNode.insertLeft = !0));
                    if (f.collapsed) {
                        if (oe(a, b.line, b, c, f) || b.line != c.line && oe(a, c.line, b, c, f))
                            throw Error("Inserting collapsed marker partially overlapping an existing one");
                        Aa = !0
                    }
                    f.addToHistory && jf(a, {
                        from: b,
                        to: c,
                        origin: "markText"
                    }, a.sel, NaN);
                    var g = b.line, h = a.cm, k;
                    a.iter(g, c.line + 1, function(a) {
                        h && f.collapsed && !h.options.lineWrapping && ua(a) == h.display.maxLine && (k = !0);
                        f.collapsed && g != b.line && sa(a, 0);
                        var d = new nc(f,g == b.line ? b.ch : null,g == c.line ? c.ch : null);
                        a.markedSpans = a.markedSpans ? a.markedSpans.concat([d]) : [d];
                        d.marker.attachLine(a);
                        ++g
                    });
                    f.collapsed && a.iter(b.line, c.line + 1, function(b) {
                        Ea(a, b) && sa(b, 0)
                    });
                    f.clearOnEnter && z(f, "beforeCursorEnter", function() {
                        return f.clear()
                    });
                    f.readOnly && (tf = !0,
                    (a.history.done.length || a.history.undone.length) && a.clearHistory());
                    f.collapsed && (f.id = ++zf,
                    f.atomic = !0);
                    if (h) {
                        k && (h.curOp.updateMaxLine = !0);
                        if (f.collapsed)
                            ba(h, b.line, c.line + 1);
                        else if (f.className || f.startStyle || f.endStyle || f.css || f.attributes || f.title)
                            for (d = b.line; d <= c.line; d++)
                                Ga(h, d, "text");
                        f.atomic && pf(h.doc);
                        W(h, "markerAdded", h, f)
                    }
                    return f
                }
                function Mg(a, b, c, d, e) {
                    d = C(d);
                    d.shared = !1;
                    var f = [pb(a, b, c, d, e)]
                      , g = f[0]
                      , h = d.widgetNode;
                    Ia(a, function(a) {
                        h && (d.widgetNode = h.cloneNode(!0));
                        f.push(pb(a, B(a, b), B(a, c), d, e));
                        for (var k = 0; k < a.linked.length; ++k)
                            if (a.linked[k].isParent)
                                return;
                        g = y(f)
                    });
                    return new Tb(f,g)
                }
                function Af(a) {
                    return a.findMarks(r(a.first, 0), a.clipPos(r(a.lastLine())), function(a) {
                        return a.parent
                    })
                }
                function Ng(a) {
                    for (var b = function(b) {
                        b = a[b];
                        var d = [b.primary.doc];
                        Ia(b.primary.doc, function(a) {
                            return d.push(a)
                        });
                        for (var c = 0; c < b.markers.length; c++) {
                            var g = b.markers[c];
                            -1 == O(d, g.doc) && (g.parent = null,
                            b.markers.splice(c--, 1))
                        }
                    }, c = 0; c < a.length; c++)
                        b(c)
                }
                function Og(a) {
                    var b = this;
                    Bf(b);
                    if (!T(b, a) && !Ba(b.display, a)) {
                        aa(a);
                        H && (Cf = +new Date);
                        var c = Ta(b, a, !0)
                          , d = a.dataTransfer.files;
                        if (c && !b.isReadOnly())
                            if (d && d.length && window.FileReader && window.File)
                                for (var e = d.length, f = Array(e), g = 0, h = function() {
                                    ++g == e && U(b, function() {
                                        c = B(b.doc, c);
                                        var a = {
                                            from: c,
                                            to: c,
                                            text: b.doc.splitLines(f.filter(function(a) {
                                                return null != a
                                            }).join(b.doc.lineSeparator())),
                                            origin: "paste"
                                        };
                                        nb(b.doc, a);
                                        mf(b.doc, Da(B(b.doc, c), B(b.doc, Ha(a))))
                                    })()
                                }, k = function(a, d) {
                                    if (b.options.allowDropFileTypes && -1 == O(b.options.allowDropFileTypes, a.type))
                                        h();
                                    else {
                                        var c = new FileReader;
                                        c.onerror = function() {
                                            return h()
                                        }
                                        ;
                                        c.onload = function() {
                                            var a = c.result;
                                            /[\x00-\x08\x0e-\x1f]{2}/.test(a) || (f[d] = a);
                                            h()
                                        }
                                        ;
                                        c.readAsText(a)
                                    }
                                }, l = 0; l < d.length; l++)
                                    k(d[l], l);
                            else if (b.state.draggingText && -1 < b.doc.sel.contains(c))
                                b.state.draggingText(a),
                                setTimeout(function() {
                                    return b.display.input.focus()
                                }, 20);
                            else
                                try {
                                    if (k = a.dataTransfer.getData("Text")) {
                                        b.state.draggingText && !b.state.draggingText.copy && (l = b.listSelections());
                                        Ec(b.doc, Da(c, c));
                                        if (l)
                                            for (d = 0; d < l.length; ++d)
                                                ob(b.doc, "", l[d].anchor, l[d].head, "drag");
                                        b.replaceSelection(k, "around", "paste");
                                        b.display.input.focus()
                                    }
                                } catch (m) {}
                    }
                }
                function Bf(a) {
                    a.display.dragCursor && (a.display.lineSpace.removeChild(a.display.dragCursor),
                    a.display.dragCursor = null)
                }
                function Df(a) {
                    if (document.getElementsByClassName) {
                        for (var b = document.getElementsByClassName("CodeMirror"), c = [], d = 0; d < b.length; d++) {
                            var e = b[d].CodeMirror;
                            e && c.push(e)
                        }
                        c.length && c[0].operation(function() {
                            for (var b = 0; b < c.length; b++)
                                a(c[b])
                        })
                    }
                }
                function Pg() {
                    var a;
                    z(window, "resize", function() {
                        null == a && (a = setTimeout(function() {
                            a = null;
                            Df(Qg)
                        }, 100))
                    });
                    z(window, "blur", function() {
                        return Df(hb)
                    })
                }
                function Qg(a) {
                    var b = a.display;
                    b.cachedCharWidth = b.cachedTextHeight = b.cachedPaddingH = null;
                    b.scrollbarsClipped = !1;
                    a.setSize()
                }
                function Rg(a) {
                    var b = a.split(/-(?!$)/);
                    a = b[b.length - 1];
                    for (var c, d, e, f, g = 0; g < b.length - 1; g++) {
                        var h = b[g];
                        if (/^(cmd|meta|m)$/i.test(h))
                            f = !0;
                        else if (/^a(lt)?$/i.test(h))
                            c = !0;
                        else if (/^(c|ctrl|control)$/i.test(h))
                            d = !0;
                        else if (/^s(hift)?$/i.test(h))
                            e = !0;
                        else
                            throw Error("Unrecognized modifier name: " + h);
                    }
                    c && (a = "Alt-" + a);
                    d && (a = "Ctrl-" + a);
                    f && (a = "Cmd-" + a);
                    e && (a = "Shift-" + a);
                    return a
                }
                function Sg(a) {
                    var b = {}, c;
                    for (c in a)
                        if (a.hasOwnProperty(c)) {
                            var d = a[c];
                            if (!/^(name|fallthrough|(de|at)tach)$/.test(c)) {
                                if ("..." != d)
                                    for (var e = hc(c.split(" "), Rg), f = 0; f < e.length; f++) {
                                        if (f == e.length - 1) {
                                            var g = e.join(" ");
                                            var h = d
                                        } else
                                            g = e.slice(0, f + 1).join(" "),
                                            h = "...";
                                        var k = b[g];
                                        if (!k)
                                            b[g] = h;
                                        else if (k != h)
                                            throw Error("Inconsistent bindings for " + g);
                                    }
                                delete a[c]
                            }
                        }
                    for (var l in b)
                        a[l] = b[l];
                    return a
                }
                function qb(a, b, c, d) {
                    b = Hc(b);
                    var e = b.call ? b.call(a, d) : b[a];
                    if (!1 === e)
                        return "nothing";
                    if ("..." === e)
                        return "multi";
                    if (null != e && c(e))
                        return "handled";
                    if (b.fallthrough) {
                        if ("[object Array]" != Object.prototype.toString.call(b.fallthrough))
                            return qb(a, b.fallthrough, c, d);
                        for (e = 0; e < b.fallthrough.length; e++) {
                            var f = qb(a, b.fallthrough[e], c, d);
                            if (f)
                                return f
                        }
                    }
                }
                function Ef(a) {
                    a = "string" == typeof a ? a : Ka[a.keyCode];
                    return "Ctrl" == a || "Alt" == a || "Shift" == a || "Mod" == a
                }
                function Ff(a, b, c) {
                    var d = a;
                    b.altKey && "Alt" != d && (a = "Alt-" + a);
                    (Gf ? b.metaKey : b.ctrlKey) && "Ctrl" != d && (a = "Ctrl-" + a);
                    (Gf ? b.ctrlKey : b.metaKey) && "Mod" != d && (a = "Cmd-" + a);
                    !c && b.shiftKey && "Shift" != d && (a = "Shift-" + a);
                    return a
                }
                function Hf(a, b) {
                    if (pa && 34 == a.keyCode && a["char"])
                        return !1;
                    var c = Ka[a.keyCode];
                    if (null == c || a.altGraphKey)
                        return !1;
                    3 == a.keyCode && a.code && (c = a.code);
                    return Ff(c, a, b)
                }
                function Hc(a) {
                    return "string" == typeof a ? Ub[a] : a
                }
                function rb(a, b) {
                    for (var c = a.doc.sel.ranges, d = [], e = 0; e < c.length; e++) {
                        for (var f = b(c[e]); d.length && 0 >= A(f.from, y(d).to); ) {
                            var g = d.pop();
                            if (0 > A(g.from, f.from)) {
                                f.from = g.from;
                                break
                            }
                        }
                        d.push(f)
                    }
                    ea(a, function() {
                        for (var b = d.length - 1; 0 <= b; b--)
                            ob(a.doc, "", d[b].from, d[b].to, "+delete");
                        ib(a)
                    })
                }
                function Ld(a, b, c) {
                    b = Zd(a.text, b + c, c);
                    return 0 > b || b > a.text.length ? null : b
                }
                function Md(a, b, c) {
                    a = Ld(a, b.ch, c);
                    return null == a ? null : new r(b.line,a,0 > c ? "after" : "before")
                }
                function Nd(a, b, c, d, e) {
                    if (a && ("rtl" == b.doc.direction && (e = -e),
                    a = za(c, b.doc.direction))) {
                        a = 0 > e ? y(a) : a[0];
                        var f = 0 > e == (1 == a.level) ? "after" : "before";
                        if (0 < a.level || "rtl" == b.doc.direction) {
                            var g = Ra(b, c);
                            var h = 0 > e ? c.text.length - 1 : 0;
                            var k = na(b, g, h).top;
                            h = ub(function(a) {
                                return na(b, g, a).top == k
                            }, 0 > e == (1 == a.level) ? a.from : a.to - 1, h);
                            "before" == f && (h = Ld(c, h, 1))
                        } else
                            h = 0 > e ? a.to : a.from;
                        return new r(d,h,f)
                    }
                    return new r(d,0 > e ? c.text.length : 0,0 > e ? "before" : "after")
                }
                function Tg(a, b, c, d) {
                    var e = za(b, a.doc.direction);
                    if (!e)
                        return Md(b, c, d);
                    c.ch >= b.text.length ? (c.ch = b.text.length,
                    c.sticky = "before") : 0 >= c.ch && (c.ch = 0,
                    c.sticky = "after");
                    var f = vb(e, c.ch, c.sticky)
                      , g = e[f];
                    if ("ltr" == a.doc.direction && 0 == g.level % 2 && (0 < d ? g.to > c.ch : g.from < c.ch))
                        return Md(b, c, d);
                    var h = function(a, d) {
                        return Ld(b, a instanceof r ? a.ch : a, d)
                    }, k, l = function(d) {
                        if (!a.options.lineWrapping)
                            return {
                                begin: 0,
                                end: b.text.length
                            };
                        k = k || Ra(a, b);
                        return Ke(a, b, k, d)
                    }, m = l("before" == c.sticky ? h(c, -1) : c.ch);
                    if ("rtl" == a.doc.direction || 1 == g.level) {
                        var q = 1 == g.level == 0 > d
                          , n = h(c, q ? 1 : -1);
                        if (null != n && (q ? n <= g.to && n <= m.end : n >= g.from && n >= m.begin))
                            return new r(c.line,n,q ? "before" : "after")
                    }
                    g = function(a, b, d) {
                        for (var f = function(a, b) {
                            return b ? new r(c.line,h(a, 1),"before") : new r(c.line,a,"after")
                        }; 0 <= a && a < e.length; a += b) {
                            var g = e[a]
                              , k = 0 < b == (1 != g.level)
                              , l = k ? d.begin : h(d.end, -1);
                            if (g.from <= l && l < g.to)
                                return f(l, k);
                            l = k ? g.from : h(g.to, -1);
                            if (d.begin <= l && l < d.end)
                                return f(l, k)
                        }
                    }
                    ;
                    if (f = g(f + d, d, m))
                        return f;
                    m = 0 < d ? m.end : h(m.begin, -1);
                    return null == m || 0 < d && m == b.text.length || !(f = g(0 < d ? 0 : e.length - 1, d, l(m))) ? null : f
                }
                function If(a, b) {
                    var c = u(a.doc, b)
                      , d = ua(c);
                    d != c && (b = J(d));
                    return Nd(!0, a, d, b, 1)
                }
                function Jf(a, b) {
                    var c = If(a, b.line)
                      , d = u(a.doc, c.line);
                    a = za(d, a.doc.direction);
                    return a && 0 != a[0].level ? c : (d = Math.max(c.ch, d.text.search(/\S/)),
                    r(c.line, b.line == c.line && b.ch <= d && b.ch ? 0 : d, c.sticky))
                }
                function Ic(a, b, c) {
                    if ("string" == typeof b && (b = Vb[b],
                    !b))
                        return !1;
                    a.display.input.ensurePolled();
                    var d = a.display.shift
                      , e = !1;
                    try {
                        a.isReadOnly() && (a.state.suppressEdits = !0),
                        c && (a.display.shift = !1),
                        e = b(a) != Jc
                    } finally {
                        a.display.shift = d,
                        a.state.suppressEdits = !1
                    }
                    return e
                }
                function Wb(a, b, c, d) {
                    var e = a.state.keySeq;
                    if (e) {
                        if (Ef(b))
                            return "handled";
                        /'$/.test(b) ? a.state.keySeq = null : Ug.set(50, function() {
                            a.state.keySeq == e && (a.state.keySeq = null,
                            a.display.input.reset())
                        });
                        if (Kf(a, e + " " + b, c, d))
                            return !0
                    }
                    return Kf(a, b, c, d)
                }
                function Kf(a, b, c, d) {
                    a: {
                        for (var e = 0; e < a.state.keyMaps.length; e++) {
                            var f = qb(b, a.state.keyMaps[e], d, a);
                            if (f) {
                                d = f;
                                break a
                            }
                        }
                        d = a.options.extraKeys && qb(b, a.options.extraKeys, d, a) || qb(b, a.options.keyMap, d, a)
                    }
                    "multi" == d && (a.state.keySeq = b);
                    "handled" == d && W(a, "keyHandled", a, b, c);
                    if ("handled" == d || "multi" == d)
                        aa(c),
                        wd(a);
                    return !!d
                }
                function Lf(a, b) {
                    var c = Hf(b, !0);
                    return c ? b.shiftKey && !a.state.keySeq ? Wb(a, "Shift-" + c, b, function(b) {
                        return Ic(a, b, !0)
                    }) || Wb(a, c, b, function(b) {
                        if ("string" == typeof b ? /^go[A-Z]/.test(b) : b.motion)
                            return Ic(a, b)
                    }) : Wb(a, c, b, function(b) {
                        return Ic(a, b)
                    }) : !1
                }
                function Vg(a, b, c) {
                    return Wb(a, "'" + c + "'", b, function(b) {
                        return Ic(a, b, !0)
                    })
                }
                function Mf(a) {
                    if (!a.target || a.target == this.display.input.getField())
                        if (this.curOp.focus = ha(),
                        !T(this, a)) {
                            H && 11 > M && 27 == a.keyCode && (a.returnValue = !1);
                            var b = a.keyCode;
                            this.display.shift = 16 == b || a.shiftKey;
                            var c = Lf(this, a);
                            pa && (Od = c ? b : null,
                            !c && 88 == b && !Wg && (ma ? a.metaKey : a.ctrlKey) && this.replaceSelection("", null, "cut"));
                            Ca && !ma && !c && 46 == b && a.shiftKey && !a.ctrlKey && document.execCommand && document.execCommand("cut");
                            18 != b || /\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className) || Xg(this)
                        }
                }
                function Xg(a) {
                    function b(a) {
                        18 != a.keyCode && a.altKey || (Ua(c, "CodeMirror-crosshair"),
                        ia(document, "keyup", b),
                        ia(document, "mouseover", b))
                    }
                    var c = a.display.lineDiv;
                    L(c, "CodeMirror-crosshair");
                    z(document, "keyup", b);
                    z(document, "mouseover", b)
                }
                function Nf(a) {
                    16 == a.keyCode && (this.doc.sel.shift = !1);
                    T(this, a)
                }
                function Of(a) {
                    if (!(a.target && a.target != this.display.input.getField() || Ba(this.display, a) || T(this, a) || a.ctrlKey && !a.altKey || ma && a.metaKey)) {
                        var b = a.keyCode
                          , c = a.charCode;
                        if (pa && b == Od)
                            Od = null,
                            aa(a);
                        else if (!pa || a.which && !(10 > a.which) || !Lf(this, a))
                            if (b = String.fromCharCode(null == c ? b : c),
                            "\b" != b && !Vg(this, a, b))
                                this.display.input.onKeyPress(a)
                    }
                }
                function Yg(a, b) {
                    var c = +new Date;
                    if (Xb && Xb.compare(c, a, b))
                        return Yb = Xb = null,
                        "triple";
                    if (Yb && Yb.compare(c, a, b))
                        return Xb = new Pd(c,a,b),
                        Yb = null,
                        "double";
                    Yb = new Pd(c,a,b);
                    Xb = null;
                    return "single"
                }
                function Pf(a) {
                    var b = this.display;
                    if (!(T(this, a) || b.activeTouch && b.input.supportsTouch()))
                        if (b.input.ensurePolled(),
                        b.shift = a.shiftKey,
                        Ba(b, a))
                            Y || (b.scroller.draggable = !1,
                            setTimeout(function() {
                                return b.scroller.draggable = !0
                            }, 100));
                        else if (!Kc(this, a, "gutterClick", !0)) {
                            var c = Ta(this, a)
                              , d = be(a)
                              , e = c ? Yg(c, d) : "single";
                            window.focus();
                            1 == d && this.state.selectingText && this.state.selectingText(a);
                            if (!c || !Zg(this, d, c, e, a))
                                if (1 == d)
                                    c ? $g(this, c, e, a) : (a.target || a.srcElement) == b.scroller && aa(a);
                                else if (2 == d)
                                    c && Dc(this.doc, c),
                                    setTimeout(function() {
                                        return b.input.focus()
                                    }, 20);
                                else if (3 == d)
                                    if (Qd)
                                        this.display.input.onContextMenu(a);
                                    else
                                        yd(this)
                        }
                }
                function Zg(a, b, c, d, e) {
                    var f = "Click";
                    "double" == d ? f = "Double" + f : "triple" == d && (f = "Triple" + f);
                    return Wb(a, Ff((1 == b ? "Left" : 2 == b ? "Middle" : "Right") + f, e), e, function(b) {
                        "string" == typeof b && (b = Vb[b]);
                        if (!b)
                            return !1;
                        var d = !1;
                        try {
                            a.isReadOnly() && (a.state.suppressEdits = !0),
                            d = b(a, c) != Jc
                        } finally {
                            a.state.suppressEdits = !1
                        }
                        return d
                    })
                }
                function $g(a, b, c, d) {
                    H ? setTimeout(w(Pe, a), 0) : a.curOp.focus = ha();
                    var e = a.getOption("configureMouse");
                    e = e ? e(a, c, d) : {};
                    null == e.unit && (e.unit = (ah ? d.shiftKey && d.metaKey : d.altKey) ? "rectangle" : "single" == c ? "char" : "double" == c ? "word" : "line");
                    if (null == e.extend || a.doc.extend)
                        e.extend = a.doc.extend || d.shiftKey;
                    null == e.addNew && (e.addNew = ma ? d.metaKey : d.ctrlKey);
                    null == e.moveOnDrag && (e.moveOnDrag = !(ma ? d.altKey : d.ctrlKey));
                    var f = a.doc.sel, g;
                    a.options.dragDrop && bh && !a.isReadOnly() && "single" == c && -1 < (g = f.contains(b)) && (0 > A((g = f.ranges[g]).from(), b) || 0 < b.xRel) && (0 < A(g.to(), b) || 0 > b.xRel) ? ch(a, d, b, e) : dh(a, d, b, e)
                }
                function ch(a, b, c, d) {
                    var e = a.display
                      , f = !1
                      , g = U(a, function(b) {
                        Y && (e.scroller.draggable = !1);
                        a.state.draggingText = !1;
                        a.state.delayingBlurEvent && (a.hasFocus() ? a.state.delayingBlurEvent = !1 : yd(a));
                        ia(e.wrapper.ownerDocument, "mouseup", g);
                        ia(e.wrapper.ownerDocument, "mousemove", h);
                        ia(e.scroller, "dragstart", k);
                        ia(e.scroller, "drop", g);
                        f || (aa(b),
                        d.addNew || Dc(a.doc, c, null, null, d.extend),
                        Y && !Lc || H && 9 == M ? setTimeout(function() {
                            e.wrapper.ownerDocument.body.focus({
                                preventScroll: !0
                            });
                            e.input.focus()
                        }, 20) : e.input.focus())
                    })
                      , h = function(a) {
                        f = f || 10 <= Math.abs(b.clientX - a.clientX) + Math.abs(b.clientY - a.clientY)
                    }
                      , k = function() {
                        return f = !0
                    };
                    Y && (e.scroller.draggable = !0);
                    a.state.draggingText = g;
                    g.copy = !d.moveOnDrag;
                    z(e.wrapper.ownerDocument, "mouseup", g);
                    z(e.wrapper.ownerDocument, "mousemove", h);
                    z(e.scroller, "dragstart", k);
                    z(e.scroller, "drop", g);
                    a.state.delayingBlurEvent = !0;
                    setTimeout(function() {
                        return e.input.focus()
                    }, 20);
                    e.scroller.dragDrop && e.scroller.dragDrop()
                }
                function Qf(a, b, c) {
                    if ("char" == c)
                        return new I(b,b);
                    if ("word" == c)
                        return a.findWordAt(b);
                    if ("line" == c)
                        return new I(r(b.line, 0),B(a.doc, r(b.line + 1, 0)));
                    a = c(a, b);
                    return new I(a.from,a.to)
                }
                function dh(a, b, c, d) {
                    function e(b) {
                        if (0 != A(t, b))
                            if (t = b,
                            "rectangle" == d.unit) {
                                var e = []
                                  , f = a.options.tabSize
                                  , g = F(u(k, c.line).text, c.ch, f)
                                  , h = F(u(k, b.line).text, b.ch, f)
                                  , m = Math.min(g, h);
                                g = Math.max(g, h);
                                h = Math.min(c.line, b.line);
                                for (var w = Math.min(a.lastLine(), Math.max(c.line, b.line)); h <= w; h++) {
                                    var P = u(k, h).text
                                      , p = $a(P, m, f);
                                    m == g ? e.push(new I(r(h, p),r(h, p))) : P.length > p && e.push(new I(r(h, p),r(h, $a(P, g, f))))
                                }
                                e.length || e.push(new I(c,c));
                                X(k, qa(a, l.ranges.slice(0, q).concat(e), q), {
                                    origin: "*mouse",
                                    scroll: !1
                                });
                                a.scrollIntoView(b)
                            } else
                                e = n,
                                m = Qf(a, b, d.unit),
                                b = e.anchor,
                                0 < A(m.anchor, b) ? (f = m.head,
                                b = lc(e.from(), m.anchor)) : (f = m.anchor,
                                b = kc(e.to(), m.head)),
                                e = l.ranges.slice(0),
                                e[q] = eh(a, new I(B(k, b),f)),
                                X(k, qa(a, e, q), Rd)
                    }
                    function f(b) {
                        var c = ++w
                          , g = Ta(a, b, !0, "rectangle" == d.unit);
                        if (g)
                            if (0 != A(g, t)) {
                                a.curOp.focus = ha();
                                e(g);
                                var l = wc(h, k);
                                (g.line >= l.to || g.line < l.from) && setTimeout(U(a, function() {
                                    w == c && f(b)
                                }), 150)
                            } else {
                                var m = b.clientY < P.top ? -20 : b.clientY > P.bottom ? 20 : 0;
                                m && setTimeout(U(a, function() {
                                    w == c && (h.scroller.scrollTop += m,
                                    f(b))
                                }), 50)
                            }
                    }
                    function g(b) {
                        a.state.selectingText = !1;
                        w = Infinity;
                        b && (aa(b),
                        h.input.focus());
                        ia(h.wrapper.ownerDocument, "mousemove", p);
                        ia(h.wrapper.ownerDocument, "mouseup", y);
                        k.history.lastSelOrigin = null
                    }
                    H && yd(a);
                    var h = a.display
                      , k = a.doc;
                    aa(b);
                    var l = k.sel
                      , m = l.ranges;
                    if (d.addNew && !d.extend) {
                        var q = k.sel.contains(c);
                        var n = -1 < q ? m[q] : new I(c,c)
                    } else
                        n = k.sel.primary(),
                        q = k.sel.primIndex;
                    "rectangle" == d.unit ? (d.addNew || (n = new I(c,c)),
                    c = Ta(a, b, !0, !0),
                    q = -1) : (b = Qf(a, c, d.unit),
                    n = d.extend ? Jd(n, b.anchor, b.head, d.extend) : b);
                    d.addNew ? -1 == q ? (q = m.length,
                    X(k, qa(a, m.concat([n]), q), {
                        scroll: !1,
                        origin: "*mouse"
                    })) : 1 < m.length && m[q].empty() && "char" == d.unit && !d.extend ? (X(k, qa(a, m.slice(0, q).concat(m.slice(q + 1)), 0), {
                        scroll: !1,
                        origin: "*mouse"
                    }),
                    l = k.sel) : Kd(k, q, n, Rd) : (q = 0,
                    X(k, new ka([n],0), Rd),
                    l = k.sel);
                    var t = c
                      , P = h.wrapper.getBoundingClientRect()
                      , w = 0
                      , p = U(a, function(a) {
                        0 !== a.buttons && be(a) ? f(a) : g(a)
                    })
                      , y = U(a, g);
                    a.state.selectingText = y;
                    z(h.wrapper.ownerDocument, "mousemove", p);
                    z(h.wrapper.ownerDocument, "mouseup", y)
                }
                function eh(a, b) {
                    var c = b.anchor
                      , d = b.head
                      , e = u(a.doc, c.line);
                    if (0 == A(c, d) && c.sticky == d.sticky)
                        return b;
                    e = za(e);
                    if (!e)
                        return b;
                    var f = vb(e, c.ch, c.sticky)
                      , g = e[f];
                    if (g.from != c.ch && g.to != c.ch)
                        return b;
                    var h = f + (g.from == c.ch == (1 != g.level) ? 0 : 1);
                    if (0 == h || h == e.length)
                        return b;
                    d.line != c.line ? a = 0 < (d.line - c.line) * ("ltr" == a.doc.direction ? 1 : -1) : (a = vb(e, d.ch, d.sticky),
                    f = a - f || (d.ch - c.ch) * (1 == g.level ? -1 : 1),
                    a = a == h - 1 || a == h ? 0 > f : 0 < f);
                    e = e[h + (a ? -1 : 0)];
                    e = (h = a == (1 == e.level)) ? e.from : e.to;
                    h = h ? "after" : "before";
                    return c.ch == e && c.sticky == h ? b : new I(new r(c.line,e,h),d)
                }
                function Kc(a, b, c, d) {
                    if (b.touches) {
                        var e = b.touches[0].clientX;
                        var f = b.touches[0].clientY
                    } else
                        try {
                            e = b.clientX,
                            f = b.clientY
                        } catch (k) {
                            return !1
                        }
                    if (e >= Math.floor(a.display.gutters.getBoundingClientRect().right))
                        return !1;
                    d && aa(b);
                    d = a.display;
                    var g = d.lineDiv.getBoundingClientRect();
                    if (f > g.bottom || !la(a, c))
                        return Tc(b);
                    f -= g.top - d.viewOffset;
                    for (g = 0; g < a.display.gutterSpecs.length; ++g) {
                        var h = d.gutters.childNodes[g];
                        if (h && h.getBoundingClientRect().right >= e)
                            return e = Oa(a.doc, f),
                            R(a, c, a, e, a.display.gutterSpecs[g].className, b),
                            Tc(b)
                    }
                }
                function Rf(a, b) {
                    var c;
                    (c = Ba(a.display, b)) || (c = la(a, "gutterContextMenu") ? Kc(a, b, "gutterContextMenu", !1) : !1);
                    if (!c && !T(a, b, "contextmenu") && !Qd)
                        a.display.input.onContextMenu(b)
                }
                function Sf(a) {
                    a.display.wrapper.className = a.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + a.options.theme.replace(/(^|\s)\s*/g, " cm-s-");
                    Fb(a)
                }
                function fh(a, b, c) {
                    !b != !(c && c != sb) && (c = a.display.dragFunctions,
                    b = b ? z : ia,
                    b(a.display.scroller, "dragstart", c.start),
                    b(a.display.scroller, "dragenter", c.enter),
                    b(a.display.scroller, "dragover", c.over),
                    b(a.display.scroller, "dragleave", c.leave),
                    b(a.display.scroller, "drop", c.drop))
                }
                function gh(a) {
                    a.options.lineWrapping ? (L(a.display.wrapper, "CodeMirror-wrap"),
                    a.display.sizer.style.minWidth = "",
                    a.display.sizerWidth = null) : (Ua(a.display.wrapper, "CodeMirror-wrap"),
                    hd(a));
                    vd(a);
                    ba(a);
                    Fb(a);
                    setTimeout(function() {
                        return jb(a)
                    }, 100)
                }
                function N(a, b) {
                    var c = this;
                    if (!(this instanceof N))
                        return new N(a,b);
                    this.options = b = b ? C(b) : {};
                    C(Tf, b, !1);
                    var d = b.value;
                    "string" == typeof d ? d = new ca(d,b.mode,null,b.lineSeparator,b.direction) : b.mode && (d.modeOption = b.mode);
                    this.doc = d;
                    var e = new N.inputStyles[b.inputStyle](this);
                    a = this.display = new Fg(a,d,e,b);
                    a.wrapper.CodeMirror = this;
                    Sf(this);
                    b.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap");
                    Ve(this);
                    this.state = {
                        keyMaps: [],
                        overlays: [],
                        modeGen: 0,
                        overwrite: !1,
                        delayingBlurEvent: !1,
                        focused: !1,
                        suppressEdits: !1,
                        pasteIncoming: -1,
                        cutIncoming: -1,
                        selectingText: !1,
                        draggingText: !1,
                        highlight: new La,
                        keySeq: null,
                        specialChars: null
                    };
                    b.autofocus && !Mb && a.input.focus();
                    H && 11 > M && setTimeout(function() {
                        return c.display.input.reset(!0)
                    }, 20);
                    hh(this);
                    Uf || (Pg(),
                    Uf = !0);
                    Wa(this);
                    this.curOp.forceUpdate = !0;
                    ef(this, d);
                    b.autofocus && !Mb || this.hasFocus() ? setTimeout(function() {
                        c.hasFocus() && !c.state.focused && xd(c)
                    }, 20) : hb(this);
                    for (var f in Mc)
                        if (Mc.hasOwnProperty(f))
                            Mc[f](this, b[f], sb);
                    Ye(this);
                    b.finishInit && b.finishInit(this);
                    for (d = 0; d < Sd.length; ++d)
                        Sd[d](this);
                    Xa(this);
                    Y && b.lineWrapping && "optimizelegibility" == getComputedStyle(a.lineDiv).textRendering && (a.lineDiv.style.textRendering = "auto")
                }
                function hh(a) {
                    function b() {
                        d.activeTouch && (e = setTimeout(function() {
                            return d.activeTouch = null
                        }, 1E3),
                        f = d.activeTouch,
                        f.end = +new Date)
                    }
                    function c(a, b) {
                        if (null == b.left)
                            return !0;
                        var d = b.left - a.left;
                        a = b.top - a.top;
                        return 400 < d * d + a * a
                    }
                    var d = a.display;
                    z(d.scroller, "mousedown", U(a, Pf));
                    H && 11 > M ? z(d.scroller, "dblclick", U(a, function(b) {
                        if (!T(a, b)) {
                            var d = Ta(a, b);
                            !d || Kc(a, b, "gutterClick", !0) || Ba(a.display, b) || (aa(b),
                            b = a.findWordAt(d),
                            Dc(a.doc, b.anchor, b.head))
                        }
                    })) : z(d.scroller, "dblclick", function(b) {
                        return T(a, b) || aa(b)
                    });
                    z(d.scroller, "contextmenu", function(b) {
                        return Rf(a, b)
                    });
                    z(d.input.getField(), "contextmenu", function(b) {
                        d.scroller.contains(b.target) || Rf(a, b)
                    });
                    var e, f = {
                        end: 0
                    };
                    z(d.scroller, "touchstart", function(b) {
                        var c;
                        if (c = !T(a, b))
                            1 != b.touches.length ? c = !1 : (c = b.touches[0],
                            c = 1 >= c.radiusX && 1 >= c.radiusY),
                            c = !c;
                        c && !Kc(a, b, "gutterClick", !0) && (d.input.ensurePolled(),
                        clearTimeout(e),
                        c = +new Date,
                        d.activeTouch = {
                            start: c,
                            moved: !1,
                            prev: 300 >= c - f.end ? f : null
                        },
                        1 == b.touches.length && (d.activeTouch.left = b.touches[0].pageX,
                        d.activeTouch.top = b.touches[0].pageY))
                    });
                    z(d.scroller, "touchmove", function() {
                        d.activeTouch && (d.activeTouch.moved = !0)
                    });
                    z(d.scroller, "touchend", function(e) {
                        var f = d.activeTouch;
                        if (f && !Ba(d, e) && null != f.left && !f.moved && 300 > new Date - f.start) {
                            var g = a.coordsChar(d.activeTouch, "page");
                            f = !f.prev || c(f, f.prev) ? new I(g,g) : !f.prev.prev || c(f, f.prev.prev) ? a.findWordAt(g) : new I(r(g.line, 0),B(a.doc, r(g.line + 1, 0)));
                            a.setSelection(f.anchor, f.head);
                            a.focus();
                            aa(e)
                        }
                        b()
                    });
                    z(d.scroller, "touchcancel", b);
                    z(d.scroller, "scroll", function() {
                        d.scroller.clientHeight && (Ib(a, d.scroller.scrollTop),
                        Va(a, d.scroller.scrollLeft, !0),
                        R(a, "scroll", a))
                    });
                    z(d.scroller, "mousewheel", function(b) {
                        return af(a, b)
                    });
                    z(d.scroller, "DOMMouseScroll", function(b) {
                        return af(a, b)
                    });
                    z(d.wrapper, "scroll", function() {
                        return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0
                    });
                    d.dragFunctions = {
                        enter: function(b) {
                            T(a, b) || xb(b)
                        },
                        over: function(b) {
                            if (!T(a, b)) {
                                var d = Ta(a, b);
                                if (d) {
                                    var c = document.createDocumentFragment();
                                    Oe(a, d, c);
                                    a.display.dragCursor || (a.display.dragCursor = p("div", null, "CodeMirror-cursors CodeMirror-dragcursors"),
                                    a.display.lineSpace.insertBefore(a.display.dragCursor, a.display.cursorDiv));
                                    D(a.display.dragCursor, c)
                                }
                                xb(b)
                            }
                        },
                        start: function(b) {
                            if (H && (!a.state.draggingText || 100 > +new Date - Cf))
                                xb(b);
                            else if (!T(a, b) && !Ba(a.display, b) && (b.dataTransfer.setData("Text", a.getSelection()),
                            b.dataTransfer.effectAllowed = "copyMove",
                            b.dataTransfer.setDragImage && !Lc)) {
                                var d = p("img", null, null, "position: fixed; left: 0; top: 0;");
                                d.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
                                pa && (d.width = d.height = 1,
                                a.display.wrapper.appendChild(d),
                                d._top = d.offsetTop);
                                b.dataTransfer.setDragImage(d, 0, 0);
                                pa && d.parentNode.removeChild(d)
                            }
                        },
                        drop: U(a, Og),
                        leave: function(b) {
                            T(a, b) || Bf(a)
                        }
                    };
                    var g = d.input.getField();
                    z(g, "keyup", function(b) {
                        return Nf.call(a, b)
                    });
                    z(g, "keydown", U(a, Mf));
                    z(g, "keypress", U(a, Of));
                    z(g, "focus", function(b) {
                        return xd(a, b)
                    });
                    z(g, "blur", function(b) {
                        return hb(a, b)
                    })
                }
                function Zb(a, b, c, d) {
                    var e = a.doc, f;
                    null == c && (c = "add");
                    "smart" == c && (e.mode.indent ? f = zb(a, b).state : c = "prev");
                    var g = a.options.tabSize
                      , h = u(e, b)
                      , k = F(h.text, null, g);
                    h.stateAfter && (h.stateAfter = null);
                    var l = h.text.match(/^\s*/)[0];
                    if (!d && !/\S/.test(h.text)) {
                        var m = 0;
                        c = "not"
                    } else if ("smart" == c && (m = e.mode.indent(f, h.text.slice(l.length), h.text),
                    m == Jc || 150 < m)) {
                        if (!d)
                            return;
                        c = "prev"
                    }
                    "prev" == c ? m = b > e.first ? F(u(e, b - 1).text, null, g) : 0 : "add" == c ? m = k + a.options.indentUnit : "subtract" == c ? m = k - a.options.indentUnit : "number" == typeof c && (m = k + c);
                    m = Math.max(0, m);
                    c = "";
                    d = 0;
                    if (a.options.indentWithTabs)
                        for (a = Math.floor(m / g); a; --a)
                            d += g,
                            c += "\t";
                    d < m && (c += Qc(m - d));
                    if (c != l)
                        return ob(e, c, r(b, 0), r(b, l.length), "+input"),
                        h.stateAfter = null,
                        !0;
                    for (g = 0; g < e.sel.ranges.length; g++)
                        if (h = e.sel.ranges[g],
                        h.head.line == b && h.head.ch < l.length) {
                            b = r(b, l.length);
                            Kd(e, g, new I(b,b));
                            break
                        }
                }
                function Td(a, b, c, d, e) {
                    var f = a.doc;
                    a.display.shift = !1;
                    d || (d = f.sel);
                    var g = +new Date - 200
                      , h = "paste" == e || a.state.pasteIncoming > g
                      , k = Ud(b)
                      , l = null;
                    if (h && 1 < d.ranges.length)
                        if (fa && fa.text.join("\n") == b) {
                            if (0 == d.ranges.length % fa.text.length) {
                                l = [];
                                for (var m = 0; m < fa.text.length; m++)
                                    l.push(f.splitLines(fa.text[m]))
                            }
                        } else
                            k.length == d.ranges.length && a.options.pasteLinesPerSelection && (l = hc(k, function(a) {
                                return [a]
                            }));
                    m = a.curOp.updateInput;
                    for (var q = d.ranges.length - 1; 0 <= q; q--) {
                        var n = d.ranges[q]
                          , t = n.from()
                          , w = n.to();
                        n.empty() && (c && 0 < c ? t = r(t.line, t.ch - c) : a.state.overwrite && !h ? w = r(w.line, Math.min(u(f, w.line).text.length, w.ch + y(k).length)) : h && fa && fa.lineWise && fa.text.join("\n") == k.join("\n") && (t = w = r(t.line, 0)));
                        n = {
                            from: t,
                            to: w,
                            text: l ? l[q % l.length] : k,
                            origin: e || (h ? "paste" : a.state.cutIncoming > g ? "cut" : "+input")
                        };
                        nb(a.doc, n);
                        W(a, "inputRead", a, n)
                    }
                    b && !h && Vf(a, b);
                    ib(a);
                    2 > a.curOp.updateInput && (a.curOp.updateInput = m);
                    a.curOp.typing = !0;
                    a.state.pasteIncoming = a.state.cutIncoming = -1
                }
                function Wf(a, b) {
                    var c = a.clipboardData && a.clipboardData.getData("Text");
                    if (c)
                        return a.preventDefault(),
                        b.isReadOnly() || b.options.disableInput || ea(b, function() {
                            return Td(b, c, 0, null, "paste")
                        }),
                        !0
                }
                function Vf(a, b) {
                    if (a.options.electricChars && a.options.smartIndent)
                        for (var c = a.doc.sel, d = c.ranges.length - 1; 0 <= d; d--) {
                            var e = c.ranges[d];
                            if (!(100 < e.head.ch || d && c.ranges[d - 1].head.line == e.head.line)) {
                                var f = a.getModeAt(e.head)
                                  , g = !1;
                                if (f.electricChars)
                                    for (var h = 0; h < f.electricChars.length; h++) {
                                        if (-1 < b.indexOf(f.electricChars.charAt(h))) {
                                            g = Zb(a, e.head.line, "smart");
                                            break
                                        }
                                    }
                                else
                                    f.electricInput && f.electricInput.test(u(a.doc, e.head.line).text.slice(0, e.head.ch)) && (g = Zb(a, e.head.line, "smart"));
                                g && W(a, "electricInput", a, e.head.line)
                            }
                        }
                }
                function Xf(a) {
                    for (var b = [], c = [], d = 0; d < a.doc.sel.ranges.length; d++) {
                        var e = a.doc.sel.ranges[d].head.line;
                        e = {
                            anchor: r(e, 0),
                            head: r(e + 1, 0)
                        };
                        c.push(e);
                        b.push(a.getRange(e.anchor, e.head))
                    }
                    return {
                        text: b,
                        ranges: c
                    }
                }
                function Yf(a, b, c, d) {
                    a.setAttribute("autocorrect", c ? "" : "off");
                    a.setAttribute("autocapitalize", d ? "" : "off");
                    a.setAttribute("spellcheck", !!b)
                }
                function Zf() {
                    var a = p("textarea", null, null, "position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none")
                      , b = p("div", [a], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
                    Y ? a.style.width = "1000px" : a.setAttribute("wrap", "off");
                    $b && (a.style.border = "1px solid black");
                    Yf(a);
                    return b
                }
                function Vd(a, b, c, d, e) {
                    function f(f) {
                        if ("codepoint" == d) {
                            var g = k.text.charCodeAt(b.ch + (0 < c ? 0 : -1));
                            g = isNaN(g) ? null : new r(b.line,Math.max(0, Math.min(k.text.length, b.ch + c * ((0 < c ? 55296 <= g && 56320 > g : 56320 <= g && 57343 > g) ? 2 : 1))),-c)
                        } else
                            g = e ? Tg(a.cm, k, b, c) : Md(k, b, c);
                        if (null == g) {
                            if (f = !f)
                                f = b.line + l,
                                f < a.first || f >= a.first + a.size ? f = !1 : (b = new r(f,b.ch,b.sticky),
                                f = k = u(a, f));
                            if (f)
                                b = Nd(e, a.cm, k, b.line, l);
                            else
                                return !1
                        } else
                            b = g;
                        return !0
                    }
                    var g = b
                      , h = c
                      , k = u(a, b.line)
                      , l = e && "rtl" == a.direction ? -c : c;
                    if ("char" == d || "codepoint" == d)
                        f();
                    else if ("column" == d)
                        f(!0);
                    else if ("word" == d || "group" == d)
                        for (var m = null, q = "group" == d, n = a.cm && a.cm.getHelper(b, "wordChars"), t = !0; !(0 > c) || f(!t); t = !1) {
                            var w = k.text.charAt(b.ch) || "\n";
                            w = ya(w, n) ? "w" : q && "\n" == w ? "n" : !q || /\s/.test(w) ? null : "p";
                            !q || t || w || (w = "s");
                            if (m && m != w) {
                                0 > c && (c = 1,
                                f(),
                                b.sticky = "after");
                                break
                            }
                            w && (m = w);
                            if (0 < c && !f(!t))
                                break
                        }
                    h = Fc(a, b, g, h, !0);
                    $c(g, h) && (h.hitSide = !0);
                    return h
                }
                function $f(a, b, c, d) {
                    var e = a.doc
                      , f = b.left;
                    if ("page" == d) {
                        var g = Math.max(Math.min(a.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight) - .5 * gb(a.display), 3);
                        g = (0 < c ? b.bottom : b.top) + c * g
                    } else
                        "line" == d && (g = 0 < c ? b.bottom + 3 : b.top - 3);
                    for (; ; ) {
                        b = sd(a, f, g);
                        if (!b.outside)
                            break;
                        if (0 > c ? 0 >= g : g >= e.height) {
                            b.hitSide = !0;
                            break
                        }
                        g += 5 * c
                    }
                    return b
                }
                function ag(a, b) {
                    var c = md(a, b.line);
                    if (!c || c.hidden)
                        return null;
                    var d = u(a.doc, b.line);
                    c = Ae(c, d, b.line);
                    a = za(d, a.doc.direction);
                    d = "left";
                    a && (d = vb(a, b.ch) % 2 ? "right" : "left");
                    b = Be(c.map, b.ch, d);
                    b.offset = "right" == b.collapse ? b.end : b.start;
                    return b
                }
                function ih(a) {
                    for (; a; a = a.parentNode)
                        if (/CodeMirror-gutter-wrapper/.test(a.className))
                            return !0;
                    return !1
                }
                function tb(a, b) {
                    b && (a.bad = !0);
                    return a
                }
                function jh(a, b, c, d, e) {
                    function f(a) {
                        return function(b) {
                            return b.id == a
                        }
                    }
                    function g() {
                        m && (l += q,
                        n && (l += q),
                        m = n = !1)
                    }
                    function h(a) {
                        a && (g(),
                        l += a)
                    }
                    function k(b) {
                        if (1 == b.nodeType) {
                            var c = b.getAttribute("cm-text");
                            if (c)
                                h(c);
                            else {
                                c = b.getAttribute("cm-marker");
                                var l;
                                if (c)
                                    b = a.findMarks(r(d, 0), r(e + 1, 0), f(+c)),
                                    b.length && (l = b[0].find(0)) && h(Na(a.doc, l.from, l.to).join(q));
                                else if ("false" != b.getAttribute("contenteditable") && (l = /^(pre|div|p|li|table|br)$/i.test(b.nodeName),
                                /^br$/i.test(b.nodeName) || 0 != b.textContent.length)) {
                                    l && g();
                                    for (c = 0; c < b.childNodes.length; c++)
                                        k(b.childNodes[c]);
                                    /^(pre|p)$/i.test(b.nodeName) && (n = !0);
                                    l && (m = !0)
                                }
                            }
                        } else
                            3 == b.nodeType && h(b.nodeValue.replace(/\u200b/g, "").replace(/\u00a0/g, " "))
                    }
                    for (var l = "", m = !1, q = a.doc.lineSeparator(), n = !1; ; ) {
                        k(b);
                        if (b == c)
                            break;
                        b = b.nextSibling;
                        n = !1
                    }
                    return l
                }
                function Nc(a, b, c) {
                    if (b == a.display.lineDiv) {
                        var d = a.display.lineDiv.childNodes[c];
                        if (!d)
                            return tb(a.clipPos(r(a.display.viewTo - 1)), !0);
                        b = null;
                        c = 0
                    } else
                        for (d = b; ; d = d.parentNode) {
                            if (!d || d == a.display.lineDiv)
                                return null;
                            if (d.parentNode && d.parentNode == a.display.lineDiv)
                                break
                        }
                    for (var e = 0; e < a.display.view.length; e++) {
                        var f = a.display.view[e];
                        if (f.node == d)
                            return kh(f, b, c)
                    }
                }
                function kh(a, b, c) {
                    function d(b, d, c) {
                        for (var e = -1; e < (l ? l.length : 0); e++)
                            for (var f = 0 > e ? k.map : l[e], g = 0; g < f.length; g += 3) {
                                var h = f[g + 2];
                                if (h == b || h == d) {
                                    d = J(0 > e ? a.line : a.rest[e]);
                                    e = f[g] + c;
                                    if (0 > c || h != b)
                                        e = f[g + (c ? 1 : 0)];
                                    return r(d, e)
                                }
                            }
                    }
                    var e = a.text.firstChild
                      , f = !1;
                    if (!b || !x(e, b))
                        return tb(r(J(a.line), 0), !0);
                    if (b == e && (f = !0,
                    b = e.childNodes[c],
                    c = 0,
                    !b))
                        return c = a.rest ? y(a.rest) : a.line,
                        tb(r(J(c), c.text.length), f);
                    var g = 3 == b.nodeType ? b : null
                      , h = b;
                    g || 1 != b.childNodes.length || 3 != b.firstChild.nodeType || (g = b.firstChild,
                    c && (c = g.nodeValue.length));
                    for (; h.parentNode != e; )
                        h = h.parentNode;
                    var k = a.measure
                      , l = k.maps;
                    if (b = d(g, h, c))
                        return tb(b, f);
                    e = h.nextSibling;
                    for (g = g ? g.nodeValue.length - c : 0; e; e = e.nextSibling) {
                        if (b = d(e, e.firstChild, 0))
                            return tb(r(b.line, b.ch - g), f);
                        g += e.textContent.length
                    }
                    for (h = h.previousSibling; h; h = h.previousSibling) {
                        if (b = d(h, h.firstChild, -1))
                            return tb(r(b.line, b.ch + c), f);
                        c += h.textContent.length
                    }
                }
                var da = navigator.userAgent
                  , bg = navigator.platform
                  , Ca = /gecko\/\d/i.test(da)
                  , cg = /MSIE \d/.test(da)
                  , dg = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(da)
                  , Oc = /Edge\/(\d+)/.exec(da)
                  , H = cg || dg || Oc
                  , M = H && (cg ? document.documentMode || 6 : +(Oc || dg)[1])
                  , Y = !Oc && /WebKit\//.test(da)
                  , lh = Y && /Qt\/\d+\.\d+/.test(da)
                  , qc = !Oc && /Chrome\//.test(da)
                  , pa = /Opera\//.test(da)
                  , Lc = /Apple Computer/.test(navigator.vendor)
                  , mh = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(da)
                  , Cg = /PhantomJS/.test(da)
                  , $b = Lc && (/Mobile\/\w+/.test(da) || 2 < navigator.maxTouchPoints)
                  , rc = /Android/.test(da)
                  , Mb = $b || rc || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(da)
                  , ma = $b || /Mac/.test(bg)
                  , ah = /\bCrOS\b/.test(da)
                  , nh = /win/i.test(bg)
                  , Ya = pa && da.match(/Version\/(\d*\.\d*)/);
                Ya && (Ya = Number(Ya[1]));
                Ya && 15 <= Ya && (pa = !1,
                Y = !0);
                var Gf = ma && (lh || pa && (null == Ya || 12.11 > Ya))
                  , Qd = Ca || H && 9 <= M
                  , Ua = function(a, b) {
                    var c = a.className;
                    if (b = v(b).exec(c)) {
                        var d = c.slice(b.index + b[0].length);
                        a.className = c.slice(0, b.index) + (d ? b[1] + d : "")
                    }
                };
                var Bb = document.createRange ? function(a, b, c, d) {
                    var e = document.createRange();
                    e.setEnd(d || a, c);
                    e.setStart(a, b);
                    return e
                }
                : function(a, b, c) {
                    var d = document.body.createTextRange();
                    try {
                        d.moveToElementText(a.parentNode)
                    } catch (e) {
                        return d
                    }
                    d.collapse(!0);
                    d.moveEnd("character", c);
                    d.moveStart("character", b);
                    return d
                }
                ;
                var ac = function(a) {
                    a.select()
                };
                $b ? ac = function(a) {
                    a.selectionStart = 0;
                    a.selectionEnd = a.value.length
                }
                : H && (ac = function(a) {
                    try {
                        a.select()
                    } catch (b) {}
                }
                );
                var La = function() {
                    this.f = this.id = null;
                    this.time = 0;
                    this.handler = w(this.onTimeout, this)
                };
                La.prototype.onTimeout = function(a) {
                    a.id = 0;
                    a.time <= +new Date ? a.f() : setTimeout(a.handler, a.time - +new Date)
                }
                ;
                La.prototype.set = function(a, b) {
                    this.f = b;
                    b = +new Date + a;
                    if (!this.id || b < this.time)
                        clearTimeout(this.id),
                        this.id = setTimeout(this.handler, a),
                        this.time = b
                }
                ;
                var Jc = {
                    toString: function() {
                        return "CodeMirror.Pass"
                    }
                }, xa = {
                    scroll: !1
                }, Rd = {
                    origin: "*mouse"
                }, bc = {
                    origin: "+move"
                }, gc = [""], fg = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/, gg = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/, wb = null, ig = function() {
                    function a(a) {
                        return 247 >= a ? "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a) : 1424 <= a && 1524 >= a ? "R" : 1536 <= a && 1785 >= a ? "nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(a - 1536) : 1774 <= a && 2220 >= a ? "r" : 8192 <= a && 8203 >= a ? "w" : 8204 == a ? "b" : "L"
                    }
                    function b(a, b, d) {
                        this.level = a;
                        this.from = b;
                        this.to = d
                    }
                    var c = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/
                      , d = /[stwN]/
                      , e = /[LRr]/
                      , f = /[Lb1n]/
                      , g = /[1n]/;
                    return function(h, k) {
                        var l = "ltr" == k ? "L" : "R";
                        if (0 == h.length || "ltr" == k && !c.test(h))
                            return !1;
                        for (var m = h.length, q = [], n = 0; n < m; ++n)
                            q.push(a(h.charCodeAt(n)));
                        n = 0;
                        for (var t = l; n < m; ++n) {
                            var r = q[n];
                            "m" == r ? q[n] = t : t = r
                        }
                        n = 0;
                        for (t = l; n < m; ++n)
                            r = q[n],
                            "1" == r && "r" == t ? q[n] = "n" : e.test(r) && (t = r,
                            "r" == r && (q[n] = "R"));
                        n = 1;
                        for (t = q[0]; n < m - 1; ++n)
                            r = q[n],
                            "+" == r && "1" == t && "1" == q[n + 1] ? q[n] = "1" : "," != r || t != q[n + 1] || "1" != t && "n" != t || (q[n] = t),
                            t = r;
                        for (n = 0; n < m; ++n)
                            if (t = q[n],
                            "," == t)
                                q[n] = "N";
                            else if ("%" == t) {
                                for (t = n + 1; t < m && "%" == q[t]; ++t)
                                    ;
                                for (r = n && "!" == q[n - 1] || t < m && "1" == q[t] ? "1" : "N"; n < t; ++n)
                                    q[n] = r;
                                n = t - 1
                            }
                        n = 0;
                        for (t = l; n < m; ++n)
                            r = q[n],
                            "L" == t && "1" == r ? q[n] = "L" : e.test(r) && (t = r);
                        for (t = 0; t < m; ++t)
                            if (d.test(q[t])) {
                                for (n = t + 1; n < m && d.test(q[n]); ++n)
                                    ;
                                r = "L" == (t ? q[t - 1] : l);
                                for (r = r == ("L" == (n < m ? q[n] : l)) ? r ? "L" : "R" : l; t < n; ++t)
                                    q[t] = r;
                                t = n - 1
                            }
                        l = [];
                        var w;
                        for (n = 0; n < m; )
                            if (f.test(q[n])) {
                                t = n;
                                for (++n; n < m && f.test(q[n]); ++n)
                                    ;
                                l.push(new b(0,t,n))
                            } else {
                                var u = n;
                                t = l.length;
                                r = "rtl" == k ? 1 : 0;
                                for (++n; n < m && "L" != q[n]; ++n)
                                    ;
                                for (var p = u; p < n; )
                                    if (g.test(q[p])) {
                                        u < p && (l.splice(t, 0, new b(1,u,p)),
                                        t += r);
                                        u = p;
                                        for (++p; p < n && g.test(q[p]); ++p)
                                            ;
                                        l.splice(t, 0, new b(2,u,p));
                                        t += r;
                                        u = p
                                    } else
                                        ++p;
                                u < n && l.splice(t, 0, new b(1,u,n))
                            }
                        "ltr" == k && (1 == l[0].level && (w = h.match(/^\s+/)) && (l[0].from = w[0].length,
                        l.unshift(new b(0,0,w[0].length))),
                        1 == y(l).level && (w = h.match(/\s+$/)) && (y(l).to -= w[0].length,
                        l.push(new b(0,m - w[0].length,m))));
                        return "rtl" == k ? l.reverse() : l
                    }
                }(), ic = [], z = function(a, b, c) {
                    a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent ? a.attachEvent("on" + b, c) : (a = a._handlers || (a._handlers = {}),
                    a[b] = (a[b] || ic).concat(c))
                }, bh = function() {
                    if (H && 9 > M)
                        return !1;
                    var a = p("div");
                    return "draggable"in a || "dragDrop"in a
                }(), Uc, id, Ud = 3 != "\n\nb".split(/\n/).length ? function(a) {
                    for (var b = 0, c = [], d = a.length; b <= d; ) {
                        var e = a.indexOf("\n", b);
                        -1 == e && (e = a.length);
                        var f = a.slice(b, "\r" == a.charAt(e - 1) ? e - 1 : e)
                          , g = f.indexOf("\r");
                        -1 != g ? (c.push(f.slice(0, g)),
                        b += g + 1) : (c.push(f),
                        b = e + 1)
                    }
                    return c
                }
                : function(a) {
                    return a.split(/\r\n?|\n/)
                }
                , oh = window.getSelection ? function(a) {
                    try {
                        return a.selectionStart != a.selectionEnd
                    } catch (b) {
                        return !1
                    }
                }
                : function(a) {
                    try {
                        var b = a.ownerDocument.selection.createRange()
                    } catch (c) {}
                    return b && b.parentElement() == a ? 0 != b.compareEndPoints("StartToEnd", b) : !1
                }
                , Wg = function() {
                    var a = p("div");
                    if ("oncopy"in a)
                        return !0;
                    a.setAttribute("oncopy", "return;");
                    return "function" == typeof a.oncopy
                }(), od = null, Vc = {}, bb = {}, cb = {}, S = function(a, b, c) {
                    this.pos = this.start = 0;
                    this.string = a;
                    this.tabSize = b || 8;
                    this.lineStart = this.lastColumnPos = this.lastColumnValue = 0;
                    this.lineOracle = c
                };
                S.prototype.eol = function() {
                    return this.pos >= this.string.length
                }
                ;
                S.prototype.sol = function() {
                    return this.pos == this.lineStart
                }
                ;
                S.prototype.peek = function() {
                    return this.string.charAt(this.pos) || void 0
                }
                ;
                S.prototype.next = function() {
                    if (this.pos < this.string.length)
                        return this.string.charAt(this.pos++)
                }
                ;
                S.prototype.eat = function(a) {
                    var b = this.string.charAt(this.pos);
                    if ("string" == typeof a ? b == a : b && (a.test ? a.test(b) : a(b)))
                        return ++this.pos,
                        b
                }
                ;
                S.prototype.eatWhile = function(a) {
                    for (var b = this.pos; this.eat(a); )
                        ;
                    return this.pos > b
                }
                ;
                S.prototype.eatSpace = function() {
                    for (var a = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos)); )
                        ++this.pos;
                    return this.pos > a
                }
                ;
                S.prototype.skipToEnd = function() {
                    this.pos = this.string.length
                }
                ;
                S.prototype.skipTo = function(a) {
                    a = this.string.indexOf(a, this.pos);
                    if (-1 < a)
                        return this.pos = a,
                        !0
                }
                ;
                S.prototype.backUp = function(a) {
                    this.pos -= a
                }
                ;
                S.prototype.column = function() {
                    this.lastColumnPos < this.start && (this.lastColumnValue = F(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue),
                    this.lastColumnPos = this.start);
                    return this.lastColumnValue - (this.lineStart ? F(this.string, this.lineStart, this.tabSize) : 0)
                }
                ;
                S.prototype.indentation = function() {
                    return F(this.string, null, this.tabSize) - (this.lineStart ? F(this.string, this.lineStart, this.tabSize) : 0)
                }
                ;
                S.prototype.match = function(a, b, c) {
                    if ("string" == typeof a) {
                        var d = function(a) {
                            return c ? a.toLowerCase() : a
                        }
                          , e = this.string.substr(this.pos, a.length);
                        if (d(e) == d(a))
                            return !1 !== b && (this.pos += a.length),
                            !0
                    } else {
                        if ((a = this.string.slice(this.pos).match(a)) && 0 < a.index)
                            return null;
                        a && !1 !== b && (this.pos += a[0].length);
                        return a
                    }
                }
                ;
                S.prototype.current = function() {
                    return this.string.slice(this.start, this.pos)
                }
                ;
                S.prototype.hideFirstChars = function(a, b) {
                    this.lineStart += a;
                    try {
                        return b()
                    } finally {
                        this.lineStart -= a
                    }
                }
                ;
                S.prototype.lookAhead = function(a) {
                    var b = this.lineOracle;
                    return b && b.lookAhead(a)
                }
                ;
                S.prototype.baseToken = function() {
                    var a = this.lineOracle;
                    return a && a.baseToken(this.pos)
                }
                ;
                var mc = function(a, b) {
                    this.state = a;
                    this.lookAhead = b
                }
                  , ta = function(a, b, c, d) {
                    this.state = b;
                    this.doc = a;
                    this.line = c;
                    this.maxLookAhead = d || 0;
                    this.baseTokens = null;
                    this.baseTokenPos = 1
                };
                ta.prototype.lookAhead = function(a) {
                    var b = this.doc.getLine(this.line + a);
                    null != b && a > this.maxLookAhead && (this.maxLookAhead = a);
                    return b
                }
                ;
                ta.prototype.baseToken = function(a) {
                    if (!this.baseTokens)
                        return null;
                    for (; this.baseTokens[this.baseTokenPos] <= a; )
                        this.baseTokenPos += 2;
                    var b = this.baseTokens[this.baseTokenPos + 1];
                    return {
                        type: b && b.replace(/( |^)overlay .*/, ""),
                        size: this.baseTokens[this.baseTokenPos] - a
                    }
                }
                ;
                ta.prototype.nextLine = function() {
                    this.line++;
                    0 < this.maxLookAhead && this.maxLookAhead--
                }
                ;
                ta.fromSaved = function(a, b, c) {
                    return b instanceof mc ? new ta(a,Ma(a.mode, b.state),c,b.lookAhead) : new ta(a,Ma(a.mode, b),c)
                }
                ;
                ta.prototype.save = function(a) {
                    a = !1 !== a ? Ma(this.doc.mode, this.state) : this.state;
                    return 0 < this.maxLookAhead ? new mc(a,this.maxLookAhead) : a
                }
                ;
                var je = function(a, b, c) {
                    this.start = a.start;
                    this.end = a.pos;
                    this.string = a.current();
                    this.type = b || null;
                    this.state = c
                }
                  , tf = !1
                  , Aa = !1
                  , kb = function(a, b, c) {
                    this.text = a;
                    ne(this, b);
                    this.height = c ? c(this) : 1
                };
                kb.prototype.lineNo = function() {
                    return J(this)
                }
                ;
                ab(kb);
                var qg = {}, pg = {}, eb = null, Cb = null, Ce = {
                    left: 0,
                    right: 0,
                    top: 0,
                    bottom: 0
                }, Sa, Za = function(a, b, c) {
                    this.cm = c;
                    var d = this.vert = p("div", [p("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar")
                      , e = this.horiz = p("div", [p("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
                    d.tabIndex = e.tabIndex = -1;
                    a(d);
                    a(e);
                    z(d, "scroll", function() {
                        d.clientHeight && b(d.scrollTop, "vertical")
                    });
                    z(e, "scroll", function() {
                        e.clientWidth && b(e.scrollLeft, "horizontal")
                    });
                    this.checkedZeroWidth = !1;
                    H && 8 > M && (this.horiz.style.minHeight = this.vert.style.minWidth = "18px")
                };
                Za.prototype.update = function(a) {
                    var b = a.scrollWidth > a.clientWidth + 1
                      , c = a.scrollHeight > a.clientHeight + 1
                      , d = a.nativeBarWidth;
                    c ? (this.vert.style.display = "block",
                    this.vert.style.bottom = b ? d + "px" : "0",
                    this.vert.firstChild.style.height = Math.max(0, a.scrollHeight - a.clientHeight + (a.viewHeight - (b ? d : 0))) + "px") : (this.vert.style.display = "",
                    this.vert.firstChild.style.height = "0");
                    b ? (this.horiz.style.display = "block",
                    this.horiz.style.right = c ? d + "px" : "0",
                    this.horiz.style.left = a.barLeft + "px",
                    this.horiz.firstChild.style.width = Math.max(0, a.scrollWidth - a.clientWidth + (a.viewWidth - a.barLeft - (c ? d : 0))) + "px") : (this.horiz.style.display = "",
                    this.horiz.firstChild.style.width = "0");
                    !this.checkedZeroWidth && 0 < a.clientHeight && (0 == d && this.zeroWidthHack(),
                    this.checkedZeroWidth = !0);
                    return {
                        right: c ? d : 0,
                        bottom: b ? d : 0
                    }
                }
                ;
                Za.prototype.setScrollLeft = function(a) {
                    this.horiz.scrollLeft != a && (this.horiz.scrollLeft = a);
                    this.disableHoriz && this.enableZeroWidthBar(this.horiz, this.disableHoriz, "horiz")
                }
                ;
                Za.prototype.setScrollTop = function(a) {
                    this.vert.scrollTop != a && (this.vert.scrollTop = a);
                    this.disableVert && this.enableZeroWidthBar(this.vert, this.disableVert, "vert")
                }
                ;
                Za.prototype.zeroWidthHack = function() {
                    this.horiz.style.height = this.vert.style.width = ma && !mh ? "12px" : "18px";
                    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = "none";
                    this.disableHoriz = new La;
                    this.disableVert = new La
                }
                ;
                Za.prototype.enableZeroWidthBar = function(a, b, c) {
                    function d() {
                        var e = a.getBoundingClientRect();
                        ("vert" == c ? document.elementFromPoint(e.right - 1, (e.top + e.bottom) / 2) : document.elementFromPoint((e.right + e.left) / 2, e.bottom - 1)) != a ? a.style.pointerEvents = "none" : b.set(1E3, d)
                    }
                    a.style.pointerEvents = "auto";
                    b.set(1E3, d)
                }
                ;
                Za.prototype.clear = function() {
                    var a = this.horiz.parentNode;
                    a.removeChild(this.horiz);
                    a.removeChild(this.vert)
                }
                ;
                var cc = function() {};
                cc.prototype.update = function() {
                    return {
                        bottom: 0,
                        right: 0
                    }
                }
                ;
                cc.prototype.setScrollLeft = function() {}
                ;
                cc.prototype.setScrollTop = function() {}
                ;
                cc.prototype.clear = function() {}
                ;
                var We = {
                    "native": Za,
                    "null": cc
                }
                  , Bg = 0
                  , zc = function(a, b, c) {
                    var d = a.display;
                    this.viewport = b;
                    this.visible = wc(d, a.doc, b);
                    this.editorIsHidden = !d.wrapper.offsetWidth;
                    this.wrapperHeight = d.wrapper.clientHeight;
                    this.wrapperWidth = d.wrapper.clientWidth;
                    this.oldDisplayWidth = Pa(a);
                    this.force = c;
                    this.dims = nd(a);
                    this.events = []
                };
                zc.prototype.signal = function(a, b) {
                    la(a, b) && this.events.push(arguments)
                }
                ;
                zc.prototype.finish = function() {
                    for (var a = 0; a < this.events.length; a++)
                        R.apply(null, this.events[a])
                }
                ;
                var Ac = 0
                  , ja = null;
                H ? ja = -.53 : Ca ? ja = 15 : qc ? ja = -.7 : Lc && (ja = -1 / 3);
                var ka = function(a, b) {
                    this.ranges = a;
                    this.primIndex = b
                };
                ka.prototype.primary = function() {
                    return this.ranges[this.primIndex]
                }
                ;
                ka.prototype.equals = function(a) {
                    if (a == this)
                        return !0;
                    if (a.primIndex != this.primIndex || a.ranges.length != this.ranges.length)
                        return !1;
                    for (var b = 0; b < this.ranges.length; b++) {
                        var c = this.ranges[b]
                          , d = a.ranges[b];
                        if (!$c(c.anchor, d.anchor) || !$c(c.head, d.head))
                            return !1
                    }
                    return !0
                }
                ;
                ka.prototype.deepCopy = function() {
                    for (var a = [], b = 0; b < this.ranges.length; b++)
                        a[b] = new I(ad(this.ranges[b].anchor),ad(this.ranges[b].head));
                    return new ka(a,this.primIndex)
                }
                ;
                ka.prototype.somethingSelected = function() {
                    for (var a = 0; a < this.ranges.length; a++)
                        if (!this.ranges[a].empty())
                            return !0;
                    return !1
                }
                ;
                ka.prototype.contains = function(a, b) {
                    b || (b = a);
                    for (var c = 0; c < this.ranges.length; c++) {
                        var d = this.ranges[c];
                        if (0 <= A(b, d.from()) && 0 >= A(a, d.to()))
                            return c
                    }
                    return -1
                }
                ;
                var I = function(a, b) {
                    this.anchor = a;
                    this.head = b
                };
                I.prototype.from = function() {
                    return lc(this.anchor, this.head)
                }
                ;
                I.prototype.to = function() {
                    return kc(this.anchor, this.head)
                }
                ;
                I.prototype.empty = function() {
                    return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch
                }
                ;
                Qb.prototype = {
                    chunkSize: function() {
                        return this.lines.length
                    },
                    removeInner: function(a, b) {
                        for (var c = a, d = a + b; c < d; ++c) {
                            var e = this.lines[c];
                            this.height -= e.height;
                            var f = e;
                            f.parent = null;
                            me(f);
                            W(e, "delete")
                        }
                        this.lines.splice(a, b)
                    },
                    collapse: function(a) {
                        a.push.apply(a, this.lines)
                    },
                    insertInner: function(a, b, c) {
                        this.height += c;
                        this.lines = this.lines.slice(0, a).concat(b).concat(this.lines.slice(a));
                        for (a = 0; a < b.length; ++a)
                            b[a].parent = this
                    },
                    iterN: function(a, b, c) {
                        for (b = a + b; a < b; ++a)
                            if (c(this.lines[a]))
                                return !0
                    }
                };
                Rb.prototype = {
                    chunkSize: function() {
                        return this.size
                    },
                    removeInner: function(a, b) {
                        this.size -= b;
                        for (var c = 0; c < this.children.length; ++c) {
                            var d = this.children[c]
                              , e = d.chunkSize();
                            if (a < e) {
                                var f = Math.min(b, e - a)
                                  , g = d.height;
                                d.removeInner(a, f);
                                this.height -= g - d.height;
                                e == f && (this.children.splice(c--, 1),
                                d.parent = null);
                                if (0 == (b -= f))
                                    break;
                                a = 0
                            } else
                                a -= e
                        }
                        25 > this.size - b && (1 < this.children.length || !(this.children[0]instanceof Qb)) && (a = [],
                        this.collapse(a),
                        this.children = [new Qb(a)],
                        this.children[0].parent = this)
                    },
                    collapse: function(a) {
                        for (var b = 0; b < this.children.length; ++b)
                            this.children[b].collapse(a)
                    },
                    insertInner: function(a, b, c) {
                        this.size += b.length;
                        this.height += c;
                        for (var d = 0; d < this.children.length; ++d) {
                            var e = this.children[d]
                              , f = e.chunkSize();
                            if (a <= f) {
                                e.insertInner(a, b, c);
                                if (e.lines && 50 < e.lines.length) {
                                    for (b = a = e.lines.length % 25 + 25; b < e.lines.length; )
                                        c = new Qb(e.lines.slice(b, b += 25)),
                                        e.height -= c.height,
                                        this.children.splice(++d, 0, c),
                                        c.parent = this;
                                    e.lines = e.lines.slice(0, a);
                                    this.maybeSpill()
                                }
                                break
                            }
                            a -= f
                        }
                    },
                    maybeSpill: function() {
                        if (!(10 >= this.children.length)) {
                            var a = this;
                            do {
                                var b = a.children.splice(a.children.length - 5, 5);
                                b = new Rb(b);
                                if (a.parent) {
                                    a.size -= b.size;
                                    a.height -= b.height;
                                    var c = O(a.parent.children, a);
                                    a.parent.children.splice(c + 1, 0, b)
                                } else
                                    c = new Rb(a.children),
                                    c.parent = a,
                                    a.children = [c, b],
                                    a = c;
                                b.parent = a.parent
                            } while (10 < a.children.length);
                            a.parent.maybeSpill()
                        }
                    },
                    iterN: function(a, b, c) {
                        for (var d = 0; d < this.children.length; ++d) {
                            var e = this.children[d]
                              , f = e.chunkSize();
                            if (a < f) {
                                f = Math.min(b, f - a);
                                if (e.iterN(a, f, c))
                                    return !0;
                                if (0 == (b -= f))
                                    break;
                                a = 0
                            } else
                                a -= f
                        }
                    }
                };
                var Sb = function(a, b, c) {
                    if (c)
                        for (var d in c)
                            c.hasOwnProperty(d) && (this[d] = c[d]);
                    this.doc = a;
                    this.node = b
                };
                Sb.prototype.clear = function() {
                    var a = this.doc.cm
                      , b = this.line.widgets
                      , c = this.line
                      , d = J(c);
                    if (null != d && b) {
                        for (var e = 0; e < b.length; ++e)
                            b[e] == this && b.splice(e--, 1);
                        b.length || (c.widgets = null);
                        var f = Eb(this);
                        sa(c, Math.max(0, c.height - f));
                        a && (ea(a, function() {
                            var b = -f;
                            va(c) < (a.curOp && a.curOp.scrollTop || a.doc.scrollTop) && xc(a, b);
                            Ga(a, d, "widget")
                        }),
                        W(a, "lineWidgetCleared", a, this, d))
                    }
                }
                ;
                Sb.prototype.changed = function() {
                    var a = this
                      , b = this.height
                      , c = this.doc.cm
                      , d = this.line;
                    this.height = null;
                    var e = Eb(this) - b;
                    e && (Ea(this.doc, d) || sa(d, d.height + e),
                    c && ea(c, function() {
                        c.curOp.forceUpdate = !0;
                        va(d) < (c.curOp && c.curOp.scrollTop || c.doc.scrollTop) && xc(c, e);
                        W(c, "lineWidgetChanged", c, a, J(d))
                    }))
                }
                ;
                ab(Sb);
                var zf = 0
                  , Ja = function(a, b) {
                    this.lines = [];
                    this.type = b;
                    this.doc = a;
                    this.id = ++zf
                };
                Ja.prototype.clear = function() {
                    if (!this.explicitlyCleared) {
                        var a = this.doc.cm
                          , b = a && !a.curOp;
                        b && Wa(a);
                        if (la(this, "clear")) {
                            var c = this.find();
                            c && W(this, "clear", c.from, c.to)
                        }
                        for (var d = c = null, e = 0; e < this.lines.length; ++e) {
                            var f = this.lines[e]
                              , g = Ab(f.markedSpans, this);
                            a && !this.collapsed ? Ga(a, J(f), "text") : a && (null != g.to && (d = J(f)),
                            null != g.from && (c = J(f)));
                            for (var h = f, k = void 0, l = f.markedSpans, m = g, q = 0; q < l.length; ++q)
                                l[q] != m && (k || (k = [])).push(l[q]);
                            h.markedSpans = k;
                            null == g.from && this.collapsed && !Ea(this.doc, f) && a && sa(f, gb(a.display))
                        }
                        if (a && this.collapsed && !a.options.lineWrapping)
                            for (e = 0; e < this.lines.length; ++e)
                                f = ua(this.lines[e]),
                                g = oc(f),
                                g > a.display.maxLineLength && (a.display.maxLine = f,
                                a.display.maxLineLength = g,
                                a.display.maxLineChanged = !0);
                        null != c && a && this.collapsed && ba(a, c, d + 1);
                        this.lines.length = 0;
                        this.explicitlyCleared = !0;
                        this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1,
                        a && pf(a.doc));
                        a && W(a, "markerCleared", a, this, c, d);
                        b && Xa(a);
                        this.parent && this.parent.clear()
                    }
                }
                ;
                Ja.prototype.find = function(a, b) {
                    null == a && "bookmark" == this.type && (a = 1);
                    for (var c, d, e = 0; e < this.lines.length; ++e) {
                        var f = this.lines[e]
                          , g = Ab(f.markedSpans, this);
                        if (null != g.from && (c = r(b ? f : J(f), g.from),
                        -1 == a))
                            return c;
                        if (null != g.to && (d = r(b ? f : J(f), g.to),
                        1 == a))
                            return d
                    }
                    return c && {
                        from: c,
                        to: d
                    }
                }
                ;
                Ja.prototype.changed = function() {
                    var a = this
                      , b = this.find(-1, !0)
                      , c = this
                      , d = this.doc.cm;
                    b && d && ea(d, function() {
                        var e = b.line
                          , f = J(b.line);
                        if (f = md(d, f))
                            De(f),
                            d.curOp.selectionChanged = d.curOp.forceUpdate = !0;
                        d.curOp.updateMaxLine = !0;
                        Ea(c.doc, e) || null == c.height || (f = c.height,
                        c.height = null,
                        (f = Eb(c) - f) && sa(e, e.height + f));
                        W(d, "markerChanged", d, a)
                    })
                }
                ;
                Ja.prototype.attachLine = function(a) {
                    if (!this.lines.length && this.doc.cm) {
                        var b = this.doc.cm.curOp;
                        b.maybeHiddenMarkers && -1 != O(b.maybeHiddenMarkers, this) || (b.maybeUnhiddenMarkers || (b.maybeUnhiddenMarkers = [])).push(this)
                    }
                    this.lines.push(a)
                }
                ;
                Ja.prototype.detachLine = function(a) {
                    this.lines.splice(O(this.lines, a), 1);
                    !this.lines.length && this.doc.cm && (a = this.doc.cm.curOp,
                    (a.maybeHiddenMarkers || (a.maybeHiddenMarkers = [])).push(this))
                }
                ;
                ab(Ja);
                var Tb = function(a, b) {
                    this.markers = a;
                    this.primary = b;
                    for (b = 0; b < a.length; ++b)
                        a[b].parent = this
                };
                Tb.prototype.clear = function() {
                    if (!this.explicitlyCleared) {
                        this.explicitlyCleared = !0;
                        for (var a = 0; a < this.markers.length; ++a)
                            this.markers[a].clear();
                        W(this, "clear")
                    }
                }
                ;
                Tb.prototype.find = function(a, b) {
                    return this.primary.find(a, b)
                }
                ;
                ab(Tb);
                var ph = 0
                  , ca = function(a, b, c, d, e) {
                    if (!(this instanceof ca))
                        return new ca(a,b,c,d,e);
                    null == c && (c = 0);
                    Rb.call(this, [new Qb([new kb("",null)])]);
                    this.first = c;
                    this.scrollTop = this.scrollLeft = 0;
                    this.cantEdit = !1;
                    this.cleanGeneration = 1;
                    this.modeFrontier = this.highlightFrontier = c;
                    c = r(c, 0);
                    this.sel = Da(c);
                    this.history = new Bc(null);
                    this.id = ++ph;
                    this.modeOption = b;
                    this.lineSep = d;
                    this.direction = "rtl" == e ? "rtl" : "ltr";
                    this.extend = !1;
                    "string" == typeof a && (a = this.splitLines(a));
                    Hd(this, {
                        from: c,
                        to: c,
                        text: a
                    });
                    X(this, Da(c), xa)
                };
                ca.prototype = Xd(Rb.prototype, {
                    constructor: ca,
                    iter: function(a, b, c) {
                        c ? this.iterN(a - this.first, b - a, c) : this.iterN(this.first, this.first + this.size, a)
                    },
                    insert: function(a, b) {
                        for (var c = 0, d = 0; d < b.length; ++d)
                            c += b[d].height;
                        this.insertInner(a - this.first, b, c)
                    },
                    remove: function(a, b) {
                        this.removeInner(a - this.first, b)
                    },
                    getValue: function(a) {
                        var b = Yc(this, this.first, this.first + this.size);
                        return !1 === a ? b : b.join(a || this.lineSeparator())
                    },
                    setValue: V(function(a) {
                        var b = r(this.first, 0)
                          , c = this.first + this.size - 1;
                        nb(this, {
                            from: b,
                            to: r(c, u(this, c).text.length),
                            text: this.splitLines(a),
                            origin: "setValue",
                            full: !0
                        }, !0);
                        this.cm && Hb(this.cm, 0, 0);
                        X(this, Da(b), xa)
                    }),
                    replaceRange: function(a, b, c, d) {
                        b = B(this, b);
                        c = c ? B(this, c) : b;
                        ob(this, a, b, c, d)
                    },
                    getRange: function(a, b, c) {
                        a = Na(this, B(this, a), B(this, b));
                        return !1 === c ? a : a.join(c || this.lineSeparator())
                    },
                    getLine: function(a) {
                        return (a = this.getLineHandle(a)) && a.text
                    },
                    getLineHandle: function(a) {
                        if (yb(this, a))
                            return u(this, a)
                    },
                    getLineNumber: function(a) {
                        return J(a)
                    },
                    getLineHandleVisualStart: function(a) {
                        "number" == typeof a && (a = u(this, a));
                        return ua(a)
                    },
                    lineCount: function() {
                        return this.size
                    },
                    firstLine: function() {
                        return this.first
                    },
                    lastLine: function() {
                        return this.first + this.size - 1
                    },
                    clipPos: function(a) {
                        return B(this, a)
                    },
                    getCursor: function(a) {
                        var b = this.sel.primary();
                        return null == a || "head" == a ? b.head : "anchor" == a ? b.anchor : "end" == a || "to" == a || !1 === a ? b.to() : b.from()
                    },
                    listSelections: function() {
                        return this.sel.ranges
                    },
                    somethingSelected: function() {
                        return this.sel.somethingSelected()
                    },
                    setCursor: V(function(a, b, c) {
                        a = B(this, "number" == typeof a ? r(a, b || 0) : a);
                        X(this, Da(a, null), c)
                    }),
                    setSelection: V(function(a, b, c) {
                        var d = B(this, a);
                        a = B(this, b || a);
                        X(this, Da(d, a), c)
                    }),
                    extendSelection: V(function(a, b, c) {
                        Dc(this, B(this, a), b && B(this, b), c)
                    }),
                    extendSelections: V(function(a, b) {
                        lf(this, de(this, a), b)
                    }),
                    extendSelectionsBy: V(function(a, b) {
                        a = hc(this.sel.ranges, a);
                        lf(this, de(this, a), b)
                    }),
                    setSelections: V(function(a, b, c) {
                        if (a.length) {
                            for (var d = [], e = 0; e < a.length; e++)
                                d[e] = new I(B(this, a[e].anchor),B(this, a[e].head));
                            null == b && (b = Math.min(a.length - 1, this.sel.primIndex));
                            X(this, qa(this.cm, d, b), c)
                        }
                    }),
                    addSelection: V(function(a, b, c) {
                        var d = this.sel.ranges.slice(0);
                        d.push(new I(B(this, a),B(this, b || a)));
                        X(this, qa(this.cm, d, d.length - 1), c)
                    }),
                    getSelection: function(a) {
                        for (var b = this.sel.ranges, c, d = 0; d < b.length; d++) {
                            var e = Na(this, b[d].from(), b[d].to());
                            c = c ? c.concat(e) : e
                        }
                        return !1 === a ? c : c.join(a || this.lineSeparator())
                    },
                    getSelections: function(a) {
                        for (var b = [], c = this.sel.ranges, d = 0; d < c.length; d++) {
                            var e = Na(this, c[d].from(), c[d].to());
                            !1 !== a && (e = e.join(a || this.lineSeparator()));
                            b[d] = e
                        }
                        return b
                    },
                    replaceSelection: function(a, b, c) {
                        for (var d = [], e = 0; e < this.sel.ranges.length; e++)
                            d[e] = a;
                        this.replaceSelections(d, b, c || "+input")
                    },
                    replaceSelections: V(function(a, b, c) {
                        for (var d = [], e = this.sel, f = 0; f < e.ranges.length; f++) {
                            var g = e.ranges[f];
                            d[f] = {
                                from: g.from(),
                                to: g.to(),
                                text: this.splitLines(a[f]),
                                origin: c
                            }
                        }
                        if (a = b && "end" != b) {
                            a = [];
                            e = c = r(this.first, 0);
                            for (f = 0; f < d.length; f++) {
                                var h = d[f];
                                g = cf(h.from, c, e);
                                var k = cf(Ha(h), c, e);
                                c = h.to;
                                e = k;
                                "around" == b ? (h = this.sel.ranges[f],
                                h = 0 > A(h.head, h.anchor),
                                a[f] = new I(h ? k : g,h ? g : k)) : a[f] = new I(g,g)
                            }
                            a = new ka(a,this.sel.primIndex)
                        }
                        b = a;
                        for (a = d.length - 1; 0 <= a; a--)
                            nb(this, d[a]);
                        b ? mf(this, b) : this.cm && ib(this.cm)
                    }),
                    undo: V(function() {
                        Gc(this, "undo")
                    }),
                    redo: V(function() {
                        Gc(this, "redo")
                    }),
                    undoSelection: V(function() {
                        Gc(this, "undo", !0)
                    }),
                    redoSelection: V(function() {
                        Gc(this, "redo", !0)
                    }),
                    setExtending: function(a) {
                        this.extend = a
                    },
                    getExtending: function() {
                        return this.extend
                    },
                    historySize: function() {
                        for (var a = this.history, b = 0, c = 0, d = 0; d < a.done.length; d++)
                            a.done[d].ranges || ++b;
                        for (d = 0; d < a.undone.length; d++)
                            a.undone[d].ranges || ++c;
                        return {
                            undo: b,
                            redo: c
                        }
                    },
                    clearHistory: function() {
                        var a = this;
                        this.history = new Bc(this.history.maxGeneration);
                        Ia(this, function(b) {
                            return b.history = a.history
                        }, !0)
                    },
                    markClean: function() {
                        this.cleanGeneration = this.changeGeneration(!0)
                    },
                    changeGeneration: function(a) {
                        a && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null);
                        return this.history.generation
                    },
                    isClean: function(a) {
                        return this.history.generation == (a || this.cleanGeneration)
                    },
                    getHistory: function() {
                        return {
                            done: lb(this.history.done),
                            undone: lb(this.history.undone)
                        }
                    },
                    setHistory: function(a) {
                        var b = this.history = new Bc(this.history.maxGeneration);
                        b.done = lb(a.done.slice(0), null, !0);
                        b.undone = lb(a.undone.slice(0), null, !0)
                    },
                    setGutterMarker: V(function(a, b, c) {
                        return Pb(this, a, "gutter", function(a) {
                            var d = a.gutterMarkers || (a.gutterMarkers = {});
                            d[b] = c;
                            !c && Yd(d) && (a.gutterMarkers = null);
                            return !0
                        })
                    }),
                    clearGutter: V(function(a) {
                        var b = this;
                        this.iter(function(c) {
                            c.gutterMarkers && c.gutterMarkers[a] && Pb(b, c, "gutter", function() {
                                c.gutterMarkers[a] = null;
                                Yd(c.gutterMarkers) && (c.gutterMarkers = null);
                                return !0
                            })
                        })
                    }),
                    lineInfo: function(a) {
                        if ("number" == typeof a) {
                            if (!yb(this, a))
                                return null;
                            var b = a;
                            a = u(this, a);
                            if (!a)
                                return null
                        } else if (b = J(a),
                        null == b)
                            return null;
                        return {
                            line: b,
                            handle: a,
                            text: a.text,
                            gutterMarkers: a.gutterMarkers,
                            textClass: a.textClass,
                            bgClass: a.bgClass,
                            wrapClass: a.wrapClass,
                            widgets: a.widgets
                        }
                    },
                    addLineClass: V(function(a, b, c) {
                        return Pb(this, a, "gutter" == b ? "gutter" : "class", function(a) {
                            var d = "text" == b ? "textClass" : "background" == b ? "bgClass" : "gutter" == b ? "gutterClass" : "wrapClass";
                            if (a[d]) {
                                if (v(c).test(a[d]))
                                    return !1;
                                a[d] += " " + c
                            } else
                                a[d] = c;
                            return !0
                        })
                    }),
                    removeLineClass: V(function(a, b, c) {
                        return Pb(this, a, "gutter" == b ? "gutter" : "class", function(a) {
                            var d = "text" == b ? "textClass" : "background" == b ? "bgClass" : "gutter" == b ? "gutterClass" : "wrapClass"
                              , f = a[d];
                            if (f)
                                if (null == c)
                                    a[d] = null;
                                else {
                                    var g = f.match(v(c));
                                    if (!g)
                                        return !1;
                                    var h = g.index + g[0].length;
                                    a[d] = f.slice(0, g.index) + (g.index && h != f.length ? " " : "") + f.slice(h) || null
                                }
                            else
                                return !1;
                            return !0
                        })
                    }),
                    addLineWidget: V(function(a, b, c) {
                        return Lg(this, a, b, c)
                    }),
                    removeLineWidget: function(a) {
                        a.clear()
                    },
                    markText: function(a, b, c) {
                        return pb(this, B(this, a), B(this, b), c, c && c.type || "range")
                    },
                    setBookmark: function(a, b) {
                        b = {
                            replacedWith: b && (null == b.nodeType ? b.widget : b),
                            insertLeft: b && b.insertLeft,
                            clearWhenEmpty: !1,
                            shared: b && b.shared,
                            handleMouseEvents: b && b.handleMouseEvents
                        };
                        a = B(this, a);
                        return pb(this, a, a, b, "bookmark")
                    },
                    findMarksAt: function(a) {
                        a = B(this, a);
                        var b = []
                          , c = u(this, a.line).markedSpans;
                        if (c)
                            for (var d = 0; d < c.length; ++d) {
                                var e = c[d];
                                (null == e.from || e.from <= a.ch) && (null == e.to || e.to >= a.ch) && b.push(e.marker.parent || e.marker)
                            }
                        return b
                    },
                    findMarks: function(a, b, c) {
                        a = B(this, a);
                        b = B(this, b);
                        var d = []
                          , e = a.line;
                        this.iter(a.line, b.line + 1, function(f) {
                            if (f = f.markedSpans)
                                for (var g = 0; g < f.length; g++) {
                                    var h = f[g];
                                    null != h.to && e == a.line && a.ch >= h.to || null == h.from && e != a.line || null != h.from && e == b.line && h.from >= b.ch || c && !c(h.marker) || d.push(h.marker.parent || h.marker)
                                }
                            ++e
                        });
                        return d
                    },
                    getAllMarks: function() {
                        var a = [];
                        this.iter(function(b) {
                            if (b = b.markedSpans)
                                for (var c = 0; c < b.length; ++c)
                                    null != b[c].from && a.push(b[c].marker)
                        });
                        return a
                    },
                    posFromIndex: function(a) {
                        var b, c = this.first, d = this.lineSeparator().length;
                        this.iter(function(e) {
                            e = e.text.length + d;
                            if (e > a)
                                return b = a,
                                !0;
                            a -= e;
                            ++c
                        });
                        return B(this, r(c, b))
                    },
                    indexFromPos: function(a) {
                        a = B(this, a);
                        var b = a.ch;
                        if (a.line < this.first || 0 > a.ch)
                            return 0;
                        var c = this.lineSeparator().length;
                        this.iter(this.first, a.line, function(a) {
                            b += a.text.length + c
                        });
                        return b
                    },
                    copy: function(a) {
                        var b = new ca(Yc(this, this.first, this.first + this.size),this.modeOption,this.first,this.lineSep,this.direction);
                        b.scrollTop = this.scrollTop;
                        b.scrollLeft = this.scrollLeft;
                        b.sel = this.sel;
                        b.extend = !1;
                        a && (b.history.undoDepth = this.history.undoDepth,
                        b.setHistory(this.getHistory()));
                        return b
                    },
                    linkedDoc: function(a) {
                        a || (a = {});
                        var b = this.first
                          , c = this.first + this.size;
                        null != a.from && a.from > b && (b = a.from);
                        null != a.to && a.to < c && (c = a.to);
                        b = new ca(Yc(this, b, c),a.mode || this.modeOption,b,this.lineSep,this.direction);
                        a.sharedHist && (b.history = this.history);
                        (this.linked || (this.linked = [])).push({
                            doc: b,
                            sharedHist: a.sharedHist
                        });
                        b.linked = [{
                            doc: this,
                            isParent: !0,
                            sharedHist: a.sharedHist
                        }];
                        a = Af(this);
                        for (c = 0; c < a.length; c++) {
                            var d = a[c]
                              , e = d.find()
                              , f = b.clipPos(e.from);
                            e = b.clipPos(e.to);
                            A(f, e) && (f = pb(b, f, e, d.primary, d.primary.type),
                            d.markers.push(f),
                            f.parent = d)
                        }
                        return b
                    },
                    unlinkDoc: function(a) {
                        a instanceof N && (a = a.doc);
                        if (this.linked)
                            for (var b = 0; b < this.linked.length; ++b)
                                if (this.linked[b].doc == a) {
                                    this.linked.splice(b, 1);
                                    a.unlinkDoc(this);
                                    Ng(Af(this));
                                    break
                                }
                        if (a.history == this.history) {
                            var c = [a.id];
                            Ia(a, function(a) {
                                return c.push(a.id)
                            }, !0);
                            a.history = new Bc(null);
                            a.history.done = lb(this.history.done, c);
                            a.history.undone = lb(this.history.undone, c)
                        }
                    },
                    iterLinkedDocs: function(a) {
                        Ia(this, a)
                    },
                    getMode: function() {
                        return this.mode
                    },
                    getEditor: function() {
                        return this.cm
                    },
                    splitLines: function(a) {
                        return this.lineSep ? a.split(this.lineSep) : Ud(a)
                    },
                    lineSeparator: function() {
                        return this.lineSep || "\n"
                    },
                    setDirection: V(function(a) {
                        "rtl" != a && (a = "ltr");
                        a != this.direction && (this.direction = a,
                        this.iter(function(a) {
                            return a.order = null
                        }),
                        this.cm && Hg(this.cm))
                    })
                });
                ca.prototype.eachLine = ca.prototype.iter;
                for (var Cf = 0, Uf = !1, Ka = {
                    3: "Pause",
                    8: "Backspace",
                    9: "Tab",
                    13: "Enter",
                    16: "Shift",
                    17: "Ctrl",
                    18: "Alt",
                    19: "Pause",
                    20: "CapsLock",
                    27: "Esc",
                    32: "Space",
                    33: "PageUp",
                    34: "PageDown",
                    35: "End",
                    36: "Home",
                    37: "Left",
                    38: "Up",
                    39: "Right",
                    40: "Down",
                    44: "PrintScrn",
                    45: "Insert",
                    46: "Delete",
                    59: ";",
                    61: "=",
                    91: "Mod",
                    92: "Mod",
                    93: "Mod",
                    106: "*",
                    107: "=",
                    109: "-",
                    110: ".",
                    111: "/",
                    145: "ScrollLock",
                    173: "-",
                    186: ";",
                    187: "=",
                    188: ",",
                    189: "-",
                    190: ".",
                    191: "/",
                    192: "`",
                    219: "[",
                    220: "\\",
                    221: "]",
                    222: "'",
                    224: "Mod",
                    63232: "Up",
                    63233: "Down",
                    63234: "Left",
                    63235: "Right",
                    63272: "Delete",
                    63273: "Home",
                    63275: "End",
                    63276: "PageUp",
                    63277: "PageDown",
                    63302: "Insert"
                }, dc = 0; 10 > dc; dc++)
                    Ka[dc + 48] = Ka[dc + 96] = String(dc);
                for (var Pc = 65; 90 >= Pc; Pc++)
                    Ka[Pc] = String.fromCharCode(Pc);
                for (var ec = 1; 12 >= ec; ec++)
                    Ka[ec + 111] = Ka[ec + 63235] = "F" + ec;
                var Ub = {
                    basic: {
                        Left: "goCharLeft",
                        Right: "goCharRight",
                        Up: "goLineUp",
                        Down: "goLineDown",
                        End: "goLineEnd",
                        Home: "goLineStartSmart",
                        PageUp: "goPageUp",
                        PageDown: "goPageDown",
                        Delete: "delCharAfter",
                        Backspace: "delCharBefore",
                        "Shift-Backspace": "delCharBefore",
                        Tab: "defaultTab",
                        "Shift-Tab": "indentAuto",
                        Enter: "newlineAndIndent",
                        Insert: "toggleOverwrite",
                        Esc: "singleSelection"
                    },
                    pcDefault: {
                        "Ctrl-A": "selectAll",
                        "Ctrl-D": "deleteLine",
                        "Ctrl-Z": "undo",
                        "Shift-Ctrl-Z": "redo",
                        "Ctrl-Y": "redo",
                        "Ctrl-Home": "goDocStart",
                        "Ctrl-End": "goDocEnd",
                        "Ctrl-Up": "goLineUp",
                        "Ctrl-Down": "goLineDown",
                        "Ctrl-Left": "goGroupLeft",
                        "Ctrl-Right": "goGroupRight",
                        "Alt-Left": "goLineStart",
                        "Alt-Right": "goLineEnd",
                        "Ctrl-Backspace": "delGroupBefore",
                        "Ctrl-Delete": "delGroupAfter",
                        "Ctrl-S": "save",
                        "Ctrl-F": "find",
                        "Ctrl-G": "findNext",
                        "Shift-Ctrl-G": "findPrev",
                        "Shift-Ctrl-F": "replace",
                        "Shift-Ctrl-R": "replaceAll",
                        "Ctrl-[": "indentLess",
                        "Ctrl-]": "indentMore",
                        "Ctrl-U": "undoSelection",
                        "Shift-Ctrl-U": "redoSelection",
                        "Alt-U": "redoSelection",
                        fallthrough: "basic"
                    },
                    emacsy: {
                        "Ctrl-F": "goCharRight",
                        "Ctrl-B": "goCharLeft",
                        "Ctrl-P": "goLineUp",
                        "Ctrl-N": "goLineDown",
                        "Alt-F": "goWordRight",
                        "Alt-B": "goWordLeft",
                        "Ctrl-A": "goLineStart",
                        "Ctrl-E": "goLineEnd",
                        "Ctrl-V": "goPageDown",
                        "Shift-Ctrl-V": "goPageUp",
                        "Ctrl-D": "delCharAfter",
                        "Ctrl-H": "delCharBefore",
                        "Alt-D": "delWordAfter",
                        "Alt-Backspace": "delWordBefore",
                        "Ctrl-K": "killLine",
                        "Ctrl-T": "transposeChars",
                        "Ctrl-O": "openLine"
                    },
                    macDefault: {
                        "Cmd-A": "selectAll",
                        "Cmd-D": "deleteLine",
                        "Cmd-Z": "undo",
                        "Shift-Cmd-Z": "redo",
                        "Cmd-Y": "redo",
                        "Cmd-Home": "goDocStart",
                        "Cmd-Up": "goDocStart",
                        "Cmd-End": "goDocEnd",
                        "Cmd-Down": "goDocEnd",
                        "Alt-Left": "goGroupLeft",
                        "Alt-Right": "goGroupRight",
                        "Cmd-Left": "goLineLeft",
                        "Cmd-Right": "goLineRight",
                        "Alt-Backspace": "delGroupBefore",
                        "Ctrl-Alt-Backspace": "delGroupAfter",
                        "Alt-Delete": "delGroupAfter",
                        "Cmd-S": "save",
                        "Cmd-F": "find",
                        "Cmd-G": "findNext",
                        "Shift-Cmd-G": "findPrev",
                        "Cmd-Alt-F": "replace",
                        "Shift-Cmd-Alt-F": "replaceAll",
                        "Cmd-[": "indentLess",
                        "Cmd-]": "indentMore",
                        "Cmd-Backspace": "delWrappedLineLeft",
                        "Cmd-Delete": "delWrappedLineRight",
                        "Cmd-U": "undoSelection",
                        "Shift-Cmd-U": "redoSelection",
                        "Ctrl-Up": "goDocStart",
                        "Ctrl-Down": "goDocEnd",
                        fallthrough: ["basic", "emacsy"]
                    }
                };
                Ub["default"] = ma ? Ub.macDefault : Ub.pcDefault;
                var Vb = {
                    selectAll: rf,
                    singleSelection: function(a) {
                        return a.setSelection(a.getCursor("anchor"), a.getCursor("head"), xa)
                    },
                    killLine: function(a) {
                        return rb(a, function(b) {
                            if (b.empty()) {
                                var c = u(a.doc, b.head.line).text.length;
                                return b.head.ch == c && b.head.line < a.lastLine() ? {
                                    from: b.head,
                                    to: r(b.head.line + 1, 0)
                                } : {
                                    from: b.head,
                                    to: r(b.head.line, c)
                                }
                            }
                            return {
                                from: b.from(),
                                to: b.to()
                            }
                        })
                    },
                    deleteLine: function(a) {
                        return rb(a, function(b) {
                            return {
                                from: r(b.from().line, 0),
                                to: B(a.doc, r(b.to().line + 1, 0))
                            }
                        })
                    },
                    delLineLeft: function(a) {
                        return rb(a, function(a) {
                            return {
                                from: r(a.from().line, 0),
                                to: a.from()
                            }
                        })
                    },
                    delWrappedLineLeft: function(a) {
                        return rb(a, function(b) {
                            var c = a.charCoords(b.head, "div").top + 5;
                            return {
                                from: a.coordsChar({
                                    left: 0,
                                    top: c
                                }, "div"),
                                to: b.from()
                            }
                        })
                    },
                    delWrappedLineRight: function(a) {
                        return rb(a, function(b) {
                            var c = a.charCoords(b.head, "div").top + 5;
                            c = a.coordsChar({
                                left: a.display.lineDiv.offsetWidth + 100,
                                top: c
                            }, "div");
                            return {
                                from: b.from(),
                                to: c
                            }
                        })
                    },
                    undo: function(a) {
                        return a.undo()
                    },
                    redo: function(a) {
                        return a.redo()
                    },
                    undoSelection: function(a) {
                        return a.undoSelection()
                    },
                    redoSelection: function(a) {
                        return a.redoSelection()
                    },
                    goDocStart: function(a) {
                        return a.extendSelection(r(a.firstLine(), 0))
                    },
                    goDocEnd: function(a) {
                        return a.extendSelection(r(a.lastLine()))
                    },
                    goLineStart: function(a) {
                        return a.extendSelectionsBy(function(b) {
                            return If(a, b.head.line)
                        }, {
                            origin: "+move",
                            bias: 1
                        })
                    },
                    goLineStartSmart: function(a) {
                        return a.extendSelectionsBy(function(b) {
                            return Jf(a, b.head)
                        }, {
                            origin: "+move",
                            bias: 1
                        })
                    },
                    goLineEnd: function(a) {
                        return a.extendSelectionsBy(function(b) {
                            b = b.head.line;
                            var c = u(a.doc, b);
                            var d = c;
                            for (var e; e = db(d, !1); )
                                d = e.find(1, !0).line;
                            d != c && (b = J(d));
                            return Nd(!0, a, c, b, -1)
                        }, {
                            origin: "+move",
                            bias: -1
                        })
                    },
                    goLineRight: function(a) {
                        return a.extendSelectionsBy(function(b) {
                            b = a.cursorCoords(b.head, "div").top + 5;
                            return a.coordsChar({
                                left: a.display.lineDiv.offsetWidth + 100,
                                top: b
                            }, "div")
                        }, bc)
                    },
                    goLineLeft: function(a) {
                        return a.extendSelectionsBy(function(b) {
                            b = a.cursorCoords(b.head, "div").top + 5;
                            return a.coordsChar({
                                left: 0,
                                top: b
                            }, "div")
                        }, bc)
                    },
                    goLineLeftSmart: function(a) {
                        return a.extendSelectionsBy(function(b) {
                            var c = a.cursorCoords(b.head, "div").top + 5;
                            c = a.coordsChar({
                                left: 0,
                                top: c
                            }, "div");
                            return c.ch < a.getLine(c.line).search(/\S/) ? Jf(a, b.head) : c
                        }, bc)
                    },
                    goLineUp: function(a) {
                        return a.moveV(-1, "line")
                    },
                    goLineDown: function(a) {
                        return a.moveV(1, "line")
                    },
                    goPageUp: function(a) {
                        return a.moveV(-1, "page")
                    },
                    goPageDown: function(a) {
                        return a.moveV(1, "page")
                    },
                    goCharLeft: function(a) {
                        return a.moveH(-1, "char")
                    },
                    goCharRight: function(a) {
                        return a.moveH(1, "char")
                    },
                    goColumnLeft: function(a) {
                        return a.moveH(-1, "column")
                    },
                    goColumnRight: function(a) {
                        return a.moveH(1, "column")
                    },
                    goWordLeft: function(a) {
                        return a.moveH(-1, "word")
                    },
                    goGroupRight: function(a) {
                        return a.moveH(1, "group")
                    },
                    goGroupLeft: function(a) {
                        return a.moveH(-1, "group")
                    },
                    goWordRight: function(a) {
                        return a.moveH(1, "word")
                    },
                    delCharBefore: function(a) {
                        return a.deleteH(-1, "codepoint")
                    },
                    delCharAfter: function(a) {
                        return a.deleteH(1, "char")
                    },
                    delWordBefore: function(a) {
                        return a.deleteH(-1, "word")
                    },
                    delWordAfter: function(a) {
                        return a.deleteH(1, "word")
                    },
                    delGroupBefore: function(a) {
                        return a.deleteH(-1, "group")
                    },
                    delGroupAfter: function(a) {
                        return a.deleteH(1, "group")
                    },
                    indentAuto: function(a) {
                        return a.indentSelection("smart")
                    },
                    indentMore: function(a) {
                        return a.indentSelection("add")
                    },
                    indentLess: function(a) {
                        return a.indentSelection("subtract")
                    },
                    insertTab: function(a) {
                        return a.replaceSelection("\t")
                    },
                    insertSoftTab: function(a) {
                        for (var b = [], c = a.listSelections(), d = a.options.tabSize, e = 0; e < c.length; e++) {
                            var f = c[e].from();
                            f = F(a.getLine(f.line), f.ch, d);
                            b.push(Qc(d - f % d))
                        }
                        a.replaceSelections(b)
                    },
                    defaultTab: function(a) {
                        a.somethingSelected() ? a.indentSelection("add") : a.execCommand("insertTab")
                    },
                    transposeChars: function(a) {
                        return ea(a, function() {
                            for (var b = a.listSelections(), c = [], d = 0; d < b.length; d++)
                                if (b[d].empty()) {
                                    var e = b[d].head
                                      , f = u(a.doc, e.line).text;
                                    if (f)
                                        if (e.ch == f.length && (e = new r(e.line,e.ch - 1)),
                                        0 < e.ch)
                                            e = new r(e.line,e.ch + 1),
                                            a.replaceRange(f.charAt(e.ch - 1) + f.charAt(e.ch - 2), r(e.line, e.ch - 2), e, "+transpose");
                                        else if (e.line > a.doc.first) {
                                            var g = u(a.doc, e.line - 1).text;
                                            g && (e = new r(e.line,1),
                                            a.replaceRange(f.charAt(0) + a.doc.lineSeparator() + g.charAt(g.length - 1), r(e.line - 1, g.length - 1), e, "+transpose"))
                                        }
                                    c.push(new I(e,e))
                                }
                            a.setSelections(c)
                        })
                    },
                    newlineAndIndent: function(a) {
                        return ea(a, function() {
                            for (var b = a.listSelections(), c = b.length - 1; 0 <= c; c--)
                                a.replaceRange(a.doc.lineSeparator(), b[c].anchor, b[c].head, "+input");
                            b = a.listSelections();
                            for (c = 0; c < b.length; c++)
                                a.indentLine(b[c].from().line, null, !0);
                            ib(a)
                        })
                    },
                    openLine: function(a) {
                        return a.replaceSelection("\n", "start")
                    },
                    toggleOverwrite: function(a) {
                        return a.toggleOverwrite()
                    }
                }
                  , Ug = new La
                  , Od = null
                  , Pd = function(a, b, c) {
                    this.time = a;
                    this.pos = b;
                    this.button = c
                };
                Pd.prototype.compare = function(a, b, c) {
                    return this.time + 400 > a && 0 == A(b, this.pos) && c == this.button
                }
                ;
                var Yb, Xb, sb = {
                    toString: function() {
                        return "CodeMirror.Init"
                    }
                }, Tf = {}, Mc = {};
                N.defaults = Tf;
                N.optionHandlers = Mc;
                var Sd = [];
                N.defineInitHook = function(a) {
                    return Sd.push(a)
                }
                ;
                var fa = null
                  , K = function(a) {
                    this.cm = a;
                    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;
                    this.polling = new La;
                    this.composing = null;
                    this.gracePeriod = !1;
                    this.readDOMTimeout = null
                };
                K.prototype.init = function(a) {
                    function b(a) {
                        for (a = a.target; a; a = a.parentNode) {
                            if (a == g)
                                return !0;
                            if (/\bCodeMirror-(?:line)?widget\b/.test(a.className))
                                break
                        }
                        return !1
                    }
                    function c(a) {
                        if (b(a) && !T(f, a)) {
                            if (f.somethingSelected())
                                fa = {
                                    lineWise: !1,
                                    text: f.getSelections()
                                },
                                "cut" == a.type && f.replaceSelection("", null, "cut");
                            else if (f.options.lineWiseCopyCut) {
                                var d = Xf(f);
                                fa = {
                                    lineWise: !0,
                                    text: d.text
                                };
                                "cut" == a.type && f.operation(function() {
                                    f.setSelections(d.ranges, 0, xa);
                                    f.replaceSelection("", null, "cut")
                                })
                            } else
                                return;
                            if (a.clipboardData) {
                                a.clipboardData.clearData();
                                var c = fa.text.join("\n");
                                a.clipboardData.setData("Text", c);
                                if (a.clipboardData.getData("Text") == c) {
                                    a.preventDefault();
                                    return
                                }
                            }
                            var h = Zf();
                            a = h.firstChild;
                            f.display.lineSpace.insertBefore(h, f.display.lineSpace.firstChild);
                            a.value = fa.text.join("\n");
                            var q = document.activeElement;
                            ac(a);
                            setTimeout(function() {
                                f.display.lineSpace.removeChild(h);
                                q.focus();
                                q == g && e.showPrimarySelection()
                            }, 50)
                        }
                    }
                    var d = this
                      , e = this
                      , f = e.cm
                      , g = e.div = a.lineDiv;
                    Yf(g, f.options.spellcheck, f.options.autocorrect, f.options.autocapitalize);
                    z(g, "paste", function(a) {
                        !b(a) || T(f, a) || Wf(a, f) || 11 >= M && setTimeout(U(f, function() {
                            return d.updateFromDOM()
                        }), 20)
                    });
                    z(g, "compositionstart", function(a) {
                        d.composing = {
                            data: a.data,
                            done: !1
                        }
                    });
                    z(g, "compositionupdate", function(a) {
                        d.composing || (d.composing = {
                            data: a.data,
                            done: !1
                        })
                    });
                    z(g, "compositionend", function(a) {
                        d.composing && (a.data != d.composing.data && d.readFromDOMSoon(),
                        d.composing.done = !0)
                    });
                    z(g, "touchstart", function() {
                        return e.forceCompositionEnd()
                    });
                    z(g, "input", function() {
                        d.composing || d.readFromDOMSoon()
                    });
                    z(g, "copy", c);
                    z(g, "cut", c)
                }
                ;
                K.prototype.screenReaderLabelChanged = function(a) {
                    a ? this.div.setAttribute("aria-label", a) : this.div.removeAttribute("aria-label")
                }
                ;
                K.prototype.prepareSelection = function() {
                    var a = Ne(this.cm, !1);
                    a.focus = document.activeElement == this.div;
                    return a
                }
                ;
                K.prototype.showSelection = function(a, b) {
                    a && this.cm.display.view.length && ((a.focus || b) && this.showPrimarySelection(),
                    this.showMultipleSelections(a))
                }
                ;
                K.prototype.getSelection = function() {
                    return this.cm.display.wrapper.ownerDocument.getSelection()
                }
                ;
                K.prototype.showPrimarySelection = function() {
                    var a = this.getSelection()
                      , b = this.cm
                      , c = b.doc.sel.primary()
                      , d = c.from();
                    c = c.to();
                    if (b.display.viewTo == b.display.viewFrom || d.line >= b.display.viewTo || c.line < b.display.viewFrom)
                        a.removeAllRanges();
                    else {
                        var e = Nc(b, a.anchorNode, a.anchorOffset)
                          , f = Nc(b, a.focusNode, a.focusOffset);
                        if (!e || e.bad || !f || f.bad || 0 != A(lc(e, f), d) || 0 != A(kc(e, f), c))
                            if (e = b.display.view,
                            d = d.line >= b.display.viewFrom && ag(b, d) || {
                                node: e[0].measure.map[2],
                                offset: 0
                            },
                            c = c.line < b.display.viewTo && ag(b, c),
                            c || (c = e[e.length - 1].measure,
                            c = c.maps ? c.maps[c.maps.length - 1] : c.map,
                            c = {
                                node: c[c.length - 1],
                                offset: c[c.length - 2] - c[c.length - 3]
                            }),
                            d && c) {
                                e = a.rangeCount && a.getRangeAt(0);
                                try {
                                    var g = Bb(d.node, d.offset, c.offset, c.node)
                                } catch (h) {}
                                g && (!Ca && b.state.focused ? (a.collapse(d.node, d.offset),
                                g.collapsed || (a.removeAllRanges(),
                                a.addRange(g))) : (a.removeAllRanges(),
                                a.addRange(g)),
                                e && null == a.anchorNode ? a.addRange(e) : Ca && this.startGracePeriod());
                                this.rememberSelection()
                            } else
                                a.removeAllRanges()
                    }
                }
                ;
                K.prototype.startGracePeriod = function() {
                    var a = this;
                    clearTimeout(this.gracePeriod);
                    this.gracePeriod = setTimeout(function() {
                        a.gracePeriod = !1;
                        a.selectionChanged() && a.cm.operation(function() {
                            return a.cm.curOp.selectionChanged = !0
                        })
                    }, 20)
                }
                ;
                K.prototype.showMultipleSelections = function(a) {
                    D(this.cm.display.cursorDiv, a.cursors);
                    D(this.cm.display.selectionDiv, a.selection)
                }
                ;
                K.prototype.rememberSelection = function() {
                    var a = this.getSelection();
                    this.lastAnchorNode = a.anchorNode;
                    this.lastAnchorOffset = a.anchorOffset;
                    this.lastFocusNode = a.focusNode;
                    this.lastFocusOffset = a.focusOffset
                }
                ;
                K.prototype.selectionInEditor = function() {
                    var a = this.getSelection();
                    if (!a.rangeCount)
                        return !1;
                    a = a.getRangeAt(0).commonAncestorContainer;
                    return x(this.div, a)
                }
                ;
                K.prototype.focus = function() {
                    "nocursor" != this.cm.options.readOnly && (this.selectionInEditor() && document.activeElement == this.div || this.showSelection(this.prepareSelection(), !0),
                    this.div.focus())
                }
                ;
                K.prototype.blur = function() {
                    this.div.blur()
                }
                ;
                K.prototype.getField = function() {
                    return this.div
                }
                ;
                K.prototype.supportsTouch = function() {
                    return !0
                }
                ;
                K.prototype.receivedFocus = function() {
                    function a() {
                        b.cm.state.focused && (b.pollSelection(),
                        b.polling.set(b.cm.options.pollInterval, a))
                    }
                    var b = this;
                    this.selectionInEditor() ? this.pollSelection() : ea(this.cm, function() {
                        return b.cm.curOp.selectionChanged = !0
                    });
                    this.polling.set(this.cm.options.pollInterval, a)
                }
                ;
                K.prototype.selectionChanged = function() {
                    var a = this.getSelection();
                    return a.anchorNode != this.lastAnchorNode || a.anchorOffset != this.lastAnchorOffset || a.focusNode != this.lastFocusNode || a.focusOffset != this.lastFocusOffset
                }
                ;
                K.prototype.pollSelection = function() {
                    if (null == this.readDOMTimeout && !this.gracePeriod && this.selectionChanged()) {
                        var a = this.getSelection()
                          , b = this.cm;
                        if (rc && qc && this.cm.display.gutterSpecs.length && ih(a.anchorNode))
                            this.cm.triggerOnKeyDown({
                                type: "keydown",
                                keyCode: 8,
                                preventDefault: Math.abs
                            }),
                            this.blur(),
                            this.focus();
                        else if (!this.composing) {
                            this.rememberSelection();
                            var c = Nc(b, a.anchorNode, a.anchorOffset)
                              , d = Nc(b, a.focusNode, a.focusOffset);
                            c && d && ea(b, function() {
                                X(b.doc, Da(c, d), xa);
                                if (c.bad || d.bad)
                                    b.curOp.selectionChanged = !0
                            })
                        }
                    }
                }
                ;
                K.prototype.pollContent = function() {
                    null != this.readDOMTimeout && (clearTimeout(this.readDOMTimeout),
                    this.readDOMTimeout = null);
                    var a = this.cm
                      , b = a.display
                      , c = a.doc.sel.primary()
                      , d = c.from()
                      , e = c.to();
                    0 == d.ch && d.line > a.firstLine() && (d = r(d.line - 1, u(a.doc, d.line - 1).length));
                    e.ch == u(a.doc, e.line).text.length && e.line < a.lastLine() && (e = r(e.line + 1, 0));
                    if (d.line < b.viewFrom || e.line > b.viewTo - 1)
                        return !1;
                    var f;
                    d.line == b.viewFrom || 0 == (f = Qa(a, d.line)) ? (c = J(b.view[0].line),
                    f = b.view[0].node) : (c = J(b.view[f].line),
                    f = b.view[f - 1].node.nextSibling);
                    var g = Qa(a, e.line);
                    g == b.view.length - 1 ? (e = b.viewTo - 1,
                    b = b.lineDiv.lastChild) : (e = J(b.view[g + 1].line) - 1,
                    b = b.view[g + 1].node.previousSibling);
                    if (!f)
                        return !1;
                    b = a.doc.splitLines(jh(a, f, b, c, e));
                    for (f = Na(a.doc, r(c, 0), r(e, u(a.doc, e).text.length)); 1 < b.length && 1 < f.length; )
                        if (y(b) == y(f))
                            b.pop(),
                            f.pop(),
                            e--;
                        else if (b[0] == f[0])
                            b.shift(),
                            f.shift(),
                            c++;
                        else
                            break;
                    var h = 0;
                    g = 0;
                    for (var k = b[0], l = f[0], m = Math.min(k.length, l.length); h < m && k.charCodeAt(h) == l.charCodeAt(h); )
                        ++h;
                    k = y(b);
                    l = y(f);
                    for (m = Math.min(k.length - (1 == b.length ? h : 0), l.length - (1 == f.length ? h : 0)); g < m && k.charCodeAt(k.length - g - 1) == l.charCodeAt(l.length - g - 1); )
                        ++g;
                    if (1 == b.length && 1 == f.length && c == d.line)
                        for (; h && h > d.ch && k.charCodeAt(k.length - g - 1) == l.charCodeAt(l.length - g - 1); )
                            h--,
                            g++;
                    b[b.length - 1] = k.slice(0, k.length - g).replace(/^\u200b+/, "");
                    b[0] = b[0].slice(h).replace(/\u200b+$/, "");
                    d = r(c, h);
                    c = r(e, f.length ? y(f).length - g : 0);
                    if (1 < b.length || b[0] || A(d, c))
                        return ob(a.doc, b, d, c, "+input"),
                        !0
                }
                ;
                K.prototype.ensurePolled = function() {
                    this.forceCompositionEnd()
                }
                ;
                K.prototype.reset = function() {
                    this.forceCompositionEnd()
                }
                ;
                K.prototype.forceCompositionEnd = function() {
                    this.composing && (clearTimeout(this.readDOMTimeout),
                    this.composing = null,
                    this.updateFromDOM(),
                    this.div.blur(),
                    this.div.focus())
                }
                ;
                K.prototype.readFromDOMSoon = function() {
                    var a = this;
                    null == this.readDOMTimeout && (this.readDOMTimeout = setTimeout(function() {
                        a.readDOMTimeout = null;
                        if (a.composing)
                            if (a.composing.done)
                                a.composing = null;
                            else
                                return;
                        a.updateFromDOM()
                    }, 80))
                }
                ;
                K.prototype.updateFromDOM = function() {
                    var a = this;
                    !this.cm.isReadOnly() && this.pollContent() || ea(this.cm, function() {
                        return ba(a.cm)
                    })
                }
                ;
                K.prototype.setUneditable = function(a) {
                    a.contentEditable = "false"
                }
                ;
                K.prototype.onKeyPress = function(a) {
                    0 == a.charCode || this.composing || (a.preventDefault(),
                    this.cm.isReadOnly() || U(this.cm, Td)(this.cm, String.fromCharCode(null == a.charCode ? a.keyCode : a.charCode), 0))
                }
                ;
                K.prototype.readOnlyChanged = function(a) {
                    this.div.contentEditable = String("nocursor" != a)
                }
                ;
                K.prototype.onContextMenu = function() {}
                ;
                K.prototype.resetPosition = function() {}
                ;
                K.prototype.needsContentAttribute = !0;
                var Q = function(a) {
                    this.cm = a;
                    this.prevInput = "";
                    this.pollingFast = !1;
                    this.polling = new La;
                    this.hasSelection = !1;
                    this.composing = null
                };
                Q.prototype.init = function(a) {
                    function b(a) {
                        if (!T(e, a)) {
                            if (e.somethingSelected())
                                fa = {
                                    lineWise: !1,
                                    text: e.getSelections()
                                };
                            else if (e.options.lineWiseCopyCut) {
                                var b = Xf(e);
                                fa = {
                                    lineWise: !0,
                                    text: b.text
                                };
                                "cut" == a.type ? e.setSelections(b.ranges, null, xa) : (d.prevInput = "",
                                f.value = b.text.join("\n"),
                                ac(f))
                            } else
                                return;
                            "cut" == a.type && (e.state.cutIncoming = +new Date)
                        }
                    }
                    var c = this
                      , d = this
                      , e = this.cm;
                    this.createField(a);
                    var f = this.textarea;
                    a.wrapper.insertBefore(this.wrapper, a.wrapper.firstChild);
                    $b && (f.style.width = "0px");
                    z(f, "input", function() {
                        H && 9 <= M && c.hasSelection && (c.hasSelection = null);
                        d.poll()
                    });
                    z(f, "paste", function(a) {
                        T(e, a) || Wf(a, e) || (e.state.pasteIncoming = +new Date,
                        d.fastPoll())
                    });
                    z(f, "cut", b);
                    z(f, "copy", b);
                    z(a.scroller, "paste", function(b) {
                        if (!Ba(a, b) && !T(e, b))
                            if (f.dispatchEvent) {
                                var c = new Event("paste");
                                c.clipboardData = b.clipboardData;
                                f.dispatchEvent(c)
                            } else
                                e.state.pasteIncoming = +new Date,
                                d.focus()
                    });
                    z(a.lineSpace, "selectstart", function(b) {
                        Ba(a, b) || aa(b)
                    });
                    z(f, "compositionstart", function() {
                        var a = e.getCursor("from");
                        d.composing && d.composing.range.clear();
                        d.composing = {
                            start: a,
                            range: e.markText(a, e.getCursor("to"), {
                                className: "CodeMirror-composing"
                            })
                        }
                    });
                    z(f, "compositionend", function() {
                        d.composing && (d.poll(),
                        d.composing.range.clear(),
                        d.composing = null)
                    })
                }
                ;
                Q.prototype.createField = function(a) {
                    this.wrapper = Zf();
                    this.textarea = this.wrapper.firstChild
                }
                ;
                Q.prototype.screenReaderLabelChanged = function(a) {
                    a ? this.textarea.setAttribute("aria-label", a) : this.textarea.removeAttribute("aria-label")
                }
                ;
                Q.prototype.prepareSelection = function() {
                    var a = this.cm
                      , b = a.display
                      , c = a.doc
                      , d = Ne(a);
                    if (a.options.moveInputWithCursor) {
                        a = oa(a, c.sel.primary().head, "div");
                        c = b.wrapper.getBoundingClientRect();
                        var e = b.lineDiv.getBoundingClientRect();
                        d.teTop = Math.max(0, Math.min(b.wrapper.clientHeight - 10, a.top + e.top - c.top));
                        d.teLeft = Math.max(0, Math.min(b.wrapper.clientWidth - 10, a.left + e.left - c.left))
                    }
                    return d
                }
                ;
                Q.prototype.showSelection = function(a) {
                    var b = this.cm.display;
                    D(b.cursorDiv, a.cursors);
                    D(b.selectionDiv, a.selection);
                    null != a.teTop && (this.wrapper.style.top = a.teTop + "px",
                    this.wrapper.style.left = a.teLeft + "px")
                }
                ;
                Q.prototype.reset = function(a) {
                    if (!this.contextMenuPending && !this.composing) {
                        var b = this.cm;
                        b.somethingSelected() ? (this.prevInput = "",
                        a = b.getSelection(),
                        this.textarea.value = a,
                        b.state.focused && ac(this.textarea),
                        H && 9 <= M && (this.hasSelection = a)) : a || (this.prevInput = this.textarea.value = "",
                        H && 9 <= M && (this.hasSelection = null))
                    }
                }
                ;
                Q.prototype.getField = function() {
                    return this.textarea
                }
                ;
                Q.prototype.supportsTouch = function() {
                    return !1
                }
                ;
                Q.prototype.focus = function() {
                    if ("nocursor" != this.cm.options.readOnly && (!Mb || ha() != this.textarea))
                        try {
                            this.textarea.focus()
                        } catch (a) {}
                }
                ;
                Q.prototype.blur = function() {
                    this.textarea.blur()
                }
                ;
                Q.prototype.resetPosition = function() {
                    this.wrapper.style.top = this.wrapper.style.left = 0
                }
                ;
                Q.prototype.receivedFocus = function() {
                    this.slowPoll()
                }
                ;
                Q.prototype.slowPoll = function() {
                    var a = this;
                    this.pollingFast || this.polling.set(this.cm.options.pollInterval, function() {
                        a.poll();
                        a.cm.state.focused && a.slowPoll()
                    })
                }
                ;
                Q.prototype.fastPoll = function() {
                    function a() {
                        c.poll() || b ? (c.pollingFast = !1,
                        c.slowPoll()) : (b = !0,
                        c.polling.set(60, a))
                    }
                    var b = !1
                      , c = this;
                    c.pollingFast = !0;
                    c.polling.set(20, a)
                }
                ;
                Q.prototype.poll = function() {
                    var a = this
                      , b = this.cm
                      , c = this.textarea
                      , d = this.prevInput;
                    if (this.contextMenuPending || !b.state.focused || oh(c) && !d && !this.composing || b.isReadOnly() || b.options.disableInput || b.state.keySeq)
                        return !1;
                    var e = c.value;
                    if (e == d && !b.somethingSelected())
                        return !1;
                    if (H && 9 <= M && this.hasSelection === e || ma && /[\uf700-\uf7ff]/.test(e))
                        return b.display.input.reset(),
                        !1;
                    if (b.doc.sel == b.display.selForContextMenu) {
                        var f = e.charCodeAt(0);
                        8203 != f || d || (d = "\u200b");
                        if (8666 == f)
                            return this.reset(),
                            this.cm.execCommand("undo")
                    }
                    var g = 0;
                    for (f = Math.min(d.length, e.length); g < f && d.charCodeAt(g) == e.charCodeAt(g); )
                        ++g;
                    ea(b, function() {
                        Td(b, e.slice(g), d.length - g, null, a.composing ? "*compose" : null);
                        1E3 < e.length || -1 < e.indexOf("\n") ? c.value = a.prevInput = "" : a.prevInput = e;
                        a.composing && (a.composing.range.clear(),
                        a.composing.range = b.markText(a.composing.start, b.getCursor("to"), {
                            className: "CodeMirror-composing"
                        }))
                    });
                    return !0
                }
                ;
                Q.prototype.ensurePolled = function() {
                    this.pollingFast && this.poll() && (this.pollingFast = !1)
                }
                ;
                Q.prototype.onKeyPress = function() {
                    H && 9 <= M && (this.hasSelection = null);
                    this.fastPoll()
                }
                ;
                Q.prototype.onContextMenu = function(a) {
                    function b() {
                        if (null != g.selectionStart) {
                            var a = e.somethingSelected()
                              , b = "\u200b" + (a ? g.value : "");
                            g.value = "\u21da";
                            g.value = b;
                            d.prevInput = a ? "" : "\u200b";
                            g.selectionStart = 1;
                            g.selectionEnd = b.length;
                            f.selForContextMenu = e.doc.sel
                        }
                    }
                    function c() {
                        if (d.contextMenuPending == c && (d.contextMenuPending = !1,
                        d.wrapper.style.cssText = m,
                        g.style.cssText = l,
                        H && 9 > M && f.scrollbars.setScrollTop(f.scroller.scrollTop = k),
                        null != g.selectionStart)) {
                            (!H || H && 9 > M) && b();
                            var a = 0
                              , h = function() {
                                f.selForContextMenu == e.doc.sel && 0 == g.selectionStart && 0 < g.selectionEnd && "\u200b" == d.prevInput ? U(e, rf)(e) : 10 > a++ ? f.detectingSelectAll = setTimeout(h, 500) : (f.selForContextMenu = null,
                                f.input.reset())
                            };
                            f.detectingSelectAll = setTimeout(h, 200)
                        }
                    }
                    var d = this
                      , e = d.cm
                      , f = e.display
                      , g = d.textarea;
                    d.contextMenuPending && d.contextMenuPending();
                    var h = Ta(e, a)
                      , k = f.scroller.scrollTop;
                    if (h && !pa) {
                        e.options.resetSelectionOnContextMenu && -1 == e.doc.sel.contains(h) && U(e, X)(e.doc, Da(h), xa);
                        var l = g.style.cssText
                          , m = d.wrapper.style.cssText;
                        h = d.wrapper.offsetParent.getBoundingClientRect();
                        d.wrapper.style.cssText = "position: static";
                        g.style.cssText = "position: absolute; width: 30px; height: 30px;\n      top: " + (a.clientY - h.top - 5) + "px; left: " + (a.clientX - h.left - 5) + "px;\n      z-index: 1000; background: " + (H ? "rgba(255, 255, 255, .05)" : "transparent") + ";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
                        if (Y)
                            var q = window.scrollY;
                        f.input.focus();
                        Y && window.scrollTo(null, q);
                        f.input.reset();
                        e.somethingSelected() || (g.value = d.prevInput = " ");
                        d.contextMenuPending = c;
                        f.selForContextMenu = e.doc.sel;
                        clearTimeout(f.detectingSelectAll);
                        H && 9 <= M && b();
                        if (Qd) {
                            xb(a);
                            var n = function() {
                                ia(window, "mouseup", n);
                                setTimeout(c, 20)
                            };
                            z(window, "mouseup", n)
                        } else
                            setTimeout(c, 50)
                    }
                }
                ;
                Q.prototype.readOnlyChanged = function(a) {
                    a || this.reset();
                    this.textarea.disabled = "nocursor" == a;
                    this.textarea.readOnly = !!a
                }
                ;
                Q.prototype.setUneditable = function() {}
                ;
                Q.prototype.needsContentAttribute = !1;
                (function(a) {
                    function b(b, e, f, g) {
                        a.defaults[b] = e;
                        f && (c[b] = g ? function(a, b, d) {
                            d != sb && f(a, b, d)
                        }
                        : f)
                    }
                    var c = a.optionHandlers;
                    a.defineOption = b;
                    a.Init = sb;
                    b("value", "", function(a, b) {
                        return a.setValue(b)
                    }, !0);
                    b("mode", null, function(a, b) {
                        a.doc.modeOption = b;
                        Gd(a)
                    }, !0);
                    b("indentUnit", 2, Gd, !0);
                    b("indentWithTabs", !1);
                    b("smartIndent", !0);
                    b("tabSize", 4, function(a) {
                        Nb(a);
                        Fb(a);
                        ba(a)
                    }, !0);
                    b("lineSeparator", null, function(a, b) {
                        if (a.doc.lineSep = b) {
                            var d = []
                              , c = a.doc.first;
                            a.doc.iter(function(a) {
                                for (var e = 0; ; ) {
                                    var f = a.text.indexOf(b, e);
                                    if (-1 == f)
                                        break;
                                    e = f + b.length;
                                    d.push(r(c, f))
                                }
                                c++
                            });
                            for (var e = d.length - 1; 0 <= e; e--)
                                ob(a.doc, b, d[e], r(d[e].line, d[e].ch + b.length))
                        }
                    });
                    b("specialChars", /[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g, function(a, b, c) {
                        a.state.specialChars = new RegExp(b.source + (b.test("\t") ? "" : "|\t"),"g");
                        c != sb && a.refresh()
                    });
                    b("specialCharPlaceholder", tg, function(a) {
                        return a.refresh()
                    }, !0);
                    b("electricChars", !0);
                    b("inputStyle", Mb ? "contenteditable" : "textarea", function() {
                        throw Error("inputStyle can not (yet) be changed in a running editor");
                    }, !0);
                    b("spellcheck", !1, function(a, b) {
                        return a.getInputField().spellcheck = b
                    }, !0);
                    b("autocorrect", !1, function(a, b) {
                        return a.getInputField().autocorrect = b
                    }, !0);
                    b("autocapitalize", !1, function(a, b) {
                        return a.getInputField().autocapitalize = b
                    }, !0);
                    b("rtlMoveVisually", !nh);
                    b("wholeLineUpdateBefore", !0);
                    b("theme", "default", function(a) {
                        Sf(a);
                        Lb(a)
                    }, !0);
                    b("keyMap", "default", function(a, b, c) {
                        b = Hc(b);
                        (c = c != sb && Hc(c)) && c.detach && c.detach(a, b);
                        b.attach && b.attach(a, c || null)
                    });
                    b("extraKeys", null);
                    b("configureMouse", null);
                    b("lineWrapping", !1, gh, !0);
                    b("gutters", [], function(a, b) {
                        a.display.gutterSpecs = Ed(b, a.options.lineNumbers);
                        Lb(a)
                    }, !0);
                    b("fixedGutter", !0, function(a, b) {
                        a.display.gutters.style.left = b ? ud(a.display) + "px" : "0";
                        a.refresh()
                    }, !0);
                    b("coverGutterNextToScrollbar", !1, function(a) {
                        return jb(a)
                    }, !0);
                    b("scrollbarStyle", "native", function(a) {
                        Ve(a);
                        jb(a);
                        a.display.scrollbars.setScrollTop(a.doc.scrollTop);
                        a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)
                    }, !0);
                    b("lineNumbers", !1, function(a, b) {
                        a.display.gutterSpecs = Ed(a.options.gutters, b);
                        Lb(a)
                    }, !0);
                    b("firstLineNumber", 1, Lb, !0);
                    b("lineNumberFormatter", function(a) {
                        return a
                    }, Lb, !0);
                    b("showCursorWhenSelecting", !1, Gb, !0);
                    b("resetSelectionOnContextMenu", !0);
                    b("lineWiseCopyCut", !0);
                    b("pasteLinesPerSelection", !0);
                    b("selectionsMayTouch", !1);
                    b("readOnly", !1, function(a, b) {
                        "nocursor" == b && (hb(a),
                        a.display.input.blur());
                        a.display.input.readOnlyChanged(b)
                    });
                    b("screenReaderLabel", null, function(a, b) {
                        a.display.input.screenReaderLabelChanged("" === b ? null : b)
                    });
                    b("disableInput", !1, function(a, b) {
                        b || a.display.input.reset()
                    }, !0);
                    b("dragDrop", !0, fh);
                    b("allowDropFileTypes", null);
                    b("cursorBlinkRate", 530);
                    b("cursorScrollMargin", 0);
                    b("cursorHeight", 1, Gb, !0);
                    b("singleCursorHeightPerLine", !0, Gb, !0);
                    b("workTime", 100);
                    b("workDelay", 100);
                    b("flattenSpans", !0, Nb, !0);
                    b("addModeClass", !1, Nb, !0);
                    b("pollInterval", 100);
                    b("undoDepth", 200, function(a, b) {
                        return a.doc.history.undoDepth = b
                    });
                    b("historyEventDelay", 1250);
                    b("viewportMargin", 10, function(a) {
                        return a.refresh()
                    }, !0);
                    b("maxHighlightLength", 1E4, Nb, !0);
                    b("moveInputWithCursor", !0, function(a, b) {
                        b || a.display.input.resetPosition()
                    });
                    b("tabindex", null, function(a, b) {
                        return a.display.input.getField().tabIndex = b || ""
                    });
                    b("autofocus", null);
                    b("direction", "ltr", function(a, b) {
                        return a.doc.setDirection(b)
                    }, !0);
                    b("phrases", null)
                }
                )(N);
                (function(a) {
                    var b = a.optionHandlers
                      , c = a.helpers = {};
                    a.prototype = {
                        constructor: a,
                        focus: function() {
                            window.focus();
                            this.display.input.focus()
                        },
                        setOption: function(a, c) {
                            var d = this.options
                              , e = d[a];
                            if (d[a] != c || "mode" == a)
                                d[a] = c,
                                b.hasOwnProperty(a) && U(this, b[a])(this, c, e),
                                R(this, "optionChange", this, a)
                        },
                        getOption: function(a) {
                            return this.options[a]
                        },
                        getDoc: function() {
                            return this.doc
                        },
                        addKeyMap: function(a, b) {
                            this.state.keyMaps[b ? "push" : "unshift"](Hc(a))
                        },
                        removeKeyMap: function(a) {
                            for (var b = this.state.keyMaps, c = 0; c < b.length; ++c)
                                if (b[c] == a || b[c].name == a)
                                    return b.splice(c, 1),
                                    !0
                        },
                        addOverlay: Z(function(b, c) {
                            var d = b.token ? b : a.getMode(this.options, b);
                            if (d.startState)
                                throw Error("Overlays may not be stateful.");
                            eg(this.state.overlays, {
                                mode: d,
                                modeSpec: b,
                                opaque: c && c.opaque,
                                priority: c && c.priority || 0
                            }, function(a) {
                                return a.priority
                            });
                            this.state.modeGen++;
                            ba(this)
                        }),
                        removeOverlay: Z(function(a) {
                            for (var b = this.state.overlays, c = 0; c < b.length; ++c) {
                                var d = b[c].modeSpec;
                                if (d == a || "string" == typeof a && d.name == a) {
                                    b.splice(c, 1);
                                    this.state.modeGen++;
                                    ba(this);
                                    break
                                }
                            }
                        }),
                        indentLine: Z(function(a, b, c) {
                            "string" != typeof b && "number" != typeof b && (b = null == b ? this.options.smartIndent ? "smart" : "prev" : b ? "add" : "subtract");
                            yb(this.doc, a) && Zb(this, a, b, c)
                        }),
                        indentSelection: Z(function(a) {
                            for (var b = this.doc.sel.ranges, c = -1, d = 0; d < b.length; d++) {
                                var h = b[d];
                                if (h.empty())
                                    h.head.line > c && (Zb(this, h.head.line, a, !0),
                                    c = h.head.line,
                                    d == this.doc.sel.primIndex && ib(this));
                                else {
                                    var k = h.from();
                                    h = h.to();
                                    var l = Math.max(c, k.line);
                                    c = Math.min(this.lastLine(), h.line - (h.ch ? 0 : 1)) + 1;
                                    for (h = l; h < c; ++h)
                                        Zb(this, h, a);
                                    h = this.doc.sel.ranges;
                                    0 == k.ch && b.length == h.length && 0 < h[d].from().ch && Kd(this.doc, d, new I(k,h[d].to()), xa)
                                }
                            }
                        }),
                        getTokenAt: function(a, b) {
                            return ie(this, a, b)
                        },
                        getLineTokens: function(a, b) {
                            return ie(this, r(a), b, !0)
                        },
                        getTokenTypeAt: function(a) {
                            a = B(this.doc, a);
                            var b = ge(this, u(this.doc, a.line))
                              , c = 0
                              , d = (b.length - 1) / 2;
                            a = a.ch;
                            if (0 == a)
                                b = b[2];
                            else
                                for (; ; ) {
                                    var h = c + d >> 1;
                                    if ((h ? b[2 * h - 1] : 0) >= a)
                                        d = h;
                                    else if (b[2 * h + 1] < a)
                                        c = h + 1;
                                    else {
                                        b = b[2 * h + 2];
                                        break
                                    }
                                }
                            c = b ? b.indexOf("overlay ") : -1;
                            return 0 > c ? b : 0 == c ? null : b.slice(0, c - 1)
                        },
                        getModeAt: function(b) {
                            var c = this.doc.mode;
                            return c.innerMode ? a.innerMode(c, this.getTokenAt(b).state).mode : c
                        },
                        getHelper: function(a, b) {
                            return this.getHelpers(a, b)[0]
                        },
                        getHelpers: function(a, b) {
                            var d = [];
                            if (!c.hasOwnProperty(b))
                                return d;
                            var e = c[b];
                            a = this.getModeAt(a);
                            if ("string" == typeof a[b])
                                e[a[b]] && d.push(e[a[b]]);
                            else if (a[b])
                                for (var h = 0; h < a[b].length; h++) {
                                    var k = e[a[b][h]];
                                    k && d.push(k)
                                }
                            else
                                a.helperType && e[a.helperType] ? d.push(e[a.helperType]) : e[a.name] && d.push(e[a.name]);
                            for (b = 0; b < e._global.length; b++)
                                h = e._global[b],
                                h.pred(a, this) && -1 == O(d, h.val) && d.push(h.val);
                            return d
                        },
                        getStateAfter: function(a, b) {
                            var c = this.doc;
                            a = Math.max(c.first, Math.min(null == a ? c.first + c.size - 1 : a, c.first + c.size - 1));
                            return zb(this, a + 1, b).state
                        },
                        cursorCoords: function(a, b) {
                            var c = this.doc.sel.primary();
                            a = null == a ? c.head : "object" == typeof a ? B(this.doc, a) : a ? c.from() : c.to();
                            return oa(this, a, b || "page")
                        },
                        charCoords: function(a, b) {
                            return qd(this, B(this.doc, a), b || "page")
                        },
                        coordsChar: function(a, b) {
                            a = He(this, a, b || "page");
                            return sd(this, a.left, a.top)
                        },
                        lineAtHeight: function(a, b) {
                            a = He(this, {
                                top: a,
                                left: 0
                            }, b || "page").top;
                            return Oa(this.doc, a + this.display.viewOffset)
                        },
                        heightAtLine: function(a, b, c) {
                            var d = !1;
                            if ("number" == typeof a) {
                                var e = this.doc.first + this.doc.size - 1;
                                a < this.doc.first ? a = this.doc.first : a > e && (a = e,
                                d = !0);
                                a = u(this.doc, a)
                            }
                            return sc(this, a, {
                                top: 0,
                                left: 0
                            }, b || "page", c || d).top + (d ? this.doc.height - va(a) : 0)
                        },
                        defaultTextHeight: function() {
                            return gb(this.display)
                        },
                        defaultCharWidth: function() {
                            return fb(this.display)
                        },
                        getViewport: function() {
                            return {
                                from: this.display.viewFrom,
                                to: this.display.viewTo
                            }
                        },
                        addWidget: function(a, b, c, g, h) {
                            var d = this.display;
                            a = oa(this, B(this.doc, a));
                            var e = a.bottom
                              , f = a.left;
                            b.style.position = "absolute";
                            b.setAttribute("cm-ignore-events", "true");
                            this.display.input.setUneditable(b);
                            d.sizer.appendChild(b);
                            if ("over" == g)
                                e = a.top;
                            else if ("above" == g || "near" == g) {
                                var q = Math.max(d.wrapper.clientHeight, this.doc.height)
                                  , n = Math.max(d.sizer.clientWidth, d.lineSpace.clientWidth);
                                ("above" == g || a.bottom + b.offsetHeight > q) && a.top > b.offsetHeight ? e = a.top - b.offsetHeight : a.bottom + b.offsetHeight <= q && (e = a.bottom);
                                f + b.offsetWidth > n && (f = n - b.offsetWidth)
                            }
                            b.style.top = e + "px";
                            b.style.left = b.style.right = "";
                            "right" == h ? (f = d.sizer.clientWidth - b.offsetWidth,
                            b.style.right = "0px") : ("left" == h ? f = 0 : "middle" == h && (f = (d.sizer.clientWidth - b.offsetWidth) / 2),
                            b.style.left = f + "px");
                            c && (a = zd(this, {
                                left: f,
                                top: e,
                                right: f + b.offsetWidth,
                                bottom: e + b.offsetHeight
                            }),
                            null != a.scrollTop && Ib(this, a.scrollTop),
                            null != a.scrollLeft && Va(this, a.scrollLeft))
                        },
                        triggerOnKeyDown: Z(Mf),
                        triggerOnKeyPress: Z(Of),
                        triggerOnKeyUp: Nf,
                        triggerOnMouseDown: Z(Pf),
                        execCommand: function(a) {
                            if (Vb.hasOwnProperty(a))
                                return Vb[a].call(null, this)
                        },
                        triggerElectric: Z(function(a) {
                            Vf(this, a)
                        }),
                        findPosH: function(a, b, c, g) {
                            var d = 1;
                            0 > b && (d = -1,
                            b = -b);
                            a = B(this.doc, a);
                            for (var e = 0; e < b && (a = Vd(this.doc, a, d, c, g),
                            !a.hitSide); ++e)
                                ;
                            return a
                        },
                        moveH: Z(function(a, b) {
                            var c = this;
                            this.extendSelectionsBy(function(d) {
                                return c.display.shift || c.doc.extend || d.empty() ? Vd(c.doc, d.head, a, b, c.options.rtlMoveVisually) : 0 > a ? d.from() : d.to()
                            }, bc)
                        }),
                        deleteH: Z(function(a, b) {
                            var c = this.doc;
                            this.doc.sel.somethingSelected() ? c.replaceSelection("", null, "+delete") : rb(this, function(d) {
                                var e = Vd(c, d.head, a, b, !1);
                                return 0 > a ? {
                                    from: e,
                                    to: d.head
                                } : {
                                    from: d.head,
                                    to: e
                                }
                            })
                        }),
                        findPosV: function(a, b, c, g) {
                            var d = 1;
                            0 > b && (d = -1,
                            b = -b);
                            var e = B(this.doc, a);
                            for (a = 0; a < b && (e = oa(this, e, "div"),
                            null == g ? g = e.left : e.left = g,
                            e = $f(this, e, d, c),
                            !e.hitSide); ++a)
                                ;
                            return e
                        },
                        moveV: Z(function(a, b) {
                            var c = this
                              , d = this.doc
                              , e = []
                              , k = !this.display.shift && !d.extend && d.sel.somethingSelected();
                            d.extendSelectionsBy(function(f) {
                                if (k)
                                    return 0 > a ? f.from() : f.to();
                                var g = oa(c, f.head, "div");
                                null != f.goalColumn && (g.left = f.goalColumn);
                                e.push(g.left);
                                var h = $f(c, g, a, b);
                                "page" == b && f == d.sel.primary() && xc(c, qd(c, h, "div").top - g.top);
                                return h
                            }, bc);
                            if (e.length)
                                for (var l = 0; l < d.sel.ranges.length; l++)
                                    d.sel.ranges[l].goalColumn = e[l]
                        }),
                        findWordAt: function(a) {
                            var b = u(this.doc, a.line).text
                              , c = a.ch
                              , d = a.ch;
                            if (b) {
                                var h = this.getHelper(a, "wordChars");
                                "before" != a.sticky && d != b.length || !c ? ++d : --c;
                                var k = b.charAt(c);
                                for (k = ya(k, h) ? function(a) {
                                    return ya(a, h)
                                }
                                : /\s/.test(k) ? function(a) {
                                    return /\s/.test(a)
                                }
                                : function(a) {
                                    return !/\s/.test(a) && !ya(a)
                                }
                                ; 0 < c && k(b.charAt(c - 1)); )
                                    --c;
                                for (; d < b.length && k(b.charAt(d)); )
                                    ++d
                            }
                            return new I(r(a.line, c),r(a.line, d))
                        },
                        toggleOverwrite: function(a) {
                            if (null == a || a != this.state.overwrite)
                                (this.state.overwrite = !this.state.overwrite) ? L(this.display.cursorDiv, "CodeMirror-overwrite") : Ua(this.display.cursorDiv, "CodeMirror-overwrite"),
                                R(this, "overwriteToggle", this, this.state.overwrite)
                        },
                        hasFocus: function() {
                            return this.display.input.getField() == ha()
                        },
                        isReadOnly: function() {
                            return !(!this.options.readOnly && !this.doc.cantEdit)
                        },
                        scrollTo: Z(function(a, b) {
                            Hb(this, a, b)
                        }),
                        getScrollInfo: function() {
                            var a = this.display.scroller;
                            return {
                                left: a.scrollLeft,
                                top: a.scrollTop,
                                height: a.scrollHeight - wa(this) - this.display.barHeight,
                                width: a.scrollWidth - wa(this) - this.display.barWidth,
                                clientHeight: ld(this),
                                clientWidth: Pa(this)
                            }
                        },
                        scrollIntoView: Z(function(a, b) {
                            null == a ? (a = {
                                from: this.doc.sel.primary().head,
                                to: null
                            },
                            null == b && (b = this.options.cursorScrollMargin)) : "number" == typeof a ? a = {
                                from: r(a, 0),
                                to: null
                            } : null == a.from && (a = {
                                from: a,
                                to: null
                            });
                            a.to || (a.to = a.from);
                            a.margin = b || 0;
                            null != a.from.line ? (yc(this),
                            this.curOp.scrollToPos = a) : Re(this, a.from, a.to, a.margin)
                        }),
                        setSize: Z(function(a, b) {
                            var c = this
                              , d = function(a) {
                                return "number" == typeof a || /^\d+$/.test(String(a)) ? a + "px" : a
                            };
                            null != a && (this.display.wrapper.style.width = d(a));
                            null != b && (this.display.wrapper.style.height = d(b));
                            this.options.lineWrapping && Ee(this);
                            var e = this.display.viewFrom;
                            this.doc.iter(e, this.display.viewTo, function(a) {
                                if (a.widgets)
                                    for (var b = 0; b < a.widgets.length; b++)
                                        if (a.widgets[b].noHScroll) {
                                            Ga(c, e, "widget");
                                            break
                                        }
                                ++e
                            });
                            this.curOp.forceUpdate = !0;
                            R(this, "refresh", this)
                        }),
                        operation: function(a) {
                            return ea(this, a)
                        },
                        startOperation: function() {
                            return Wa(this)
                        },
                        endOperation: function() {
                            return Xa(this)
                        },
                        refresh: Z(function() {
                            var a = this.display.cachedTextHeight;
                            ba(this);
                            this.curOp.forceUpdate = !0;
                            Fb(this);
                            Hb(this, this.doc.scrollLeft, this.doc.scrollTop);
                            Dd(this.display);
                            (null == a || .5 < Math.abs(a - gb(this.display)) || this.options.lineWrapping) && vd(this);
                            R(this, "refresh", this)
                        }),
                        swapDoc: Z(function(a) {
                            var b = this.doc;
                            b.cm = null;
                            this.state.selectingText && this.state.selectingText();
                            ef(this, a);
                            Fb(this);
                            this.display.input.reset();
                            Hb(this, a.scrollLeft, a.scrollTop);
                            this.curOp.forceScroll = !0;
                            W(this, "swapDoc", this, b);
                            return b
                        }),
                        phrase: function(a) {
                            var b = this.options.phrases;
                            return b && Object.prototype.hasOwnProperty.call(b, a) ? b[a] : a
                        },
                        getInputField: function() {
                            return this.display.input.getField()
                        },
                        getWrapperElement: function() {
                            return this.display.wrapper
                        },
                        getScrollerElement: function() {
                            return this.display.scroller
                        },
                        getGutterElement: function() {
                            return this.display.gutters
                        }
                    };
                    ab(a);
                    a.registerHelper = function(b, e, f) {
                        c.hasOwnProperty(b) || (c[b] = a[b] = {
                            _global: []
                        });
                        c[b][e] = f
                    }
                    ;
                    a.registerGlobalHelper = function(b, e, f, g) {
                        a.registerHelper(b, e, g);
                        c[b]._global.push({
                            pred: f,
                            val: g
                        })
                    }
                }
                )(N);
                var qh = "iter insert remove copy getEditor constructor".split(" "), fc;
                for (fc in ca.prototype)
                    ca.prototype.hasOwnProperty(fc) && 0 > O(qh, fc) && (N.prototype[fc] = function(a) {
                        return function() {
                            return a.apply(this.doc, arguments)
                        }
                    }(ca.prototype[fc]));
                ab(ca);
                N.inputStyles = {
                    textarea: Q,
                    contenteditable: K
                };
                N.defineMode = function(a) {
                    N.defaults.mode || "null" == a || (N.defaults.mode = a);
                    kg.apply(this, arguments)
                }
                ;
                N.defineMIME = function(a, b) {
                    bb[a] = b
                }
                ;
                N.defineMode("null", function() {
                    return {
                        token: function(a) {
                            return a.skipToEnd()
                        }
                    }
                });
                N.defineMIME("text/plain", "null");
                N.defineExtension = function(a, b) {
                    N.prototype[a] = b
                }
                ;
                N.defineDocExtension = function(a, b) {
                    ca.prototype[a] = b
                }
                ;
                N.fromTextArea = function(a, b) {
                    function c() {
                        a.value = h.getValue()
                    }
                    b = b ? C(b) : {};
                    b.value = a.value;
                    !b.tabindex && a.tabIndex && (b.tabindex = a.tabIndex);
                    !b.placeholder && a.placeholder && (b.placeholder = a.placeholder);
                    if (null == b.autofocus) {
                        var d = ha();
                        b.autofocus = d == a || null != a.getAttribute("autofocus") && d == document.body
                    }
                    if (a.form && (z(a.form, "submit", c),
                    !b.leaveSubmitMethodAlone)) {
                        var e = a.form;
                        var f = e.submit;
                        try {
                            var g = e.submit = function() {
                                c();
                                e.submit = f;
                                e.submit();
                                e.submit = g
                            }
                        } catch (k) {}
                    }
                    b.finishInit = function(d) {
                        d.save = c;
                        d.getTextArea = function() {
                            return a
                        }
                        ;
                        d.toTextArea = function() {
                            d.toTextArea = isNaN;
                            c();
                            a.parentNode.removeChild(d.getWrapperElement());
                            a.style.display = "";
                            a.form && (ia(a.form, "submit", c),
                            b.leaveSubmitMethodAlone || "function" != typeof a.form.submit || (a.form.submit = f))
                        }
                    }
                    ;
                    a.style.display = "none";
                    var h = N(function(b) {
                        return a.parentNode.insertBefore(b, a.nextSibling)
                    }, b);
                    return h
                }
                ;
                (function(a) {
                    a.off = ia;
                    a.on = z;
                    a.wheelEventPixels = Gg;
                    a.Doc = ca;
                    a.splitLines = Ud;
                    a.countColumn = F;
                    a.findColumn = $a;
                    a.isWordChar = Rc;
                    a.Pass = Jc;
                    a.signal = R;
                    a.Line = kb;
                    a.changeEnd = Ha;
                    a.scrollbarModel = We;
                    a.Pos = r;
                    a.cmpPos = A;
                    a.modes = Vc;
                    a.mimeModes = bb;
                    a.resolveMode = jc;
                    a.getMode = Wc;
                    a.modeExtensions = cb;
                    a.extendMode = lg;
                    a.copyState = Ma;
                    a.startState = ce;
                    a.innerMode = Xc;
                    a.commands = Vb;
                    a.keyMap = Ub;
                    a.keyName = Hf;
                    a.isModifierKey = Ef;
                    a.lookupKey = qb;
                    a.normalizeKeyMap = Sg;
                    a.StringStream = S;
                    a.SharedTextMarker = Tb;
                    a.TextMarker = Ja;
                    a.LineWidget = Sb;
                    a.e_preventDefault = aa;
                    a.e_stopPropagation = ae;
                    a.e_stop = xb;
                    a.addClass = L;
                    a.contains = x;
                    a.rmClass = Ua;
                    a.keyNames = Ka
                }
                )(N);
                N.version = "5.59.2";
                return N
            });
            (function(v) {
                "object" == typeof exports && "object" == typeof module ? v(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], v) : v(CodeMirror)
            }
            )(function(v) {
                function G(p) {
                    for (var v = 0; v < p.state.activeLines.length; v++)
                        p.removeLineClass(p.state.activeLines[v], "wrap", "CodeMirror-activeline"),
                        p.removeLineClass(p.state.activeLines[v], "background", "CodeMirror-activeline-background"),
                        p.removeLineClass(p.state.activeLines[v], "gutter", "CodeMirror-activeline-gutter")
                }
                function D(p, v) {
                    if (p.length != v.length)
                        return !1;
                    for (var x = 0; x < p.length; x++)
                        if (p[x] != v[x])
                            return !1;
                    return !0
                }
                function p(p, v) {
                    for (var x = [], E = 0; E < v.length; E++) {
                        var w = v[E]
                          , C = p.getOption("styleActiveLine");
                        if ("object" == typeof C && C.nonEmpty ? w.anchor.line == w.head.line : w.empty())
                            w = p.getLineHandleVisualStart(w.head.line),
                            x[x.length - 1] != w && x.push(w)
                    }
                    D(p.state.activeLines, x) || p.operation(function() {
                        G(p);
                        for (var w = 0; w < x.length; w++)
                            p.addLineClass(x[w], "wrap", "CodeMirror-activeline"),
                            p.addLineClass(x[w], "background", "CodeMirror-activeline-background"),
                            p.addLineClass(x[w], "gutter", "CodeMirror-activeline-gutter");
                        p.state.activeLines = x
                    })
                }
                function E(v, D) {
                    p(v, D.ranges)
                }
                v.defineOption("styleActiveLine", !1, function(x, D, L) {
                    L = L == v.Init ? !1 : L;
                    D != L && (L && (x.off("beforeSelectionChange", E),
                    G(x),
                    delete x.state.activeLines),
                    D && (x.state.activeLines = [],
                    p(x, x.listSelections()),
                    x.on("beforeSelectionChange", E)))
                })
            });
            (function(v) {
                "object" == typeof exports && "object" == typeof module ? v(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], v) : v(CodeMirror)
            }
            )(function(v) {
                function G(p, v, F) {
                    var w = p.getLineHandle(v.line)
                      , C = v.ch - 1
                      , x = F && F.afterCursor;
                    null == x && (x = /(^| )cm-fat-cursor($| )/.test(p.getWrapperElement().className));
                    var y = F && F.bracketRegex || /[(){}[\]]/;
                    w = !x && 0 <= C && y.test(w.text.charAt(C)) && ra[w.text.charAt(C)] || y.test(w.text.charAt(C + 1)) && ra[w.text.charAt(++C)];
                    if (!w)
                        return null;
                    x = ">" == w.charAt(1) ? 1 : -1;
                    if (F && F.strict && 0 < x != (C == v.ch))
                        return null;
                    y = p.getTokenTypeAt(L(v.line, C + 1));
                    p = D(p, L(v.line, C + (0 < x ? 1 : 0)), x, y, F);
                    return null == p ? null : {
                        from: L(v.line, C),
                        to: p && p.pos,
                        match: p && p.ch == w.charAt(0),
                        forward: 0 < x
                    }
                }
                function D(p, v, x, D, G) {
                    var w = G && G.maxScanLineLength || 1E4
                      , y = G && G.maxScanLines || 1E3
                      , C = [];
                    G = G && G.bracketRegex || /[(){}[\]]/;
                    y = 0 < x ? Math.min(v.line + y, p.lastLine() + 1) : Math.max(p.firstLine() - 1, v.line - y);
                    for (var F = v.line; F != y; F += x) {
                        var E = p.getLine(F);
                        if (E) {
                            var O = 0 < x ? 0 : E.length - 1
                              , ha = 0 < x ? E.length : -1;
                            if (!(E.length > w))
                                for (F == v.line && (O = v.ch - (0 > x ? 1 : 0)); O != ha; O += x) {
                                    var ya = E.charAt(O);
                                    if (G.test(ya) && (void 0 === D || (p.getTokenTypeAt(L(F, O + 1)) || "") == (D || ""))) {
                                        var $a = ra[ya];
                                        if ($a && ">" == $a.charAt(1) == 0 < x)
                                            C.push(ya);
                                        else if (C.length)
                                            C.pop();
                                        else
                                            return {
                                                pos: L(F, O),
                                                ch: ya
                                            }
                                    }
                                }
                        }
                    }
                    return F - x == (0 < x ? p.lastLine() : p.firstLine()) ? !1 : null
                }
                function p(p, v, x) {
                    for (var w = p.state.matchBrackets.maxHighlightLineLength || 1E3, C = x && x.highlightNonMatching, F = [], y = p.listSelections(), D = 0; D < y.length; D++) {
                        var E = y[D].empty() && G(p, y[D].head, x);
                        if (E && (E.match || !1 !== C) && p.getLine(E.from.line).length <= w) {
                            var ra = E.match ? "CodeMirror-matchingbracket" : "CodeMirror-nonmatchingbracket";
                            F.push(p.markText(E.from, L(E.from.line, E.from.ch + 1), {
                                className: ra
                            }));
                            E.to && p.getLine(E.to.line).length <= w && F.push(p.markText(E.to, L(E.to.line, E.to.ch + 1), {
                                className: ra
                            }))
                        }
                    }
                    if (F.length)
                        if (ha && p.state.focused && p.focus(),
                        x = function() {
                            p.operation(function() {
                                for (var p = 0; p < F.length; p++)
                                    F[p].clear()
                            })
                        }
                        ,
                        v)
                            setTimeout(x, 800);
                        else
                            return x
                }
                function E(w) {
                    w.operation(function() {
                        w.state.matchBrackets.currentlyHighlighted && (w.state.matchBrackets.currentlyHighlighted(),
                        w.state.matchBrackets.currentlyHighlighted = null);
                        w.state.matchBrackets.currentlyHighlighted = p(w, !1, w.state.matchBrackets)
                    })
                }
                function x(p) {
                    p.state.matchBrackets && p.state.matchBrackets.currentlyHighlighted && (p.state.matchBrackets.currentlyHighlighted(),
                    p.state.matchBrackets.currentlyHighlighted = null)
                }
                var ha = /MSIE \d/.test(navigator.userAgent) && (null == document.documentMode || 8 > document.documentMode)
                  , L = v.Pos
                  , ra = {
                    "(": ")>",
                    ")": "(<",
                    "[": "]>",
                    "]": "[<",
                    "{": "}>",
                    "}": "{<",
                    "<": ">>",
                    ">": "<<"
                };
                v.defineOption("matchBrackets", !1, function(p, C, F) {
                    F && F != v.Init && (p.off("cursorActivity", E),
                    p.off("focus", E),
                    p.off("blur", x),
                    x(p));
                    C && (p.state.matchBrackets = "object" == typeof C ? C : {},
                    p.on("cursorActivity", E),
                    p.on("focus", E),
                    p.on("blur", x))
                });
                v.defineExtension("matchBrackets", function() {
                    p(this, !0)
                });
                v.defineExtension("findMatchingBracket", function(p, v, x) {
                    if (x || "boolean" == typeof v)
                        x ? (x.strict = v,
                        v = x) : v = v ? {
                            strict: !0
                        } : null;
                    return G(this, p, v)
                });
                v.defineExtension("scanForBracket", function(p, v, x, E) {
                    return D(this, p, v, x, E)
                })
            });
            (function(h) {
                "object" == typeof exports && "object" == typeof module ? h(require("../../lib/codemirror"), require("../xml/xml"), require("../javascript/javascript"), require("../css/css")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror", "../xml/xml", "../javascript/javascript", "../css/css"], h) : h(CodeMirror)
            }
            )(function(h) {
                function D(h) {
                    var q = G[h];
                    return q ? q : G[h] = new RegExp("\\s+" + h + "\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")
                }
                function u(h, q) {
                    return (h = h.match(D(q))) ? /^\s*(.*?)\s*$/.exec(h[2])[1] : ""
                }
                function l(h, q) {
                    for (var l in h)
                        for (var n = q[l] || (q[l] = []), a = h[l], u = a.length - 1; 0 <= u; u--)
                            n.unshift(a[u])
                }
                function H(h, l) {
                    for (var q = 0; q < h.length; q++) {
                        var n = h[q];
                        if (!n[0] || n[1].test(u(l, n[0])))
                            return n[2]
                    }
                }
                var I = {
                    script: [["lang", /(javascript|babel)/i, "javascript"], ["type", /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, "javascript"], ["type", /./, "text/plain"], [null, null, "javascript"]],
                    style: [["lang", /^css$/i, "css"], ["type", /^(text\/)?(x-)?(stylesheet|css)$/i, "css"], ["type", /./, "text/plain"], [null, null, "css"]]
                }
                  , G = {};
                h.defineMode("htmlmixed", function(u, q) {
                    function D(v, l) {
                        var q = n.token(v, l.htmlState), A = /\btag\b/.test(q), J;
                        if (A && !/[<>\s\/]/.test(v.current()) && (J = l.htmlState.tagName && l.htmlState.tagName.toLowerCase()) && a.hasOwnProperty(J))
                            l.inTag = J + " ";
                        else if (l.inTag && A && />$/.test(v.current())) {
                            A = /^([\S]+) (.*)/.exec(l.inTag);
                            l.inTag = null;
                            v = ">" == v.current() && H(a[A[1]], A[2]);
                            v = h.getMode(u, v);
                            var x = new RegExp("^</s*" + A[1] + "s*>","i")
                              , w = new RegExp("</s*" + A[1] + "s*>","i");
                            l.token = function(a, e) {
                                if (a.match(x, !1))
                                    return e.token = D,
                                    e.localState = e.localMode = null;
                                e = e.localMode.token(a, e.localState);
                                var c = a.current()
                                  , p = c.search(w);
                                -1 < p ? a.backUp(c.length - p) : c.match(/<\/?$/) && (a.backUp(c.length),
                                a.match(w, !1) || a.match(c));
                                return e
                            }
                            ;
                            l.localMode = v;
                            l.localState = h.startState(v, n.indent(l.htmlState, "", ""))
                        } else
                            l.inTag && (l.inTag += v.current(),
                            v.eol() && (l.inTag += " "));
                        return q
                    }
                    var n = h.getMode(u, {
                        name: "xml",
                        htmlMode: !0,
                        multilineTagIndentFactor: q.multilineTagIndentFactor,
                        multilineTagIndentPastTag: q.multilineTagIndentPastTag,
                        allowMissingTagName: q.allowMissingTagName
                    })
                      , a = {}
                      , w = q && q.tags;
                    q = q && q.scriptTypes;
                    l(I, a);
                    w && l(w, a);
                    if (q)
                        for (w = q.length - 1; 0 <= w; w--)
                            a.script.unshift(["type", q[w].matches, q[w].mode]);
                    return {
                        startState: function() {
                            var a = h.startState(n);
                            return {
                                token: D,
                                inTag: null,
                                localMode: null,
                                localState: null,
                                htmlState: a
                            }
                        },
                        copyState: function(a) {
                            var l;
                            a.localState && (l = h.copyState(a.localMode, a.localState));
                            return {
                                token: a.token,
                                inTag: a.inTag,
                                localMode: a.localMode,
                                localState: l,
                                htmlState: h.copyState(n, a.htmlState)
                            }
                        },
                        token: function(a, h) {
                            return h.token(a, h)
                        },
                        indent: function(a, l, q) {
                            return !a.localMode || /^\s*<\//.test(l) ? n.indent(a.htmlState, l, q) : a.localMode.indent ? a.localMode.indent(a.localState, l, q) : h.Pass
                        },
                        innerMode: function(a) {
                            return {
                                state: a.localState || a.htmlState,
                                mode: a.localMode || n
                            }
                        }
                    }
                }, "xml", "javascript", "css");
                h.defineMIME("text/html", "htmlmixed")
            });
            (function(h) {
                "object" == typeof exports && "object" == typeof module ? h(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], h) : h(CodeMirror)
            }
            )(function(h) {
                var D = {
                    autoSelfClosers: {
                        area: !0,
                        base: !0,
                        br: !0,
                        col: !0,
                        command: !0,
                        embed: !0,
                        frame: !0,
                        hr: !0,
                        img: !0,
                        input: !0,
                        keygen: !0,
                        link: !0,
                        meta: !0,
                        param: !0,
                        source: !0,
                        track: !0,
                        wbr: !0,
                        menuitem: !0
                    },
                    implicitlyClosed: {
                        dd: !0,
                        li: !0,
                        optgroup: !0,
                        option: !0,
                        p: !0,
                        rp: !0,
                        rt: !0,
                        tbody: !0,
                        td: !0,
                        tfoot: !0,
                        th: !0,
                        tr: !0
                    },
                    contextGrabbers: {
                        dd: {
                            dd: !0,
                            dt: !0
                        },
                        dt: {
                            dd: !0,
                            dt: !0
                        },
                        li: {
                            li: !0
                        },
                        option: {
                            option: !0,
                            optgroup: !0
                        },
                        optgroup: {
                            optgroup: !0
                        },
                        p: {
                            address: !0,
                            article: !0,
                            aside: !0,
                            blockquote: !0,
                            dir: !0,
                            div: !0,
                            dl: !0,
                            fieldset: !0,
                            footer: !0,
                            form: !0,
                            h1: !0,
                            h2: !0,
                            h3: !0,
                            h4: !0,
                            h5: !0,
                            h6: !0,
                            header: !0,
                            hgroup: !0,
                            hr: !0,
                            menu: !0,
                            nav: !0,
                            ol: !0,
                            p: !0,
                            pre: !0,
                            section: !0,
                            table: !0,
                            ul: !0
                        },
                        rp: {
                            rp: !0,
                            rt: !0
                        },
                        rt: {
                            rp: !0,
                            rt: !0
                        },
                        tbody: {
                            tbody: !0,
                            tfoot: !0
                        },
                        td: {
                            td: !0,
                            th: !0
                        },
                        tfoot: {
                            tbody: !0
                        },
                        th: {
                            td: !0,
                            th: !0
                        },
                        thead: {
                            tbody: !0,
                            tfoot: !0
                        },
                        tr: {
                            tr: !0
                        }
                    },
                    doNotIndent: {
                        pre: !0
                    },
                    allowUnquoted: !0,
                    allowMissing: !0,
                    caseFold: !0
                }
                  , u = {
                    autoSelfClosers: {},
                    implicitlyClosed: {},
                    contextGrabbers: {},
                    doNotIndent: {},
                    allowUnquoted: !1,
                    allowMissing: !1,
                    allowMissingTagName: !1,
                    caseFold: !1
                };
                h.defineMode("xml", function(l, H) {
                    function I(a, r) {
                        function k(k) {
                            r.tokenize = k;
                            return k(a, r)
                        }
                        var c = a.next();
                        if ("<" == c) {
                            if (a.eat("!"))
                                return a.eat("[") ? a.match("CDATA[") ? k(q("atom", "]]\x3e")) : null : a.match("--") ? k(q("comment", "--\x3e")) : a.match("DOCTYPE", !0, !0) ? (a.eatWhile(/[\w\._\-]/),
                                k(O(1))) : null;
                            if (a.eat("?"))
                                return a.eatWhile(/[\w\._\-]/),
                                r.tokenize = q("meta", "?>"),
                                "meta";
                            U = a.eat("/") ? "closeTag" : "openTag";
                            r.tokenize = G;
                            return "tag bracket"
                        }
                        if ("&" == c)
                            return (a.eat("#") ? a.eat("x") ? a.eatWhile(/[a-fA-F\d]/) && a.eat(";") : a.eatWhile(/[\d]/) && a.eat(";") : a.eatWhile(/[\w\.\-:]/) && a.eat(";")) ? "atom" : "error";
                        a.eatWhile(/[^&<]/);
                        return null
                    }
                    function G(a, r) {
                        var k = a.next();
                        if (">" == k || "/" == k && a.eat(">"))
                            return r.tokenize = I,
                            U = ">" == k ? "endTag" : "selfcloseTag",
                            "tag bracket";
                        if ("=" == k)
                            return U = "equals",
                            null;
                        if ("<" == k)
                            return r.tokenize = I,
                            r.state = v,
                            r.tagName = r.tagStart = null,
                            (a = r.tokenize(a, r)) ? a + " tag error" : "tag error";
                        if (/['"]/.test(k))
                            return r.tokenize = M(k),
                            r.stringStartCol = a.column(),
                            r.tokenize(a, r);
                        a.match(/^[^\s\u00a0=<>"']*[^\s\u00a0=<>"'\/]/);
                        return "word"
                    }
                    function M(a) {
                        var k = function(k, r) {
                            for (; !k.eol(); )
                                if (k.next() == a) {
                                    r.tokenize = G;
                                    break
                                }
                            return "string"
                        };
                        k.isInAttribute = !0;
                        return k
                    }
                    function q(a, r) {
                        return function(k, c) {
                            for (; !k.eol(); ) {
                                if (k.match(r)) {
                                    c.tokenize = I;
                                    break
                                }
                                k.next()
                            }
                            return a
                        }
                    }
                    function O(a) {
                        return function(k, c) {
                            for (var r; null != (r = k.next()); ) {
                                if ("<" == r)
                                    return c.tokenize = O(a + 1),
                                    c.tokenize(k, c);
                                if (">" == r)
                                    if (1 == a) {
                                        c.tokenize = I;
                                        break
                                    } else
                                        return c.tokenize = O(a - 1),
                                        c.tokenize(k, c)
                            }
                            return "meta"
                        }
                    }
                    function n(a, c, e) {
                        this.prev = a.context;
                        this.tagName = c || "";
                        this.indent = a.indented;
                        this.startOfLine = e;
                        if (p.doNotIndent.hasOwnProperty(c) || a.context && a.context.noIndent)
                            this.noIndent = !0
                    }
                    function a(a) {
                        a.context && (a.context = a.context.prev)
                    }
                    function w(k, c) {
                        for (var r; k.context; ) {
                            r = k.context.tagName;
                            if (!p.contextGrabbers.hasOwnProperty(r) || !p.contextGrabbers[r].hasOwnProperty(c))
                                break;
                            a(k)
                        }
                    }
                    function v(a, c, e) {
                        return "openTag" == a ? (e.tagStart = c.column(),
                        J) : "closeTag" == a ? K : v
                    }
                    function J(a, c, e) {
                        if ("word" == a)
                            return e.tagName = c.current(),
                            t = "tag",
                            x;
                        if (p.allowMissingTagName && "endTag" == a)
                            return t = "tag bracket",
                            x(a, c, e);
                        t = "error";
                        return J
                    }
                    function K(k, c, e) {
                        if ("word" == k) {
                            k = c.current();
                            e.context && e.context.tagName != k && p.implicitlyClosed.hasOwnProperty(e.context.tagName) && a(e);
                            if (e.context && e.context.tagName == k || !1 === p.matchClosing)
                                return t = "tag",
                                A;
                            t = "tag error";
                            return L
                        }
                        if (p.allowMissingTagName && "endTag" == k)
                            return t = "tag bracket",
                            A(k, c, e);
                        t = "error";
                        return L
                    }
                    function A(c, e, p) {
                        if ("endTag" != c)
                            return t = "error",
                            A;
                        a(p);
                        return v
                    }
                    function L(a, c, e) {
                        t = "error";
                        return A(a, c, e)
                    }
                    function x(a, c, e) {
                        if ("word" == a)
                            return t = "attribute",
                            R;
                        if ("endTag" == a || "selfcloseTag" == a) {
                            c = e.tagName;
                            var k = e.tagStart;
                            e.tagName = e.tagStart = null;
                            "selfcloseTag" == a || p.autoSelfClosers.hasOwnProperty(c) ? w(e, c) : (w(e, c),
                            e.context = new n(e,c,k == e.indented));
                            return v
                        }
                        t = "error";
                        return x
                    }
                    function R(a, c, e) {
                        if ("equals" == a)
                            return F;
                        p.allowMissing || (t = "error");
                        return x(a, c, e)
                    }
                    function F(a, c, h) {
                        if ("string" == a)
                            return e;
                        if ("word" == a && p.allowUnquoted)
                            return t = "string",
                            x;
                        t = "error";
                        return x(a, c, h)
                    }
                    function e(a, c, p) {
                        return "string" == a ? e : x(a, c, p)
                    }
                    var c = l.indentUnit
                      , p = {};
                    l = H.htmlMode ? D : u;
                    for (var B in l)
                        p[B] = l[B];
                    for (B in H)
                        p[B] = H[B];
                    var U, t;
                    I.isInText = !0;
                    return {
                        startState: function(a) {
                            var c = {
                                tokenize: I,
                                state: v,
                                indented: a || 0,
                                tagName: null,
                                tagStart: null,
                                context: null
                            };
                            null != a && (c.baseIndent = a);
                            return c
                        },
                        token: function(a, c) {
                            !c.tagName && a.sol() && (c.indented = a.indentation());
                            if (a.eatSpace())
                                return null;
                            U = null;
                            var e = c.tokenize(a, c);
                            (e || U) && "comment" != e && (t = null,
                            c.state = c.state(U || e, a, c),
                            t && (e = "error" == t ? e + " error" : t));
                            return e
                        },
                        indent: function(a, e, l) {
                            var k = a.context;
                            if (a.tokenize.isInAttribute)
                                return a.tagStart == a.indented ? a.stringStartCol + 1 : a.indented + c;
                            if (k && k.noIndent)
                                return h.Pass;
                            if (a.tokenize != G && a.tokenize != I)
                                return l ? l.match(/^(\s*)/)[0].length : 0;
                            if (a.tagName)
                                return !1 !== p.multilineTagIndentPastTag ? a.tagStart + a.tagName.length + 2 : a.tagStart + c * (p.multilineTagIndentFactor || 1);
                            if (p.alignCDATA && /<!\[CDATA\[/.test(e))
                                return 0;
                            if ((e = e && /^<(\/)?([\w_:\.-]*)/.exec(e)) && e[1])
                                for (; k; )
                                    if (k.tagName == e[2]) {
                                        k = k.prev;
                                        break
                                    } else if (p.implicitlyClosed.hasOwnProperty(k.tagName))
                                        k = k.prev;
                                    else
                                        break;
                            else if (e)
                                for (; k; )
                                    if ((l = p.contextGrabbers[k.tagName]) && l.hasOwnProperty(e[2]))
                                        k = k.prev;
                                    else
                                        break;
                            for (; k && k.prev && !k.startOfLine; )
                                k = k.prev;
                            return k ? k.indent + c : a.baseIndent || 0
                        },
                        electricInput: /<\/[\s\w:]+>$/,
                        blockCommentStart: "\x3c!--",
                        blockCommentEnd: "--\x3e",
                        configuration: p.htmlMode ? "html" : "xml",
                        helperType: p.htmlMode ? "html" : "xml",
                        skipAttribute: function(a) {
                            a.state == F && (a.state = x)
                        },
                        xmlCurrentTag: function(a) {
                            return a.tagName ? {
                                name: a.tagName,
                                close: "closeTag" == a.type
                            } : null
                        },
                        xmlCurrentContext: function(a) {
                            var c = [];
                            for (a = a.context; a; a = a.prev)
                                c.push(a.tagName);
                            return c.reverse()
                        }
                    }
                });
                h.defineMIME("text/xml", "xml");
                h.defineMIME("application/xml", "xml");
                h.mimeModes.hasOwnProperty("text/html") || h.defineMIME("text/html", {
                    name: "xml",
                    htmlMode: !0
                })
            });
            (function(h) {
                "object" == typeof exports && "object" == typeof module ? h(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], h) : h(CodeMirror)
            }
            )(function(h) {
                h.defineMode("javascript", function(D, u) {
                    function l(b, a, f) {
                        ha = b;
                        ka = f;
                        return a
                    }
                    function H(b, a) {
                        var d = b.next();
                        if ('"' == d || "'" == d)
                            return a.tokenize = I(d),
                            a.tokenize(b, a);
                        if ("." == d && b.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))
                            return l("number", "number");
                        if ("." == d && b.match(".."))
                            return l("spread", "meta");
                        if (/[\[\]{}\(\),;:\.]/.test(d))
                            return l(d);
                        if ("=" == d && b.eat(">"))
                            return l("=>", "operator");
                        if ("0" == d && b.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))
                            return l("number", "number");
                        if (/\d/.test(d))
                            return b.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),
                            l("number", "number");
                        if ("/" == d) {
                            if (b.eat("*"))
                                return a.tokenize = G,
                                G(b, a);
                            if (b.eat("/"))
                                return b.skipToEnd(),
                                l("comment", "comment");
                            if (za(b, a, 1)) {
                                a: for (var f = a = !1; null != (d = b.next()); ) {
                                    if (!a) {
                                        if ("/" == d && !f)
                                            break a;
                                        "[" == d ? f = !0 : f && "]" == d && (f = !1)
                                    }
                                    a = !a && "\\" == d
                                }
                                b.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/);
                                return l("regexp", "string-2")
                            }
                            b.eat("=");
                            return l("operator", "operator", b.current())
                        }
                        if ("`" == d)
                            return a.tokenize = M,
                            M(b, a);
                        if ("#" == d && "!" == b.peek())
                            return b.skipToEnd(),
                            l("meta", "meta");
                        if ("#" == d && b.eatWhile(la))
                            return l("variable", "property");
                        if ("<" == d && b.match("!--") || "-" == d && b.match("->") && !/\S/.test(b.string.slice(0, b.start)))
                            return b.skipToEnd(),
                            l("comment", "comment");
                        if (Aa.test(d))
                            return ">" == d && a.lexical && ">" == a.lexical.type || (b.eat("=") ? "!" != d && "=" != d || b.eat("=") : /[<>*+\-|&?]/.test(d) && (b.eat(d),
                            ">" == d && b.eat(d))),
                            "?" == d && b.eat(".") ? l(".") : l("operator", "operator", b.current());
                        if (la.test(d)) {
                            b.eatWhile(la);
                            d = b.current();
                            if ("." != a.lastType) {
                                if (Ba.propertyIsEnumerable(d))
                                    return b = Ba[d],
                                    l(b.type, b.style, d);
                                if ("async" == d && b.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/, !1))
                                    return l("async", "keyword", d)
                            }
                            return l("variable", "variable", d)
                        }
                    }
                    function I(b) {
                        return function(a, f) {
                            var d = !1, c;
                            if (ma && "@" == a.peek() && a.match(Na))
                                return f.tokenize = H,
                                l("jsonld-keyword", "meta");
                            for (; null != (c = a.next()) && (c != b || d); )
                                d = !d && "\\" == c;
                            d || (f.tokenize = H);
                            return l("string", "string")
                        }
                    }
                    function G(b, a) {
                        for (var d = !1, f; f = b.next(); ) {
                            if ("/" == f && d) {
                                a.tokenize = H;
                                break
                            }
                            d = "*" == f
                        }
                        return l("comment", "comment")
                    }
                    function M(b, a) {
                        for (var d = !1, f; null != (f = b.next()); ) {
                            if (!d && ("`" == f || "$" == f && b.eat("{"))) {
                                a.tokenize = H;
                                break
                            }
                            d = !d && "\\" == f
                        }
                        return l("quasi", "string-2", b.current())
                    }
                    function q(b, a) {
                        a.fatArrowAt && (a.fatArrowAt = null);
                        var d = b.string.indexOf("=>", b.start);
                        if (!(0 > d)) {
                            if (y) {
                                var f = /:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(b.string.slice(b.start, d));
                                f && (d = f.index)
                            }
                            f = 0;
                            var c = !1;
                            for (--d; 0 <= d; --d) {
                                var e = b.string.charAt(d)
                                  , m = "([{}])".indexOf(e);
                                if (0 <= m && 3 > m) {
                                    if (!f) {
                                        ++d;
                                        break
                                    }
                                    if (0 == --f) {
                                        "(" == e && (c = !0);
                                        break
                                    }
                                } else if (3 <= m && 6 > m)
                                    ++f;
                                else if (la.test(e))
                                    c = !0;
                                else if (/["'\/`]/.test(e))
                                    for (; ; --d) {
                                        if (0 == d)
                                            return;
                                        if (b.string.charAt(d - 1) == e && "\\" != b.string.charAt(d - 2)) {
                                            d--;
                                            break
                                        }
                                    }
                                else if (c && !f) {
                                    ++d;
                                    break
                                }
                            }
                            c && !f && (a.fatArrowAt = d)
                        }
                    }
                    function O(b, a, f, c, e, m) {
                        this.indented = b;
                        this.column = a;
                        this.type = f;
                        this.prev = e;
                        this.info = m;
                        null != c && (this.align = c)
                    }
                    function n() {
                        for (var b = arguments.length - 1; 0 <= b; b--)
                            g.cc.push(arguments[b])
                    }
                    function a() {
                        n.apply(null, arguments);
                        return !0
                    }
                    function w(b, a) {
                        for (; a; a = a.next)
                            if (a.name == b)
                                return !0;
                        return !1
                    }
                    function v(b) {
                        var a = g.state;
                        g.marked = "def";
                        if (a.context)
                            if ("var" == a.lexical.info && a.context && a.context.block) {
                                var f = J(b, a.context);
                                if (null != f) {
                                    a.context = f;
                                    return
                                }
                            } else if (!w(b, a.localVars)) {
                                a.localVars = new L(b,a.localVars);
                                return
                            }
                        u.globalVars && !w(b, a.globalVars) && (a.globalVars = new L(b,a.globalVars))
                    }
                    function J(b, a) {
                        return a ? a.block ? (b = J(b, a.prev)) ? b == a.prev ? a : new A(b,a.vars,!0) : null : w(b, a.vars) ? a : new A(a.prev,new L(b,a.vars),!1) : null
                    }
                    function K(b) {
                        return "public" == b || "private" == b || "protected" == b || "abstract" == b || "readonly" == b
                    }
                    function A(b, a, f) {
                        this.prev = b;
                        this.vars = a;
                        this.block = f
                    }
                    function L(b, a) {
                        this.name = b;
                        this.next = a
                    }
                    function x() {
                        g.state.context = new A(g.state.context,g.state.localVars,!1);
                        g.state.localVars = Oa
                    }
                    function R() {
                        g.state.context = new A(g.state.context,g.state.localVars,!0);
                        g.state.localVars = null
                    }
                    function F() {
                        g.state.localVars = g.state.context.vars;
                        g.state.context = g.state.context.prev
                    }
                    function e(b, a) {
                        var d = function() {
                            var d = g.state
                              , f = d.indented;
                            if ("stat" == d.lexical.type)
                                f = d.lexical.indented;
                            else
                                for (var c = d.lexical; c && ")" == c.type && c.align; c = c.prev)
                                    f = c.indented;
                            d.lexical = new O(f,g.stream.column(),b,null,d.lexical,a)
                        };
                        d.lex = !0;
                        return d
                    }
                    function c() {
                        var a = g.state;
                        a.lexical.prev && (")" == a.lexical.type && (a.indented = a.lexical.indented),
                        a.lexical = a.lexical.prev)
                    }
                    function p(b) {
                        function d(f) {
                            return f == b ? a() : ";" == b || "}" == f || ")" == f || "]" == f ? n() : a(d)
                        }
                        return d
                    }
                    function B(b, d) {
                        return "var" == b ? a(e("vardef", d), ua, p(";"), c) : "keyword a" == b ? a(e("form"), r, B, c) : "keyword b" == b ? a(e("form"), B, c) : "keyword d" == b ? g.stream.match(/^\s*$/, !1) ? a() : a(e("stat"), fa, p(";"), c) : "debugger" == b ? a(p(";")) : "{" == b ? a(e("}"), R, na, c, F) : ";" == b ? a() : "if" == b ? ("else" == g.state.lexical.info && g.state.cc[g.state.cc.length - 1] == c && g.state.cc.pop()(),
                        a(e("form"), r, B, c, Ca)) : "function" == b ? a(V) : "for" == b ? a(e("form"), Da, B, c) : "class" == b || y && "interface" == d ? (g.marked = "keyword",
                        a(e("form", "class" == b ? b : d), Ea, c)) : "variable" == b ? y && "declare" == d ? (g.marked = "keyword",
                        a(B)) : y && ("module" == d || "enum" == d || "type" == d) && g.stream.match(/^\s*\w/, !1) ? (g.marked = "keyword",
                        "enum" == d ? a(Fa) : "type" == d ? a(Ga, p("operator"), m, p(";")) : a(e("form"), P, p("{"), e("}"), na, c, c)) : y && "namespace" == d ? (g.marked = "keyword",
                        a(e("form"), t, B, c)) : y && "abstract" == d ? (g.marked = "keyword",
                        a(B)) : a(e("stat"), Pa) : "switch" == b ? a(e("form"), r, p("{"), e("}", "switch"), R, na, c, c, F) : "case" == b ? a(t, p(":")) : "default" == b ? a(p(":")) : "catch" == b ? a(e("form"), x, U, B, c, F) : "export" == b ? a(e("stat"), Qa, c) : "import" == b ? a(e("stat"), Ra, c) : "async" == b ? a(B) : "@" == d ? a(t, B) : n(e("stat"), t, p(";"), c)
                    }
                    function U(b) {
                        if ("(" == b)
                            return a(Y, p(")"))
                    }
                    function t(a, d) {
                        return ya(a, d, !1)
                    }
                    function k(a, d) {
                        return ya(a, d, !0)
                    }
                    function r(b) {
                        return "(" != b ? n() : a(e(")"), fa, p(")"), c)
                    }
                    function ya(b, d, f) {
                        if (g.state.fatArrowAt == g.stream.start) {
                            var m = f ? Ha : Ia;
                            if ("(" == b)
                                return a(x, e(")"), C(Y, ")"), c, p("=>"), m, F);
                            if ("variable" == b)
                                return n(x, P, p("=>"), m, F)
                        }
                        m = f ? ba : aa;
                        return Sa.hasOwnProperty(b) ? a(m) : "function" == b ? a(V, m) : "class" == b || y && "interface" == d ? (g.marked = "keyword",
                        a(e("form"), Ta, c)) : "keyword c" == b || "async" == b ? a(f ? k : t) : "(" == b ? a(e(")"), fa, p(")"), c, m) : "operator" == b || "spread" == b ? a(f ? k : t) : "[" == b ? a(e("]"), Ua, c, m) : "{" == b ? ia(oa, "}", null, m) : "quasi" == b ? n(pa, m) : "new" == b ? a(Va(f)) : "import" == b ? a(t) : a()
                    }
                    function fa(a) {
                        return a.match(/[;\}\)\],]/) ? n() : n(t)
                    }
                    function aa(b, d) {
                        return "," == b ? a(fa) : ba(b, d, !1)
                    }
                    function ba(b, d, f) {
                        var E = 0 == f ? aa : ba
                          , h = 0 == f ? t : k;
                        if ("=>" == b)
                            return a(x, f ? Ha : Ia, F);
                        if ("operator" == b)
                            return /\+\+|--/.test(d) || y && "!" == d ? a(E) : y && "<" == d && g.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/, !1) ? a(e(">"), C(m, ">"), c, E) : "?" == d ? a(t, p(":"), h) : a(h);
                        if ("quasi" == b)
                            return n(pa, E);
                        if (";" != b) {
                            if ("(" == b)
                                return ia(k, ")", "call", E);
                            if ("." == b)
                                return a(Wa, E);
                            if ("[" == b)
                                return a(e("]"), fa, p("]"), c, E);
                            if (y && "as" == d)
                                return g.marked = "keyword",
                                a(m, E);
                            if ("regexp" == b)
                                return g.state.lastType = g.marked = "operator",
                                g.stream.backUp(g.stream.pos - g.stream.start - 1),
                                a(h)
                        }
                    }
                    function pa(b, d) {
                        return "quasi" != b ? n() : "${" != d.slice(d.length - 2) ? a(pa) : a(t, Xa)
                    }
                    function Xa(b) {
                        if ("}" == b)
                            return g.marked = "string-2",
                            g.state.tokenize = M,
                            a(pa)
                    }
                    function Ia(a) {
                        q(g.stream, g.state);
                        return n("{" == a ? B : t)
                    }
                    function Ha(a) {
                        q(g.stream, g.state);
                        return n("{" == a ? B : k)
                    }
                    function Va(b) {
                        return function(d) {
                            return "." == d ? a(b ? Ya : Za) : "variable" == d && y ? a($a, b ? ba : aa) : n(b ? k : t)
                        }
                    }
                    function Za(b, d) {
                        if ("target" == d)
                            return g.marked = "keyword",
                            a(aa)
                    }
                    function Ya(b, d) {
                        if ("target" == d)
                            return g.marked = "keyword",
                            a(ba)
                    }
                    function Pa(b) {
                        return ":" == b ? a(c, B) : n(aa, p(";"), c)
                    }
                    function Wa(b) {
                        if ("variable" == b)
                            return g.marked = "property",
                            a()
                    }
                    function oa(b, d) {
                        if ("async" == b)
                            return g.marked = "property",
                            a(oa);
                        if ("variable" == b || "keyword" == g.style) {
                            g.marked = "property";
                            if ("get" == d || "set" == d)
                                return a(ab);
                            var f;
                            y && g.state.fatArrowAt == g.stream.start && (f = g.stream.match(/^\s*:\s*/, !1)) && (g.state.fatArrowAt = g.stream.pos + f[0].length);
                            return a(S)
                        }
                        if ("number" == b || "string" == b)
                            return g.marked = ma ? "property" : g.style + " property",
                            a(S);
                        if ("jsonld-keyword" == b)
                            return a(S);
                        if (y && K(d))
                            return g.marked = "keyword",
                            a(oa);
                        if ("[" == b)
                            return a(t, Q, p("]"), S);
                        if ("spread" == b)
                            return a(k, S);
                        if ("*" == d)
                            return g.marked = "keyword",
                            a(oa);
                        if (":" == b)
                            return n(S)
                    }
                    function ab(b) {
                        if ("variable" != b)
                            return n(S);
                        g.marked = "property";
                        return a(V)
                    }
                    function S(b) {
                        if (":" == b)
                            return a(k);
                        if ("(" == b)
                            return n(V)
                    }
                    function C(b, d, f) {
                        function c(e, m) {
                            return (f ? -1 < f.indexOf(e) : "," == e) ? (e = g.state.lexical,
                            "call" == e.info && (e.pos = (e.pos || 0) + 1),
                            a(function(a, f) {
                                return a == d || f == d ? n() : n(b)
                            }, c)) : e == d || m == d ? a() : f && -1 < f.indexOf(";") ? n(b) : a(p(d))
                        }
                        return function(f, e) {
                            return f == d || e == d ? a() : n(b, c)
                        }
                    }
                    function ia(b, d, f) {
                        for (var m = 3; m < arguments.length; m++)
                            g.cc.push(arguments[m]);
                        return a(e(d, f), C(b, d), c)
                    }
                    function na(b) {
                        return "}" == b ? a() : n(B, na)
                    }
                    function Q(b, d) {
                        if (y) {
                            if (":" == b)
                                return a(m);
                            if ("?" == d)
                                return a(Q)
                        }
                    }
                    function z(b, d) {
                        if (y && (":" == b || "in" == d))
                            return a(m)
                    }
                    function N(b) {
                        if (y && ":" == b)
                            return g.stream.match(/^\s*\w+\s+is\b/, !1) ? a(t, f, m) : a(m)
                    }
                    function f(b, d) {
                        if ("is" == d)
                            return g.marked = "keyword",
                            a()
                    }
                    function m(b, d) {
                        if ("keyof" == d || "typeof" == d || "infer" == d)
                            return g.marked = "keyword",
                            a("typeof" == d ? k : m);
                        if ("variable" == b || "void" == d)
                            return g.marked = "type",
                            a(W);
                        if ("|" == d || "&" == d)
                            return a(m);
                        if ("string" == b || "number" == b || "atom" == b)
                            return a(W);
                        if ("[" == b)
                            return a(e("]"), C(m, "]", ","), c, W);
                        if ("{" == b)
                            return a(e("}"), va, c, W);
                        if ("(" == b)
                            return a(C(wa, ")"), E, W);
                        if ("<" == b)
                            return a(C(m, ">"), m)
                    }
                    function E(b) {
                        if ("=>" == b)
                            return a(m)
                    }
                    function va(b) {
                        return b.match(/[\}\)\]]/) ? a() : "," == b || ";" == b ? a(va) : n(ja, va)
                    }
                    function ja(b, d) {
                        if ("variable" == b || "keyword" == g.style)
                            return g.marked = "property",
                            a(ja);
                        if ("?" == d || "number" == b || "string" == b)
                            return a(ja);
                        if (":" == b)
                            return a(m);
                        if ("[" == b)
                            return a(p("variable"), z, p("]"), ja);
                        if ("(" == b)
                            return n(ca, ja);
                        if (!b.match(/[;\}\)\],]/))
                            return a()
                    }
                    function wa(b, d) {
                        return "variable" == b && g.stream.match(/^\s*[?:]/, !1) || "?" == d ? a(wa) : ":" == b ? a(m) : "spread" == b ? a(wa) : n(m)
                    }
                    function W(b, d) {
                        if ("<" == d)
                            return a(e(">"), C(m, ">"), c, W);
                        if ("|" == d || "." == b || "&" == d)
                            return a(m);
                        if ("[" == b)
                            return a(m, p("]"), W);
                        if ("extends" == d || "implements" == d)
                            return g.marked = "keyword",
                            a(m);
                        if ("?" == d)
                            return a(m, p(":"), m)
                    }
                    function $a(b, d) {
                        if ("<" == d)
                            return a(e(">"), C(m, ">"), c, W)
                    }
                    function qa() {
                        return n(m, bb)
                    }
                    function bb(b, d) {
                        if ("=" == d)
                            return a(m)
                    }
                    function ua(b, d) {
                        return "enum" == d ? (g.marked = "keyword",
                        a(Fa)) : n(P, Q, X, cb)
                    }
                    function P(b, d) {
                        if (y && K(d))
                            return g.marked = "keyword",
                            a(P);
                        if ("variable" == b)
                            return v(d),
                            a();
                        if ("spread" == b)
                            return a(P);
                        if ("[" == b)
                            return ia(db, "]");
                        if ("{" == b)
                            return ia(Ja, "}")
                    }
                    function Ja(b, d) {
                        if ("variable" == b && !g.stream.match(/^\s*:/, !1))
                            return v(d),
                            a(X);
                        "variable" == b && (g.marked = "property");
                        return "spread" == b ? a(P) : "}" == b ? n() : "[" == b ? a(t, p("]"), p(":"), Ja) : a(p(":"), P, X)
                    }
                    function db() {
                        return n(P, X)
                    }
                    function X(b, d) {
                        if ("=" == d)
                            return a(k)
                    }
                    function cb(b) {
                        if ("," == b)
                            return a(ua)
                    }
                    function Ca(b, d) {
                        if ("keyword b" == b && "else" == d)
                            return a(e("form", "else"), B, c)
                    }
                    function Da(b, d) {
                        if ("await" == d)
                            return a(Da);
                        if ("(" == b)
                            return a(e(")"), eb, c)
                    }
                    function eb(b) {
                        return "var" == b ? a(ua, da) : "variable" == b ? a(da) : n(da)
                    }
                    function da(b, d) {
                        return ")" == b ? a() : ";" == b ? a(da) : "in" == d || "of" == d ? (g.marked = "keyword",
                        a(t, da)) : n(t, da)
                    }
                    function V(b, d) {
                        if ("*" == d)
                            return g.marked = "keyword",
                            a(V);
                        if ("variable" == b)
                            return v(d),
                            a(V);
                        if ("(" == b)
                            return a(x, e(")"), C(Y, ")"), c, N, B, F);
                        if (y && "<" == d)
                            return a(e(">"), C(qa, ">"), c, V)
                    }
                    function ca(b, d) {
                        if ("*" == d)
                            return g.marked = "keyword",
                            a(ca);
                        if ("variable" == b)
                            return v(d),
                            a(ca);
                        if ("(" == b)
                            return a(x, e(")"), C(Y, ")"), c, N, F);
                        if (y && "<" == d)
                            return a(e(">"), C(qa, ">"), c, ca)
                    }
                    function Ga(b, d) {
                        if ("keyword" == b || "variable" == b)
                            return g.marked = "type",
                            a(Ga);
                        if ("<" == d)
                            return a(e(">"), C(qa, ">"), c)
                    }
                    function Y(b, d) {
                        "@" == d && a(t, Y);
                        return "spread" == b ? a(Y) : y && K(d) ? (g.marked = "keyword",
                        a(Y)) : y && "this" == b ? a(Q, X) : n(P, Q, X)
                    }
                    function Ta(a, d) {
                        return "variable" == a ? Ea(a, d) : ra(a, d)
                    }
                    function Ea(b, d) {
                        if ("variable" == b)
                            return v(d),
                            a(ra)
                    }
                    function ra(b, d) {
                        if ("<" == d)
                            return a(e(">"), C(qa, ">"), c, ra);
                        if ("extends" == d || "implements" == d || y && "," == b)
                            return "implements" == d && (g.marked = "keyword"),
                            a(y ? m : t, ra);
                        if ("{" == b)
                            return a(e("}"), T, c)
                    }
                    function T(b, d) {
                        if ("async" == b || "variable" == b && ("static" == d || "get" == d || "set" == d || y && K(d)) && g.stream.match(/^\s+[\w$\xa1-\uffff]/, !1))
                            return g.marked = "keyword",
                            a(T);
                        if ("variable" == b || "keyword" == g.style)
                            return g.marked = "property",
                            a(sa, T);
                        if ("number" == b || "string" == b)
                            return a(sa, T);
                        if ("[" == b)
                            return a(t, Q, p("]"), sa, T);
                        if ("*" == d)
                            return g.marked = "keyword",
                            a(T);
                        if (y && "(" == b)
                            return n(ca, T);
                        if (";" == b || "," == b)
                            return a(T);
                        if ("}" == b)
                            return a();
                        if ("@" == d)
                            return a(t, T)
                    }
                    function sa(b, d) {
                        if ("?" == d)
                            return a(sa);
                        if (":" == b)
                            return a(m, X);
                        if ("=" == d)
                            return a(k);
                        b = g.state.lexical.prev;
                        return n(b && "interface" == b.info ? ca : V)
                    }
                    function Qa(b, d) {
                        return "*" == d ? (g.marked = "keyword",
                        a(xa, p(";"))) : "default" == d ? (g.marked = "keyword",
                        a(t, p(";"))) : "{" == b ? a(C(Ka, "}"), xa, p(";")) : n(B)
                    }
                    function Ka(b, d) {
                        if ("as" == d)
                            return g.marked = "keyword",
                            a(p("variable"));
                        if ("variable" == b)
                            return n(k, Ka)
                    }
                    function Ra(b) {
                        return "string" == b ? a() : "(" == b ? n(t) : n(ta, La, xa)
                    }
                    function ta(b, d) {
                        if ("{" == b)
                            return ia(ta, "}");
                        "variable" == b && v(d);
                        "*" == d && (g.marked = "keyword");
                        return a(fb)
                    }
                    function La(b) {
                        if ("," == b)
                            return a(ta, La)
                    }
                    function fb(b, d) {
                        if ("as" == d)
                            return g.marked = "keyword",
                            a(ta)
                    }
                    function xa(b, d) {
                        if ("from" == d)
                            return g.marked = "keyword",
                            a(t)
                    }
                    function Ua(b) {
                        return "]" == b ? a() : n(C(k, "]"))
                    }
                    function Fa() {
                        return n(e("form"), P, p("{"), e("}"), C(gb, "}"), c, c)
                    }
                    function gb() {
                        return n(P, X)
                    }
                    function za(a, d, f) {
                        return d.tokenize == H && /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(d.lastType) || "quasi" == d.lastType && /\{\s*$/.test(a.string.slice(0, a.pos - (f || 0)))
                    }
                    var ea = D.indentUnit, Ma = u.statementIndent, ma = u.jsonld, Z = u.json || ma, y = u.typescript, la = u.wordCharacters || /[\w$\xa1-\uffff]/, Ba = function() {
                        function a(a) {
                            return {
                                type: a,
                                style: "keyword"
                            }
                        }
                        var f = a("keyword a")
                          , c = a("keyword b")
                          , e = a("keyword c")
                          , m = a("keyword d")
                          , E = a("operator")
                          , g = {
                            type: "atom",
                            style: "atom"
                        };
                        return {
                            "if": a("if"),
                            "while": f,
                            "with": f,
                            "else": c,
                            "do": c,
                            "try": c,
                            "finally": c,
                            "return": m,
                            "break": m,
                            "continue": m,
                            "new": a("new"),
                            "delete": e,
                            "void": e,
                            "throw": e,
                            "debugger": a("debugger"),
                            "var": a("var"),
                            "const": a("var"),
                            let: a("var"),
                            "function": a("function"),
                            "catch": a("catch"),
                            "for": a("for"),
                            "switch": a("switch"),
                            "case": a("case"),
                            "default": a("default"),
                            "in": E,
                            "typeof": E,
                            "instanceof": E,
                            "true": g,
                            "false": g,
                            "null": g,
                            undefined: g,
                            NaN: g,
                            Infinity: g,
                            "this": a("this"),
                            "class": a("class"),
                            "super": a("atom"),
                            yield: e,
                            "export": a("export"),
                            "import": a("import"),
                            "extends": e,
                            await: e
                        }
                    }(), Aa = /[+\-*&%=<>!?|~^@]/, Na = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/, ha, ka, Sa = {
                        atom: !0,
                        number: !0,
                        variable: !0,
                        string: !0,
                        regexp: !0,
                        "this": !0,
                        "jsonld-keyword": !0
                    }, g = {
                        state: null,
                        column: null,
                        marked: null,
                        cc: null
                    }, Oa = new L("this",new L("arguments",null));
                    F.lex = !0;
                    c.lex = !0;
                    return {
                        startState: function(a) {
                            a = {
                                tokenize: H,
                                lastType: "sof",
                                cc: [],
                                lexical: new O((a || 0) - ea,0,"block",!1),
                                localVars: u.localVars,
                                context: u.localVars && new A(null,null,!1),
                                indented: a || 0
                            };
                            u.globalVars && "object" == typeof u.globalVars && (a.globalVars = u.globalVars);
                            return a
                        },
                        token: function(a, f) {
                            a.sol() && (f.lexical.hasOwnProperty("align") || (f.lexical.align = !1),
                            f.indented = a.indentation(),
                            q(a, f));
                            if (f.tokenize != G && a.eatSpace())
                                return null;
                            var b = f.tokenize(a, f);
                            if ("comment" == ha)
                                return b;
                            f.lastType = "operator" != ha || "++" != ka && "--" != ka ? ha : "incdec";
                            a: {
                                var d = ha
                                  , c = ka
                                  , e = f.cc;
                                g.state = f;
                                g.stream = a;
                                g.marked = null;
                                g.cc = e;
                                g.style = b;
                                f.lexical.hasOwnProperty("align") || (f.lexical.align = !0);
                                for (; ; )
                                    if ((e.length ? e.pop() : Z ? t : B)(d, c)) {
                                        for (; e.length && e[e.length - 1].lex; )
                                            e.pop()();
                                        if (g.marked) {
                                            b = g.marked;
                                            break a
                                        }
                                        if (a = "variable" == d)
                                            b: {
                                                for (a = f.localVars; a; a = a.next)
                                                    if (a.name == c) {
                                                        a = !0;
                                                        break b
                                                    }
                                                for (f = f.context; f; f = f.prev)
                                                    for (a = f.vars; a; a = a.next)
                                                        if (a.name == c) {
                                                            a = !0;
                                                            break b
                                                        }
                                                a = void 0
                                            }
                                        if (a) {
                                            b = "variable-2";
                                            break a
                                        }
                                        break a
                                    }
                            }
                            return b
                        },
                        indent: function(a, f) {
                            if (a.tokenize == G || a.tokenize == M)
                                return h.Pass;
                            if (a.tokenize != H)
                                return 0;
                            var b = f && f.charAt(0), d = a.lexical, e;
                            if (!/^\s*else\b/.test(f))
                                for (var m = a.cc.length - 1; 0 <= m; --m) {
                                    var E = a.cc[m];
                                    if (E == c)
                                        d = d.prev;
                                    else if (E != Ca)
                                        break
                                }
                            for (; !("stat" != d.type && "form" != d.type || "}" != b && (!(e = a.cc[a.cc.length - 1]) || e != aa && e != ba || /^[,\.=+\-*:?[\(]/.test(f))); )
                                d = d.prev;
                            Ma && ")" == d.type && "stat" == d.prev.type && (d = d.prev);
                            e = d.type;
                            m = b == e;
                            return "vardef" == e ? d.indented + ("operator" == a.lastType || "," == a.lastType ? d.info.length + 1 : 0) : "form" == e && "{" == b ? d.indented : "form" == e ? d.indented + ea : "stat" == e ? (b = d.indented,
                            a = "operator" == a.lastType || "," == a.lastType || Aa.test(f.charAt(0)) || /[,.]/.test(f.charAt(0)),
                            b + (a ? Ma || ea : 0)) : "switch" != d.info || m || 0 == u.doubleIndentSwitch ? d.align ? d.column + (m ? 0 : 1) : d.indented + (m ? 0 : ea) : d.indented + (/^(?:case|default)\b/.test(f) ? ea : 2 * ea)
                        },
                        electricInput: /^\s*(?:case .*?:|default:|\{|\})$/,
                        blockCommentStart: Z ? null : "/*",
                        blockCommentEnd: Z ? null : "*/",
                        blockCommentContinue: Z ? null : " * ",
                        lineComment: Z ? null : "//",
                        fold: "brace",
                        closeBrackets: "()[]{}''\"\"``",
                        helperType: Z ? "json" : "javascript",
                        jsonldMode: ma,
                        jsonMode: Z,
                        expressionAllowed: za,
                        skipExpression: function(a) {
                            var b = a.cc[a.cc.length - 1];
                            b != t && b != k || a.cc.pop()
                        }
                    }
                });
                h.registerHelper("wordChars", "javascript", /[\w$]/);
                h.defineMIME("text/javascript", "javascript");
                h.defineMIME("text/ecmascript", "javascript");
                h.defineMIME("application/javascript", "javascript");
                h.defineMIME("application/x-javascript", "javascript");
                h.defineMIME("application/ecmascript", "javascript");
                h.defineMIME("application/json", {
                    name: "javascript",
                    json: !0
                });
                h.defineMIME("application/x-json", {
                    name: "javascript",
                    json: !0
                });
                h.defineMIME("application/manifest+json", {
                    name: "javascript",
                    json: !0
                });
                h.defineMIME("application/ld+json", {
                    name: "javascript",
                    jsonld: !0
                });
                h.defineMIME("text/typescript", {
                    name: "javascript",
                    typescript: !0
                });
                h.defineMIME("application/typescript", {
                    name: "javascript",
                    typescript: !0
                })
            });
            (function(h) {
                "object" == typeof exports && "object" == typeof module ? h(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], h) : h(CodeMirror)
            }
            )(function(h) {
                function D(a) {
                    for (var c = {}, e = 0; e < a.length; ++e)
                        c[a[e].toLowerCase()] = !0;
                    return c
                }
                function u(a, c) {
                    for (var e = !1, h; null != (h = a.next()); ) {
                        if (e && "/" == h) {
                            c.tokenize = null;
                            break
                        }
                        e = "*" == h
                    }
                    return ["comment", "comment"]
                }
                h.defineMode("css", function(a, c) {
                    function e(a, e) {
                        Q = e;
                        return a
                    }
                    function l(a, c) {
                        var f = a.next();
                        if (A[f]) {
                            var m = A[f](a, c);
                            if (!1 !== m)
                                return m
                        }
                        if ("@" == f)
                            return a.eatWhile(/[\w\\\-]/),
                            e("def", a.current());
                        if ("=" == f || ("~" == f || "|" == f) && a.eat("="))
                            return e(null, "compare");
                        if ('"' == f || "'" == f)
                            return c.tokenize = n(f),
                            c.tokenize(a, c);
                        if ("#" == f)
                            return a.eatWhile(/[\w\\\-]/),
                            e("atom", "hash");
                        if ("!" == f)
                            return a.match(/^\s*\w*/),
                            e("keyword", "important");
                        if (/\d/.test(f) || "." == f && a.eat(/\d/))
                            return a.eatWhile(/[\w.%]/),
                            e("number", "unit");
                        if ("-" === f) {
                            if (/[\d.]/.test(a.peek()))
                                return a.eatWhile(/[\w.%]/),
                                e("number", "unit");
                            if (a.match(/^-[\w\\\-]*/))
                                return a.eatWhile(/[\w\\\-]/),
                                a.match(/^\s*:/, !1) ? e("variable-2", "variable-definition") : e("variable-2", "variable");
                            if (a.match(/^\w+-/))
                                return e("meta", "meta")
                        } else
                            return /[,+>*\/]/.test(f) ? e(null, "select-op") : "." == f && a.match(/^-?[_a-z][_a-z0-9-]*/i) ? e("qualifier", "qualifier") : /[:;{}\[\]\(\)]/.test(f) ? e(null, f) : a.match(/^[\w-.]+(?=\()/) ? (/^(url(-prefix)?|domain|regexp)$/i.test(a.current()) && (c.tokenize = t),
                            e("variable callee", "variable")) : /[\w\\\-]/.test(f) ? (a.eatWhile(/[\w\\\-]/),
                            e("property", "word")) : e(null, null)
                    }
                    function n(a) {
                        return function(f, c) {
                            for (var m = !1, E; null != (E = f.next()); ) {
                                if (E == a && !m) {
                                    ")" == a && f.backUp(1);
                                    break
                                }
                                m = !m && "\\" == E
                            }
                            if (E == a || !m && ")" != a)
                                c.tokenize = null;
                            return e("string", "string")
                        }
                    }
                    function t(a, c) {
                        a.next();
                        a.match(/^\s*["')]/, !1) ? c.tokenize = null : c.tokenize = n(")");
                        return e(null, "(")
                    }
                    function k(a, e, c) {
                        this.type = a;
                        this.indent = e;
                        this.prev = c
                    }
                    function r(a, e, c, h) {
                        a.context = new k(c,e.indentation() + (!1 === h ? 0 : x),a.context);
                        return c
                    }
                    function q(a) {
                        a.context.prev && (a.context = a.context.prev);
                        return a.context.type
                    }
                    function u(a, e, c, h) {
                        for (h = h || 1; 0 < h; h--)
                            c.context = c.context.prev;
                        return N[c.context.type](a, e, c)
                    }
                    function v(a) {
                        a = a.current().toLowerCase();
                        z = S.hasOwnProperty(a) ? "atom" : M.hasOwnProperty(a) ? "keyword" : "variable"
                    }
                    var w = c.inline;
                    c.propertyKeywords || (c = h.resolveMode("text/css"));
                    var x = a.indentUnit, A = c.tokenHooks, D = c.documentTypes || {}, F = c.mediaTypes || {}, G = c.mediaFeatures || {}, H = c.mediaValueKeywords || {}, I = c.propertyKeywords || {}, J = c.nonStandardPropertyKeywords || {}, K = c.fontProperties || {}, L = c.counterDescriptors || {}, M = c.colorKeywords || {}, S = c.valueKeywords || {}, C = c.allowNested, O = !0 === c.supportsAtComponent, R = !1 !== a.highlightNonStandardPropertyKeywords, Q, z, N = {
                        top: function(a, e, c) {
                            if ("{" == a)
                                return r(c, e, "block");
                            if ("}" == a && c.context.prev)
                                return q(c);
                            if (O && /@component/i.test(a))
                                return r(c, e, "atComponentBlock");
                            if (/^@(-moz-)?document$/i.test(a))
                                return r(c, e, "documentTypes");
                            if (/^@(media|supports|(-moz-)?document|import)$/i.test(a))
                                return r(c, e, "atBlock");
                            if (/^@(font-face|counter-style)/i.test(a))
                                return c.stateArg = a,
                                "restricted_atBlock_before";
                            if (/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(a))
                                return "keyframes";
                            if (a && "@" == a.charAt(0))
                                return r(c, e, "at");
                            if ("hash" == a)
                                z = "builtin";
                            else if ("word" == a)
                                z = "tag";
                            else {
                                if ("variable-definition" == a)
                                    return "maybeprop";
                                if ("interpolation" == a)
                                    return r(c, e, "interpolation");
                                if (":" == a)
                                    return "pseudo";
                                if (C && "(" == a)
                                    return r(c, e, "parens")
                            }
                            return c.context.type
                        },
                        block: function(a, e, c) {
                            if ("word" == a) {
                                a = e.current().toLowerCase();
                                if (I.hasOwnProperty(a))
                                    return z = "property",
                                    "maybeprop";
                                if (J.hasOwnProperty(a))
                                    return z = R ? "string-2" : "property",
                                    "maybeprop";
                                if (C)
                                    return z = e.match(/^\s*:(?:\s|$)/, !1) ? "property" : "tag",
                                    "block";
                                z += " error";
                                return "maybeprop"
                            }
                            if ("meta" == a)
                                return "block";
                            if (C || "hash" != a && "qualifier" != a)
                                return N.top(a, e, c);
                            z = "error";
                            return "block"
                        },
                        maybeprop: function(a, e, c) {
                            return ":" == a ? r(c, e, "prop") : N[c.context.type](a, e, c)
                        },
                        prop: function(a, e, c) {
                            if (";" == a)
                                return q(c);
                            if ("{" == a && C)
                                return r(c, e, "propBlock");
                            if ("}" == a || "{" == a)
                                return u(a, e, c);
                            if ("(" == a)
                                return r(c, e, "parens");
                            if ("hash" == a && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(e.current()))
                                z += " error";
                            else if ("word" == a)
                                v(e);
                            else if ("interpolation" == a)
                                return r(c, e, "interpolation");
                            return "prop"
                        },
                        propBlock: function(a, e, c) {
                            return "}" == a ? q(c) : "word" == a ? (z = "property",
                            "maybeprop") : c.context.type
                        },
                        parens: function(a, e, c) {
                            if ("{" == a || "}" == a)
                                return u(a, e, c);
                            if (")" == a)
                                return q(c);
                            if ("(" == a)
                                return r(c, e, "parens");
                            if ("interpolation" == a)
                                return r(c, e, "interpolation");
                            "word" == a && v(e);
                            return "parens"
                        },
                        pseudo: function(a, e, c) {
                            return "meta" == a ? "pseudo" : "word" == a ? (z = "variable-3",
                            c.context.type) : N[c.context.type](a, e, c)
                        },
                        documentTypes: function(a, c, e) {
                            return "word" == a && D.hasOwnProperty(c.current()) ? (z = "tag",
                            e.context.type) : N.atBlock(a, c, e)
                        },
                        atBlock: function(a, c, e) {
                            if ("(" == a)
                                return r(e, c, "atBlock_parens");
                            if ("}" == a || ";" == a)
                                return u(a, c, e);
                            if ("{" == a)
                                return q(e) && r(e, c, C ? "block" : "top");
                            if ("interpolation" == a)
                                return r(e, c, "interpolation");
                            "word" == a && (a = c.current().toLowerCase(),
                            z = "only" == a || "not" == a || "and" == a || "or" == a ? "keyword" : F.hasOwnProperty(a) ? "attribute" : G.hasOwnProperty(a) ? "property" : H.hasOwnProperty(a) ? "keyword" : I.hasOwnProperty(a) ? "property" : J.hasOwnProperty(a) ? R ? "string-2" : "property" : S.hasOwnProperty(a) ? "atom" : M.hasOwnProperty(a) ? "keyword" : "error");
                            return e.context.type
                        },
                        atComponentBlock: function(a, c, e) {
                            if ("}" == a)
                                return u(a, c, e);
                            if ("{" == a)
                                return q(e) && r(e, c, C ? "block" : "top", !1);
                            "word" == a && (z = "error");
                            return e.context.type
                        },
                        atBlock_parens: function(a, e, c) {
                            return ")" == a ? q(c) : "{" == a || "}" == a ? u(a, e, c, 2) : N.atBlock(a, e, c)
                        },
                        restricted_atBlock_before: function(a, e, c) {
                            return "{" == a ? r(c, e, "restricted_atBlock") : "word" == a && "@counter-style" == c.stateArg ? (z = "variable",
                            "restricted_atBlock_before") : N[c.context.type](a, e, c)
                        },
                        restricted_atBlock: function(a, c, e) {
                            return "}" == a ? (e.stateArg = null,
                            q(e)) : "word" == a ? (z = "@font-face" == e.stateArg && !K.hasOwnProperty(c.current().toLowerCase()) || "@counter-style" == e.stateArg && !L.hasOwnProperty(c.current().toLowerCase()) ? "error" : "property",
                            "maybeprop") : "restricted_atBlock"
                        },
                        keyframes: function(a, e, c) {
                            return "word" == a ? (z = "variable",
                            "keyframes") : "{" == a ? r(c, e, "top") : N[c.context.type](a, e, c)
                        },
                        at: function(a, c, e) {
                            if (";" == a)
                                return q(e);
                            if ("{" == a || "}" == a)
                                return u(a, c, e);
                            "word" == a ? z = "tag" : "hash" == a && (z = "builtin");
                            return "at"
                        },
                        interpolation: function(a, e, c) {
                            if ("}" == a)
                                return q(c);
                            if ("{" == a || ";" == a)
                                return u(a, e, c);
                            "word" == a ? z = "variable" : "variable" != a && "(" != a && ")" != a && (z = "error");
                            return "interpolation"
                        }
                    };
                    return {
                        startState: function(a) {
                            return {
                                tokenize: null,
                                state: w ? "block" : "top",
                                stateArg: null,
                                context: new k(w ? "block" : "top",a || 0,null)
                            }
                        },
                        token: function(a, c) {
                            if (!c.tokenize && a.eatSpace())
                                return null;
                            var e = (c.tokenize || l)(a, c);
                            e && "object" == typeof e && (Q = e[1],
                            e = e[0]);
                            z = e;
                            "comment" != Q && (c.state = N[c.state](Q, a, c));
                            return z
                        },
                        indent: function(a, c) {
                            a = a.context;
                            c = c && c.charAt(0);
                            var e = a.indent;
                            "prop" != a.type || "}" != c && ")" != c || (a = a.prev);
                            if (a.prev)
                                if ("}" == c && ("block" == a.type || "top" == a.type || "interpolation" == a.type || "restricted_atBlock" == a.type))
                                    a = a.prev,
                                    e = a.indent;
                                else if (")" == c && ("parens" == a.type || "atBlock_parens" == a.type) || "{" == c && ("at" == a.type || "atBlock" == a.type))
                                    e = Math.max(0, a.indent - x);
                            return e
                        },
                        electricChars: "}",
                        blockCommentStart: "/*",
                        blockCommentEnd: "*/",
                        blockCommentContinue: " * ",
                        lineComment: c.lineComment,
                        fold: "brace"
                    }
                });
                var l = ["domain", "regexp", "url", "url-prefix"]
                  , H = D(l)
                  , I = "all aural braille handheld print projection screen tty tv embossed".split(" ")
                  , G = D(I)
                  , M = "width min-width max-width height min-height max-height device-width min-device-width max-device-width device-height min-device-height max-device-height aspect-ratio min-aspect-ratio max-aspect-ratio device-aspect-ratio min-device-aspect-ratio max-device-aspect-ratio color min-color max-color color-index min-color-index max-color-index monochrome min-monochrome max-monochrome resolution min-resolution max-resolution scan grid orientation device-pixel-ratio min-device-pixel-ratio max-device-pixel-ratio pointer any-pointer hover any-hover prefers-color-scheme".split(" ")
                  , q = D(M)
                  , O = "landscape portrait none coarse fine on-demand hover interlace progressive dark light".split(" ")
                  , n = D(O)
                  , a = "align-content align-items align-self alignment-adjust alignment-baseline all anchor-point animation animation-delay animation-direction animation-duration animation-fill-mode animation-iteration-count animation-name animation-play-state animation-timing-function appearance azimuth backdrop-filter backface-visibility background background-attachment background-blend-mode background-clip background-color background-image background-origin background-position background-position-x background-position-y background-repeat background-size baseline-shift binding bleed block-size bookmark-label bookmark-level bookmark-state bookmark-target border border-bottom border-bottom-color border-bottom-left-radius border-bottom-right-radius border-bottom-style border-bottom-width border-collapse border-color border-image border-image-outset border-image-repeat border-image-slice border-image-source border-image-width border-left border-left-color border-left-style border-left-width border-radius border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-left-radius border-top-right-radius border-top-style border-top-width border-width bottom box-decoration-break box-shadow box-sizing break-after break-before break-inside caption-side caret-color clear clip color color-profile column-count column-fill column-gap column-rule column-rule-color column-rule-style column-rule-width column-span column-width columns contain content counter-increment counter-reset crop cue cue-after cue-before cursor direction display dominant-baseline drop-initial-after-adjust drop-initial-after-align drop-initial-before-adjust drop-initial-before-align drop-initial-size drop-initial-value elevation empty-cells fit fit-position flex flex-basis flex-direction flex-flow flex-grow flex-shrink flex-wrap float float-offset flow-from flow-into font font-family font-feature-settings font-kerning font-language-override font-optical-sizing font-size font-size-adjust font-stretch font-style font-synthesis font-variant font-variant-alternates font-variant-caps font-variant-east-asian font-variant-ligatures font-variant-numeric font-variant-position font-variation-settings font-weight gap grid grid-area grid-auto-columns grid-auto-flow grid-auto-rows grid-column grid-column-end grid-column-gap grid-column-start grid-gap grid-row grid-row-end grid-row-gap grid-row-start grid-template grid-template-areas grid-template-columns grid-template-rows hanging-punctuation height hyphens icon image-orientation image-rendering image-resolution inline-box-align inset inset-block inset-block-end inset-block-start inset-inline inset-inline-end inset-inline-start isolation justify-content justify-items justify-self left letter-spacing line-break line-height line-height-step line-stacking line-stacking-ruby line-stacking-shift line-stacking-strategy list-style list-style-image list-style-position list-style-type margin margin-bottom margin-left margin-right margin-top marks marquee-direction marquee-loop marquee-play-count marquee-speed marquee-style mask-clip mask-composite mask-image mask-mode mask-origin mask-position mask-repeat mask-size mask-type max-block-size max-height max-inline-size max-width min-block-size min-height min-inline-size min-width mix-blend-mode move-to nav-down nav-index nav-left nav-right nav-up object-fit object-position offset offset-anchor offset-distance offset-path offset-position offset-rotate opacity order orphans outline outline-color outline-offset outline-style outline-width overflow overflow-style overflow-wrap overflow-x overflow-y padding padding-bottom padding-left padding-right padding-top page page-break-after page-break-before page-break-inside page-policy pause pause-after pause-before perspective perspective-origin pitch pitch-range place-content place-items place-self play-during position presentation-level punctuation-trim quotes region-break-after region-break-before region-break-inside region-fragment rendering-intent resize rest rest-after rest-before richness right rotate rotation rotation-point row-gap ruby-align ruby-overhang ruby-position ruby-span scale scroll-behavior scroll-margin scroll-margin-block scroll-margin-block-end scroll-margin-block-start scroll-margin-bottom scroll-margin-inline scroll-margin-inline-end scroll-margin-inline-start scroll-margin-left scroll-margin-right scroll-margin-top scroll-padding scroll-padding-block scroll-padding-block-end scroll-padding-block-start scroll-padding-bottom scroll-padding-inline scroll-padding-inline-end scroll-padding-inline-start scroll-padding-left scroll-padding-right scroll-padding-top scroll-snap-align scroll-snap-type shape-image-threshold shape-inside shape-margin shape-outside size speak speak-as speak-header speak-numeral speak-punctuation speech-rate stress string-set tab-size table-layout target target-name target-new target-position text-align text-align-last text-combine-upright text-decoration text-decoration-color text-decoration-line text-decoration-skip text-decoration-skip-ink text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-height text-indent text-justify text-orientation text-outline text-overflow text-rendering text-shadow text-size-adjust text-space-collapse text-transform text-underline-position text-wrap top touch-action transform transform-origin transform-style transition transition-delay transition-duration transition-property transition-timing-function translate unicode-bidi user-select vertical-align visibility voice-balance voice-duration voice-family voice-pitch voice-range voice-rate voice-stress voice-volume volume white-space widows width will-change word-break word-spacing word-wrap writing-mode z-index clip-path clip-rule mask enable-background filter flood-color flood-opacity lighting-color stop-color stop-opacity pointer-events color-interpolation color-interpolation-filters color-rendering fill fill-opacity fill-rule image-rendering marker marker-end marker-mid marker-start paint-order shape-rendering stroke stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-rendering baseline-shift dominant-baseline glyph-orientation-horizontal glyph-orientation-vertical text-anchor writing-mode".split(" ")
                  , w = D(a)
                  , v = "border-block border-block-color border-block-end border-block-end-color border-block-end-style border-block-end-width border-block-start border-block-start-color border-block-start-style border-block-start-width border-block-style border-block-width border-inline border-inline-color border-inline-end border-inline-end-color border-inline-end-style border-inline-end-width border-inline-start border-inline-start-color border-inline-start-style border-inline-start-width border-inline-style border-inline-width margin-block margin-block-end margin-block-start margin-inline margin-inline-end margin-inline-start padding-block padding-block-end padding-block-start padding-inline padding-inline-end padding-inline-start scroll-snap-stop scrollbar-3d-light-color scrollbar-arrow-color scrollbar-base-color scrollbar-dark-shadow-color scrollbar-face-color scrollbar-highlight-color scrollbar-shadow-color scrollbar-track-color searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration shape-inside zoom".split(" ")
                  , J = D(v)
                  , K = D("font-display font-family src unicode-range font-variant font-feature-settings font-stretch font-weight font-style".split(" "))
                  , A = D("additive-symbols fallback negative pad prefix range speak-as suffix symbols system".split(" "))
                  , L = "aliceblue antiquewhite aqua aquamarine azure beige bisque black blanchedalmond blue blueviolet brown burlywood cadetblue chartreuse chocolate coral cornflowerblue cornsilk crimson cyan darkblue darkcyan darkgoldenrod darkgray darkgreen darkkhaki darkmagenta darkolivegreen darkorange darkorchid darkred darksalmon darkseagreen darkslateblue darkslategray darkturquoise darkviolet deeppink deepskyblue dimgray dodgerblue firebrick floralwhite forestgreen fuchsia gainsboro ghostwhite gold goldenrod gray grey green greenyellow honeydew hotpink indianred indigo ivory khaki lavender lavenderblush lawngreen lemonchiffon lightblue lightcoral lightcyan lightgoldenrodyellow lightgray lightgreen lightpink lightsalmon lightseagreen lightskyblue lightslategray lightsteelblue lightyellow lime limegreen linen magenta maroon mediumaquamarine mediumblue mediumorchid mediumpurple mediumseagreen mediumslateblue mediumspringgreen mediumturquoise mediumvioletred midnightblue mintcream mistyrose moccasin navajowhite navy oldlace olive olivedrab orange orangered orchid palegoldenrod palegreen paleturquoise palevioletred papayawhip peachpuff peru pink plum powderblue purple rebeccapurple red rosybrown royalblue saddlebrown salmon sandybrown seagreen seashell sienna silver skyblue slateblue slategray snow springgreen steelblue tan teal thistle tomato turquoise violet wheat white whitesmoke yellow yellowgreen".split(" ")
                  , x = D(L)
                  , R = "above absolute activeborder additive activecaption afar after-white-space ahead alias all all-scroll alphabetic alternate always amharic amharic-abegede antialiased appworkspace arabic-indic armenian asterisks attr auto auto-flow avoid avoid-column avoid-page avoid-region axis-pan background backwards baseline below bidi-override binary bengali blink block block-axis bold bolder border border-box both bottom break break-all break-word bullets button button-bevel buttonface buttonhighlight buttonshadow buttontext calc cambodian capitalize caps-lock-indicator caption captiontext caret cell center checkbox circle cjk-decimal cjk-earthly-branch cjk-heavenly-stem cjk-ideographic clear clip close-quote col-resize collapse color color-burn color-dodge column column-reverse compact condensed contain content contents content-box context-menu continuous copy counter counters cover crop cross crosshair currentcolor cursive cyclic darken dashed decimal decimal-leading-zero default default-button dense destination-atop destination-in destination-out destination-over devanagari difference disc discard disclosure-closed disclosure-open document dot-dash dot-dot-dash dotted double down e-resize ease ease-in ease-in-out ease-out element ellipse ellipsis embed end ethiopic ethiopic-abegede ethiopic-abegede-am-et ethiopic-abegede-gez ethiopic-abegede-ti-er ethiopic-abegede-ti-et ethiopic-halehame-aa-er ethiopic-halehame-aa-et ethiopic-halehame-am-et ethiopic-halehame-gez ethiopic-halehame-om-et ethiopic-halehame-sid-et ethiopic-halehame-so-et ethiopic-halehame-ti-er ethiopic-halehame-ti-et ethiopic-halehame-tig ethiopic-numeric ew-resize exclusion expanded extends extra-condensed extra-expanded fantasy fast fill fill-box fixed flat flex flex-end flex-start footnotes forwards from geometricPrecision georgian graytext grid groove gujarati gurmukhi hand hangul hangul-consonant hard-light hebrew help hidden hide higher highlight highlighttext hiragana hiragana-iroha horizontal hsl hsla hue icon ignore inactiveborder inactivecaption inactivecaptiontext infinite infobackground infotext inherit initial inline inline-axis inline-block inline-flex inline-grid inline-table inset inside intrinsic invert italic japanese-formal japanese-informal justify kannada katakana katakana-iroha keep-all khmer korean-hangul-formal korean-hanja-formal korean-hanja-informal landscape lao large larger left level lighter lighten line-through linear linear-gradient lines list-item listbox listitem local logical loud lower lower-alpha lower-armenian lower-greek lower-hexadecimal lower-latin lower-norwegian lower-roman lowercase ltr luminosity malayalam manipulation match matrix matrix3d media-controls-background media-current-time-display media-fullscreen-button media-mute-button media-play-button media-return-to-realtime-button media-rewind-button media-seek-back-button media-seek-forward-button media-slider media-sliderthumb media-time-remaining-display media-volume-slider media-volume-slider-container media-volume-sliderthumb medium menu menulist menulist-button menulist-text menulist-textfield menutext message-box middle min-intrinsic mix mongolian monospace move multiple multiple_mask_images multiply myanmar n-resize narrower ne-resize nesw-resize no-close-quote no-drop no-open-quote no-repeat none normal not-allowed nowrap ns-resize numbers numeric nw-resize nwse-resize oblique octal opacity open-quote optimizeLegibility optimizeSpeed oriya oromo outset outside outside-shape overlay overline padding padding-box painted page paused persian perspective pinch-zoom plus-darker plus-lighter pointer polygon portrait pre pre-line pre-wrap preserve-3d progress push-button radial-gradient radio read-only read-write read-write-plaintext-only rectangle region relative repeat repeating-linear-gradient repeating-radial-gradient repeat-x repeat-y reset reverse rgb rgba ridge right rotate rotate3d rotateX rotateY rotateZ round row row-resize row-reverse rtl run-in running s-resize sans-serif saturation scale scale3d scaleX scaleY scaleZ screen scroll scrollbar scroll-position se-resize searchfield searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration self-start self-end semi-condensed semi-expanded separate serif show sidama simp-chinese-formal simp-chinese-informal single skew skewX skewY skip-white-space slide slider-horizontal slider-vertical sliderthumb-horizontal sliderthumb-vertical slow small small-caps small-caption smaller soft-light solid somali source-atop source-in source-out source-over space space-around space-between space-evenly spell-out square square-button start static status-bar stretch stroke stroke-box sub subpixel-antialiased svg_masks super sw-resize symbolic symbols system-ui table table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group tamil telugu text text-bottom text-top textarea textfield thai thick thin threeddarkshadow threedface threedhighlight threedlightshadow threedshadow tibetan tigre tigrinya-er tigrinya-er-abegede tigrinya-et tigrinya-et-abegede to top trad-chinese-formal trad-chinese-informal transform translate translate3d translateX translateY translateZ transparent ultra-condensed ultra-expanded underline unidirectional-pan unset up upper-alpha upper-armenian upper-greek upper-hexadecimal upper-latin upper-norwegian upper-roman uppercase urdu url var vertical vertical-text view-box visible visibleFill visiblePainted visibleStroke visual w-resize wait wave wider window windowframe windowtext words wrap wrap-reverse x-large x-small xor xx-large xx-small".split(" ")
                  , F = D(R);
                l = l.concat(I).concat(M).concat(O).concat(a).concat(v).concat(L).concat(R);
                h.registerHelper("hintWords", "css", l);
                h.defineMIME("text/css", {
                    documentTypes: H,
                    mediaTypes: G,
                    mediaFeatures: q,
                    mediaValueKeywords: n,
                    propertyKeywords: w,
                    nonStandardPropertyKeywords: J,
                    fontProperties: K,
                    counterDescriptors: A,
                    colorKeywords: x,
                    valueKeywords: F,
                    tokenHooks: {
                        "/": function(a, c) {
                            if (!a.eat("*"))
                                return !1;
                            c.tokenize = u;
                            return u(a, c)
                        }
                    },
                    name: "css"
                });
                h.defineMIME("text/x-scss", {
                    mediaTypes: G,
                    mediaFeatures: q,
                    mediaValueKeywords: n,
                    propertyKeywords: w,
                    nonStandardPropertyKeywords: J,
                    colorKeywords: x,
                    valueKeywords: F,
                    fontProperties: K,
                    allowNested: !0,
                    lineComment: "//",
                    tokenHooks: {
                        "/": function(a, c) {
                            return a.eat("/") ? (a.skipToEnd(),
                            ["comment", "comment"]) : a.eat("*") ? (c.tokenize = u,
                            u(a, c)) : ["operator", "operator"]
                        },
                        ":": function(a) {
                            return a.match(/^\s*\{/, !1) ? [null, null] : !1
                        },
                        $: function(a) {
                            a.match(/^[\w-]+/);
                            return a.match(/^\s*:/, !1) ? ["variable-2", "variable-definition"] : ["variable-2", "variable"]
                        },
                        "#": function(a) {
                            return a.eat("{") ? [null, "interpolation"] : !1
                        }
                    },
                    name: "css",
                    helperType: "scss"
                });
                h.defineMIME("text/x-less", {
                    mediaTypes: G,
                    mediaFeatures: q,
                    mediaValueKeywords: n,
                    propertyKeywords: w,
                    nonStandardPropertyKeywords: J,
                    colorKeywords: x,
                    valueKeywords: F,
                    fontProperties: K,
                    allowNested: !0,
                    lineComment: "//",
                    tokenHooks: {
                        "/": function(a, c) {
                            return a.eat("/") ? (a.skipToEnd(),
                            ["comment", "comment"]) : a.eat("*") ? (c.tokenize = u,
                            u(a, c)) : ["operator", "operator"]
                        },
                        "@": function(a) {
                            if (a.eat("{"))
                                return [null, "interpolation"];
                            if (a.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i, !1))
                                return !1;
                            a.eatWhile(/[\w\\\-]/);
                            return a.match(/^\s*:/, !1) ? ["variable-2", "variable-definition"] : ["variable-2", "variable"]
                        },
                        "&": function() {
                            return ["atom", "atom"]
                        }
                    },
                    name: "css",
                    helperType: "less"
                });
                h.defineMIME("text/x-gss", {
                    documentTypes: H,
                    mediaTypes: G,
                    mediaFeatures: q,
                    propertyKeywords: w,
                    nonStandardPropertyKeywords: J,
                    fontProperties: K,
                    counterDescriptors: A,
                    colorKeywords: x,
                    valueKeywords: F,
                    supportsAtComponent: !0,
                    tokenHooks: {
                        "/": function(a, c) {
                            if (!a.eat("*"))
                                return !1;
                            c.tokenize = u;
                            return u(a, c)
                        }
                    },
                    name: "css",
                    helperType: "gss"
                })
            });
            (function(h) {
                "object" == typeof exports && "object" == typeof module ? h(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], h) : h(CodeMirror)
            }
            )(function(h) {
                function l(a, b, d, c) {
                    this.line = b;
                    this.ch = d;
                    this.cm = a;
                    this.text = a.getLine(b);
                    this.min = c ? Math.max(c.from, a.firstLine()) : a.firstLine();
                    this.max = c ? Math.min(c.to - 1, a.lastLine()) : a.lastLine()
                }
                function m(a, b) {
                    return (a = a.cm.getTokenTypeAt(k(a.line, b))) && /\btag\b/.test(a)
                }
                function t(a) {
                    if (!(a.line >= a.max))
                        return a.ch = 0,
                        a.text = a.cm.getLine(++a.line),
                        !0
                }
                function u(a) {
                    if (!(a.line <= a.min))
                        return a.text = a.cm.getLine(--a.line),
                        a.ch = a.text.length,
                        !0
                }
                function q(a) {
                    for (; ; ) {
                        var b = a.text.indexOf(">", a.ch);
                        if (-1 == b)
                            if (t(a))
                                continue;
                            else
                                break;
                        if (m(a, b + 1)) {
                            var d = a.text.lastIndexOf("/", b);
                            d = -1 < d && !/\S/.test(a.text.slice(d + 1, b));
                            a.ch = b + 1;
                            return d ? "selfClose" : "regular"
                        }
                        a.ch = b + 1
                    }
                }
                function r(a) {
                    for (; ; ) {
                        var b = a.ch ? a.text.lastIndexOf("<", a.ch - 1) : -1;
                        if (-1 == b)
                            if (u(a))
                                continue;
                            else
                                break;
                        if (m(a, b + 1)) {
                            n.lastIndex = b;
                            a.ch = b;
                            var d = n.exec(a.text);
                            if (d && d.index == b)
                                return d
                        } else
                            a.ch = b
                    }
                }
                function v(a) {
                    for (; ; ) {
                        n.lastIndex = a.ch;
                        var b = n.exec(a.text);
                        if (!b)
                            if (t(a))
                                continue;
                            else
                                break;
                        if (m(a, b.index + 1))
                            return a.ch = b.index + b[0].length,
                            b;
                        a.ch = b.index + 1
                    }
                }
                function p(a, b) {
                    for (var d = []; ; ) {
                        var c = v(a), f, e = a.line, g = a.ch - (c ? c[0].length : 0);
                        if (!c || !(f = q(a)))
                            break;
                        if ("selfClose" != f)
                            if (c[1]) {
                                for (var h = d.length - 1; 0 <= h; --h)
                                    if (d[h] == c[2]) {
                                        d.length = h;
                                        break
                                    }
                                if (0 > h && (!b || b == c[2]))
                                    return {
                                        tag: c[2],
                                        from: k(e, g),
                                        to: k(a.line, a.ch)
                                    }
                            } else
                                d.push(c[2])
                    }
                }
                function w(a, b) {
                    for (var d = []; ; ) {
                        var c;
                        a: for (c = a; ; ) {
                            var f = c.ch ? c.text.lastIndexOf(">", c.ch - 1) : -1;
                            if (-1 == f)
                                if (u(c))
                                    continue;
                                else {
                                    c = void 0;
                                    break a
                                }
                            if (m(c, f + 1)) {
                                var e = c.text.lastIndexOf("/", f);
                                e = -1 < e && !/\S/.test(c.text.slice(e + 1, f));
                                c.ch = f + 1;
                                c = e ? "selfClose" : "regular";
                                break a
                            } else
                                c.ch = f
                        }
                        if (!c)
                            break;
                        if ("selfClose" == c)
                            r(a);
                        else {
                            c = a.line;
                            f = a.ch;
                            e = r(a);
                            if (!e)
                                break;
                            if (e[1])
                                d.push(e[2]);
                            else {
                                for (var g = d.length - 1; 0 <= g; --g)
                                    if (d[g] == e[2]) {
                                        d.length = g;
                                        break
                                    }
                                if (0 > g && (!b || b == e[2]))
                                    return {
                                        tag: e[2],
                                        from: k(a.line, a.ch),
                                        to: k(c, f)
                                    }
                            }
                        }
                    }
                }
                var k = h.Pos
                  , n = /<(\/?)([A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD-:.0-9\u00B7\u0300-\u036F\u203F-\u2040]*)/g;
                h.registerHelper("fold", "xml", function(a, b) {
                    for (a = new l(a,b.line,0); ; ) {
                        var d = v(a);
                        if (!d || a.line != b.line)
                            break;
                        var c = q(a);
                        if (!c)
                            break;
                        if (!d[1] && "selfClose" != c) {
                            b = k(a.line, a.ch);
                            if (d = a = p(a, d[2]))
                                d = a.from,
                                d = 0 < (d.line - b.line || d.ch - b.ch);
                            return d ? {
                                from: b,
                                to: a.from
                            } : null
                        }
                    }
                });
                h.findMatchingTag = function(a, b, d) {
                    var c = new l(a,b.line,b.ch,d);
                    if (-1 != c.text.indexOf(">") || -1 != c.text.indexOf("<")) {
                        var f = q(c)
                          , e = f && k(c.line, c.ch)
                          , g = f && r(c);
                        if (f && g && !(0 < (c.line - b.line || c.ch - b.ch))) {
                            b = {
                                from: k(c.line, c.ch),
                                to: e,
                                tag: g[2]
                            };
                            if ("selfClose" == f)
                                return {
                                    open: b,
                                    close: null,
                                    at: "open"
                                };
                            if (g[1])
                                return {
                                    open: w(c, g[2]),
                                    close: b,
                                    at: "close"
                                };
                            c = new l(a,e.line,e.ch,d);
                            return {
                                open: b,
                                close: p(c, g[2]),
                                at: "open"
                            }
                        }
                    }
                }
                ;
                h.findEnclosingTag = function(a, b, d, c) {
                    for (var f = new l(a,b.line,b.ch,d); ; ) {
                        var e = w(f, c);
                        if (!e)
                            break;
                        var g = new l(a,b.line,b.ch,d);
                        if (g = p(g, e.tag))
                            return {
                                open: e,
                                close: g
                            }
                    }
                }
                ;
                h.scanForClosingTag = function(a, b, d, c) {
                    a = new l(a,b.line,b.ch,c ? {
                        from: 0,
                        to: c
                    } : null);
                    return p(a, d)
                }
            });
            (function(d) {
                "object" == typeof exports && "object" == typeof module ? d(require("../../lib/codemirror"), require("../fold/xml-fold")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror", "../fold/xml-fold"], d) : d(CodeMirror)
            }
            )(function(d) {
                function f(a) {
                    a.state.tagHit && a.state.tagHit.clear();
                    a.state.tagOther && a.state.tagOther.clear();
                    a.state.tagHit = a.state.tagOther = null
                }
                function e(a) {
                    a.state.failedTagMatch = !1;
                    a.operation(function() {
                        f(a);
                        if (!a.somethingSelected()) {
                            var b = a.getCursor()
                              , c = a.getViewport();
                            c.from = Math.min(c.from, b.line);
                            c.to = Math.max(b.line + 1, c.to);
                            if (b = d.findMatchingTag(a, b, c))
                                a.state.matchBothTags && (c = "open" == b.at ? b.open : b.close) && (a.state.tagHit = a.markText(c.from, c.to, {
                                    className: "CodeMirror-matchingtag"
                                })),
                                (b = "close" == b.at ? b.open : b.close) ? a.state.tagOther = a.markText(b.from, b.to, {
                                    className: "CodeMirror-matchingtag"
                                }) : a.state.failedTagMatch = !0
                        }
                    })
                }
                function g(a) {
                    a.state.failedTagMatch && e(a)
                }
                d.defineOption("matchTags", !1, function(a, b, c) {
                    c && c != d.Init && (a.off("cursorActivity", e),
                    a.off("viewportChange", g),
                    f(a));
                    b && (a.state.matchBothTags = "object" == typeof b && b.bothTags,
                    a.on("cursorActivity", e),
                    a.on("viewportChange", g),
                    e(a))
                });
                d.commands.toMatchingTag = function(a) {
                    var b = d.findMatchingTag(a, a.getCursor());
                    b && (b = "close" == b.at ? b.open : b.close) && a.extendSelection(b.to, b.from)
                }
            });

            var JsonView = function(e) {
                "use strict";
                function n(e) {
                    return (n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                        return typeof e
                    }
                    : function(e) {
                        return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                    }
                    )(e)
                }
                function t(e) {
                    if (e.children.length > 0) {
                        var n = e.el.querySelector(".fas");
                        n && n.classList.replace("fa-caret-right", "fa-caret-down")
                    }
                }
                function i(e) {
                    if (e.children.length > 0) {
                        var n = e.el.querySelector(".fas");
                        n && n.classList.replace("fa-caret-down", "fa-caret-right")
                    }
                }
                function r(e) {
                    e.isExpanded ? (e.isExpanded = !1,
                    i(e),
                    function e(n) {
                        n.children.forEach(function(n) {
                            n.el.classList.add("hide"),
                            n.isExpanded && e(n)
                        })
                    }(e)) : (e.isExpanded = !0,
                    t(e),
                    function e(n) {
                        n.children.forEach(function(n) {
                            n.el.classList.remove("hide"),
                            n.isExpanded && e(n)
                        })
                    }(e))
                }
                function a(e) {
                    var t = n(e);
                    return Array.isArray(e) && (t = "array"),
                    null === e && (t = "null"),
                    t
                }
                function c(e, n) {
                    n(e),
                    e.children.length > 0 && e.children.forEach(function(e) {
                        c(e, n)
                    })
                }
                function l() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                    return {
                        key: e.key || null,
                        parent: e.parent || null,
                        value: e.hasOwnProperty("value") ? e.value : null,
                        isExpanded: e.isExpanded || !1,
                        type: e.type || null,
                        children: e.children || [],
                        el: e.el || null,
                        depth: e.depth || 0
                    }
                }
                function o(e) {
                    var t = "string" == typeof e ? JSON.parse(e) : e
                      , i = l({
                        value: t,
                        key: a(t),
                        type: a(t)
                    });
                    return function e(t, i) {
                        if ("object" === n(t))
                            for (var r in t) {
                                var c = l({
                                    value: t[r],
                                    key: r,
                                    depth: i.depth + 1,
                                    type: a(t[r]),
                                    parent: i
                                });
                                i.children.push(c),
                                e(t[r], c)
                            }
                    }(t, i),
                    i
                }
                function d(e, t) {
                    var i, a = ((i = document.createElement("div")).className = "json-container",
                    i);
                    c(e, function(e) {
                        e.el = function(e) {
                            var t = document.createElement("div");
                            e.children.length > 0 ? (t.innerHTML = function() {
                                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}
                                  , n = e.key
                                  , t = e.size;
                                return '\n    <div class="line">\n      <div class="caret-icon"><i class="fas fa-caret-right"></i></div>\n      <div class="json-key">'.concat(n, '</div>\n      <div class="json-size">').concat(t, "</div>\n    </div>\n  ")
                            }({
                                key: e.key,
                                size: function(e) {
                                    var n = e.children.length;
                                    return "array" === e.type ? "[".concat(n, "]") : "object" === e.type ? "{".concat(n, "}") : null
                                }(e)
                            }),
                            t.querySelector(".caret-icon").addEventListener("click", function() {
                                r(e)
                            })) : t.innerHTML = function() {
                                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}
                                  , n = e.key
                                  , t = e.value
                                  , i = e.type;
                                return '\n    <div class="line">\n      <div class="empty-icon"></div>\n      <div class="json-key">'.concat(n, '</div>\n      <div class="json-separator">:</div>\n      <div class="json-value json-').concat(i, '">').concat(t, "</div>\n    </div>\n  ")
                            }({
                                key: e.key,
                                value: e.value,
                                type: n(e.value)
                            });
                            var i = t.children[0];
                            return null !== e.parent && i.classList.add("hide"),
                            i.style = "margin-left: " + 18 * e.depth + "px;",
                            i
                        }(e),
                        a.appendChild(e.el)
                    }),
                    t.appendChild(a)
                }
                return e.collapseChildren = function(e) {
                    c(e, function(n) {
                        n.isExpanded = !1,
                        n.depth > e.depth && n.el.classList.add("hide"),
                        i(n)
                    })
                }
                ,
                e.createTree = o,
                e.expandChildren = function(e) {
                    c(e, function(e) {
                        e.el.classList.remove("hide"),
                        e.isExpanded = !0,
                        t(e)
                    })
                }
                ,
                e.render = d,
                e.renderJSON = function(e, n) {
                    var t = o("string" == typeof e ? JSON.parse(e) : e);
                    return d(t, n),
                    t
                }
                ,
                e.traverseTree = c,
                e
            }({});
        </script>
        <script>

            function update(e) {

                var data;

                dataArea.value = editor.getValue();

                try {
                    var json = JSON.parse(getData());

                    if (json && typeof json == 'object')
                        isJson = true;
                    else
                        isJson = false;
                } catch (e) {
                    isJson = false
                }

                if (isJson) {
                    select('#jsonholder').innerHTML = '';
                    select('#mode').innerHTML = 'json';
                    const tree = JsonView.createTree(dataArea.value);
                    JsonView.render(tree, select('#jsonholder'));
                    JsonView.expandChildren(tree);

                    editor.setOption("mode", 'application/ld+json');

                    data = "<style>.json-container{font-family:'Open Sans';font-size:13px;background-color:#fff;color:grey;box-sizing:border-box}.json-container .line{margin:4px 0;display:flex;justify-content:flex-start}.json-container .caret-icon{width:18px;text-align:center;}.json-container .empty-icon{width:18px}.json-container .json-type{margin-right:4px;margin-left:4px}.json-container .json-key{color:#444;margin-right:4px;margin-left:4px}.json-container .json-index{margin-right:4px;margin-left:4px}.json-container .json-value{margin-left:8px}.json-container .json-number{color:#f9ae58}.json-container .json-boolean{color:#ec5f66}.json-container .json-string{color:#86b25c}.json-container .json-size{margin-right:4px;margin-left:4px}.json-container .hide{display:none}.json-container .fas{display:inline-block;width:0;height:0;border-style:solid;position:relative;top:6px;}.json-container .fa-caret-down{}.json-container .fa-caret-right{border-width:5px 0 5px 6px;border-color:transparent transparent transparent grey}</style>" + select('#jsonholder').innerHTML;
                } else {
                    data = getData();
                    editor.setOption("mode", 'xml');
                    select('#mode').innerHTML = 'html';
                }

                select('#output').addEventListener('load', function() {
                    dataArea.value = editor.getValue();
                    var frame = window.output.document;
                    frame.open();
                    frame.write(data);
                    frame.close();

                    if (window.outWin) {
                        var outFrame = outWin.document;
                        outFrame.open();
                        outFrame.write(data);
                        outFrame.close();
                    }

                    editCounter++;

                    if (editCounter > 1)
                        window.editStarted = true;

                    document.getElementById("savelink").classList.remove("disabled");
                    document.getElementById("savelink").disabled = false;
                    document.getElementById("savelink").innerHTML = 'save';

                }, {
                    once: true
                });

                select('#output').src = '';

            }

            function fullScreen() {

                outWin = window.open("about:blank", "html_editor");
                outWin.focus();
                var frame = outWin.document;
                frame.open();
                frame.write(getData());
                frame.close();
            }

            function getData() {
                return document.getElementById('data').value;
            }

            function save() {

                var data = getData();

                //if (!data.length) {alert('nothing to save!'); return;}

                document.getElementById("savelink").classList.add("disabled");
                document.getElementById("savelink").disabled = true;

                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/_save/', true);
                xhr.setRequestHeader('Content-type', 'application/json');
                xhr.onload = function() {
                    if (this.responseText == 1) {

                        if (window.location.pathname == '/') {
                            window.history.replaceState({}, null, id + '?k=' + key);
                        }

                        document.getElementById('livelink').style.display = 'inline-block';
                        document.getElementById("livelink").href = id;
                        document.getElementById("savelink").innerHTML = 'saved';
                        window.editStarted = true;
                        showEditMsg();

                    } else {
                        alert("Something went wrong. Please try again later!");
                    }
                }
                ;

                xhr.send(JSON.stringify({
                    'id': id,
                    'key': key,
                    'data': data
                }));
            }

            function newEdit() {

                var okDelete = false;

                if (window.editStarted) {
                    okDelete = confirm("Start a new edit? This will clear all contents.");
                }

                if (!window.editStarted || okDelete) {
                    window.editStarted = false;
                    window.location = '/new';
                }
                return false;
            }

            function showEditMsg() {
                var ei = document.getElementById('editinfo');

                if (ei) {
                    ei.style.display = 'block';
                    document.getElementsByClassName('CodeMirror')[0].classList.add('padded');
                }

            }

            function hideEditMsg() {
                var ei = document.getElementById('editinfo')

                if (ei) {
                    ei.remove();
                    document.getElementsByClassName('CodeMirror')[0].classList.remove('padded');
                }

            }

            function scrollCursorView() {//editor.scrollTo(0,editor.getCursor().top)
            }

            var select = document.querySelector.bind(document);
            var iframe = window.frames[0];

            var id = 'xc748b873';
            var key = 'af9d6c78cdb5ffa9cd475882e075a5c4bbd021d6';
            var reset = '0';

            var editCounter = 0;
            var editStarted = false;

            var userFailed = 0;

            if (userFailed == 1) {
                alert("Invalid link - either the document doesn't exist or the wrong key was supplied");
                window.location = '/';
            }

            var baseUrl = window.location.protocol + '//html.cafe';

            var userJson = 0;
            var userHTML = userJson;

            var exampleHTML = '<!doctype html>' + "\n" + '<html>' + "\n" + ' <body>' + "\n" + "\n" + '   <style>' + "\n" + '    span {' + "\n" + '      display: inline-block;' + "\n" + '      background:#a7e0f8;' + "\n" + '      padding:10px 8px;' + "\n" + '      margin-bottom:10px; ' + "\n" + '      font-size:18px; ' + "\n" + '    }' + "\n" + '   </style>' + "\n" + "\n" + '   <h2 style="text-decoration:underline;font-size:25px;">html.cafe - a realtime HTML editor and host</h2>' + "\n\n" + '   <span>' + "\n" + '     Edit the html in the top panel, see the result here.' + "\n" + '   </span><br/>' + "\n\n" + '   <span style="background-color:#a7f8c1;">' + "\n" + '       Save your page and get a link to view it live, anywhere.' + "\n" + '   </span>' + "\n\n" + '  </body>' + "\n" + '</html>';

            dataArea = document.getElementById("data");

            if (reset == 1) {
                exampleHTML = '';
                window.history.replaceState({}, null, '/');
                dataArea.focus();

            }
            dataArea.value = userHTML.length ? userHTML : exampleHTML;

            editor = CodeMirror.fromTextArea(dataArea, {
                lineNumbers: true,
                matchBrackets: true,
                mode: 'xml',
                matchTags: {
                    bothTags: true
                }
            });

            editor.on('change', update);

            if (userHTML) {
                document.getElementById('livelink').style.display = 'inline-block';
                document.getElementById("livelink").href = id;
                hideEditMsg();
            }

            Split(['.CodeMirror', '#output'], {
                sizes: [40, 60],
                gutterSize: 15,
                minSize: 10,
                lint: true,
                direction: 'vertical',
                gutter: function() {
                    return document.getElementById("gutter");
                }
            });

            update();

            window.onbeforeunload = function(e) {

                if (document.getElementById('savelink').disabled != true && window.editStarted) {
                    return 'Are you sure you want to leave? You will lose any unsaved text.';
                }

            }
            ;

            if (mediaWidth >= 728) {
                document.getElementById('mainad').className += ' huge';
                document.getElementById('body').className += ' huge';
            } else if (mediaWidth == 468) {
                document.getElementById('mainad').className += ' big';
                document.getElementById('body').className += ' big';
            } else {
                document.getElementById('mainad').className += ' small';
                document.getElementById('body').className += ' small';
            }
        </script>
        <script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"94c79d4d951745d085049dd7f2bbd8f8","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
    </body>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5VXF192YFE"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-5VXF192YFE');
    </script>
</html>
